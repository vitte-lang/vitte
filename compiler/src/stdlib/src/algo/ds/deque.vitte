mod algo.ds.deque

type Deque
  buf: [i64]
  head: i64
  tail: i64
  len:  i64
.end

fn deque_new(cap: i64) -> Deque
  let d: Deque
  set d.buf = [0; cap]
  set d.head = 0
  set d.tail = 0
  set d.len = 0
  ret d
.end

fn deque_push_back(d: &mut Deque, x: i64) -> void
  set d.buf[d.tail] = x
  set d.tail = (d.tail + 1) % d.buf.len
  set d.len = d.len + 1
.end

fn deque_pop_front(d: &mut Deque) -> i64
  let x: i64 = d.buf[d.head]
  set d.head = (d.head + 1) % d.buf.len
  set d.len = d.len - 1
  ret x
.end
