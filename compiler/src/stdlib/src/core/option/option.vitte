mod core.option.option

type OptionI64
  has: bool
  val: i64
.end

fn some_i64(x: i64) -> OptionI64
  let o: OptionI64
  set o.has = true
  set o.val = x
  ret o
.end

fn none_i64() -> OptionI64
  let o: OptionI64
  set o.has = false
  set o.val = 0
  ret o
.end

fn is_some(o: &OptionI64) -> bool
  ret o.has
.end

fn unwrap_or(o: &OptionI64, default: i64) -> i64
  if o.has
    ret o.val
  .end
  ret default
.end
