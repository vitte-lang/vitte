mod cli.progress.spinner

use cli.term.output.*
use cli.ansi.cursor.*

type Spinner
  frames: [str]
  idx: i64
.end

fn spinner_new() -> Spinner
  let s: Spinner
  set s.frames = ["-", "\\", "|", "/"]
  set s.idx = 0
  ret s
.end

fn spinner_tick(sp: &mut Spinner, msg: str) -> void
  let f: str = sp.frames[sp.idx]
  set sp.idx = (sp.idx + 1) % sp.frames.len
  do print(clear_line() + "\r" + f + " " + msg)
.end
