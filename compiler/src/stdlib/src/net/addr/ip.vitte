mod net.addr.ip

type IpKind
  v: i64
.end
const IPV4: IpKind = (4)
const IPV6: IpKind = (6)

type Ipv4
  a: u8
  b: u8
  c: u8
  d: u8
.end

type Ipv6
  # 16 bytes
  b: [u8]
.end

type IpAddr
  kind: i64
  v4: Ipv4
  v6: Ipv6
.end

fn ipv4(a: u8, b: u8, c: u8, d: u8) -> IpAddr
  let ip: IpAddr
  set ip.kind = 4
  set ip.v4.a = a
  set ip.v4.b = b
  set ip.v4.c = c
  set ip.v4.d = d
  ret ip
.end
