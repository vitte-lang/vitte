# ============================================================
# vitte_transmute::lower
# Module racine du lowering de transmutation
# ============================================================

space vitte/compiler/backends/vitte_transmute/lower


# ------------------------------------------------------------
# Sous-modules
# ------------------------------------------------------------

# Émission concrète des transmutations
pull vitte/compiler/backends/vitte_transmute/lower/emit


# ------------------------------------------------------------
# Re-exports publics
# ------------------------------------------------------------

use emit::EmitKind
use emit::EmitResult
use emit::emit_transmute


# ------------------------------------------------------------
# Facade de commodité
# ------------------------------------------------------------

proc lower_transmute
    ctx: &mut vitte/compiler/backends/vitte_codegen_ssa/context::CodegenCtx
    from_ty: &vitte/compiler/backends/vitte_transmute/ir/type::Type
    to_ty: &vitte/compiler/backends/vitte_transmute/ir/type::Type
    value: vitte/compiler/backends/vitte_codegen_ssa/ir/value::Value
-> vitte/compiler/backends/vitte_codegen_ssa/ir/value::Value

    let r =
        emit_transmute(
            ctx,
            from_ty,
            to_ty,
            value
        )

    give r.value
.end
