use std/arduino/i2c.*
use std/arduino/gpio.*
use std/arduino/timer.*

entry main at core/app {
  begin()
  pin_mode(13, PinMode.Output)
  loop {
    let addr = 1
    loop {
      begin_transmission(addr)
      let err = end_transmission()
      if err == 0 {
        digital_write(13, PinState.High)
        delay_ms(25)
        digital_write(13, PinState.Low)
      }
      if addr == 127 {
        break
      }
      addr = (addr + 1)
    }
    delay_ms(200)
  }
  return 0
}
