{"version":3,"file":"runtimeLocator.js","sourceRoot":"","sources":["../../src/debug/runtimeLocator.ts"],"names":[],"mappings":"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","sourcesContent":["import * as vscode from 'vscode';\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport * as os from 'os';\n\nimport * as cp from 'child_process';\n\ninterface VitteVersions {\n  runtime?: string;\n  lsp?: string;\n  build?: string;\n  fmt?: string;\n  bench?: string;\n}\n\n/**\n * Utility for detecting the Vitte toolchain root and runtime binaries.\n * Used by DebugConfigurationProvider and factory.\n */\nexport interface VitteRuntimePaths {\n  toolchainRoot?: string;\n  runtimePath: string;\n  lspPath?: string;\n  buildPath?: string;\n  fmtPath?: string;\n  benchPath?: string;\n  found: boolean;\n  message?: string;\n  versions?: VitteVersions;\n}\n\n\n// -----------------------------\n// fs/helpers (cross-platform)\n// -----------------------------\nfunction isWindows(): boolean { return os.platform() === 'win32'; }\n\nfunction exists(p: string | undefined): boolean {\n  if (!p) return false;\n  try { fs.accessSync(p, fs.constants.F_OK); return true; } catch { return false; }\n}\n\nfunction isExecutableSync(p: string | undefined): boolean {\n  if (!p) return false;\n  try {\n    if (isWindows()) { fs.accessSync(p, fs.constants.F_OK); return true; }\n    fs.accessSync(p, fs.constants.X_OK); return true;\n  } catch { return false; }\n}\n\nfunction real(p: string | undefined): string | undefined {\n  if (!p) return undefined;\n  try {\n    const rs = (fs.realpathSync as unknown) as { native?: (path: string) => string };\n    if (typeof rs.native === 'function') {\n      return rs.native(p);\n    }\n    return fs.realpathSync(p);\n  } catch {\n    return p;\n  }\n}\n\nfunction firstNonEmpty(...values: (string | undefined)[]): string | undefined {\n  for (const value of values) {\n    if (value && value.length > 0) return value;\n  }\n  return undefined;\n}\n\n/** In-memory cache for lookups to avoid excessive fs access */\nconst WHICH_CACHE = new Map<string, string | undefined>();\n\n/** Try resolve binary with PATH and common install roots. */\nfunction which(bin: string): string | undefined {\n  if (WHICH_CACHE.has(bin)) return WHICH_CACHE.get(bin)!;\n\n  const envPath = process.env.PATH ?? '';\n  const exts = isWindows() ? (process.env.PATHEXT?.split(';').filter(Boolean) ?? ['.exe', '.cmd', '.bat']) : [''];\n  const parts = envPath.split(path.delimiter).filter(Boolean);\n\n  for (const p of parts) {\n    for (const ext of exts) {\n      const full = path.join(p, bin + ext);\n      if (isExecutableSync(full)) { const r = real(full) ?? full; WHICH_CACHE.set(bin, r); return r; }\n    }\n  }\n\n  // Common extra roots: Homebrew, /usr/local, Nix, ~/.local/bin\n  const candidates: string[] = [];\n  const home = os.homedir();\n  if (isWindows()) {\n    candidates.push(path.join(process.env.ProgramFiles ?? 'C:/Program Files', 'Vitte', 'bin', `${bin}.exe`));\n  } else {\n    candidates.push('/opt/homebrew/bin/' + bin);\n    candidates.push('/usr/local/bin/' + bin);\n    candidates.push('/usr/bin/' + bin);\n    candidates.push(path.join(home, '.local', 'bin', bin));\n    // Nix store symlink path\n    candidates.push('/run/current-system/sw/bin/' + bin);\n    candidates.push('/nix/var/nix/profiles/default/bin/' + bin);\n  }\n  for (const c of candidates) {\n    if (isExecutableSync(c)) { const r = real(c) ?? c; WHICH_CACHE.set(bin, r); return r; }\n  }\n\n  // As a last resort, try Homebrew prefix discovery (guarded)\n  if (!isWindows()) {\n    try {\n      const out = cp.spawnSync('brew', ['--prefix'], { encoding: 'utf8', timeout: 350 });\n      const prefix = (out.status === 0 && typeof out.stdout === 'string') ? out.stdout.trim() : '';\n      if (prefix) {\n        const full = path.join(prefix, 'bin', bin);\n        if (isExecutableSync(full)) { const r = real(full) ?? full; WHICH_CACHE.set(bin, r); return r; }\n      }\n    } catch { /* ignore */ }\n  }\n\n  WHICH_CACHE.set(bin, undefined);\n  return undefined;\n}\n\n// -----------------------------\n// semver helpers\n// -----------------------------\ninterface VSemVer { major: number; minor: number; patch: number; prerelease?: string; }\n\nfunction parseSemver(input: string | undefined): VSemVer | undefined {\n  if (!input) return undefined;\n  const match = /v?(\\d+)\\.(\\d+)\\.(\\d+)(?:[-+]([^\\s]+))?/.exec(input.trim());\n  if (!match) return undefined;\n  const [, sMaj, sMin, sPatch, pre] = match;\n  if (!sMaj || !sMin || !sPatch) return undefined;\n  const ver: VSemVer = { major: Number.parseInt(sMaj, 10), minor: Number.parseInt(sMin, 10), patch: Number.parseInt(sPatch, 10) };\n  if (pre !== undefined) ver.prerelease = pre;\n  return ver;\n}\n\nfunction cmpSemver(a: VSemVer, b: VSemVer): number {\n  if (a.major !== b.major) return a.major - b.major;\n  if (a.minor !== b.minor) return a.minor - b.minor;\n  if (a.patch !== b.patch) return a.patch - b.patch;\n  // prereleases sort before stable\n  if (a.prerelease && !b.prerelease) return -1;\n  if (!a.prerelease && b.prerelease) return 1;\n  return 0;\n}\n\n// -----------------------------\n// discovery\n// -----------------------------\nfunction discoverWorkspaceBinRoots(): string[] {\n  const roots: string[] = [];\n  const folders = vscode.workspace.workspaceFolders ?? [];\n  for (const f of folders) {\n    const base = f.uri.fsPath;\n    const cands = [\n      path.join(base, '.vitte', 'bin'),\n      path.join(base, 'vitte', 'bin'),\n      path.join(base, '.bin'),\n      path.join(base, 'tools', 'vitte', 'bin'),\n    ];\n    for (const c of cands) if (exists(c)) roots.push(c);\n  }\n  return roots;\n}\n\n/** Detect toolchain root by checking settings, env vars, workspace bins, or bin location. */\nexport function detectVitteToolchainRoot(): string | undefined {\n  const cfg = vscode.workspace.getConfiguration('vitte');\n  const explicit = cfg.get<string>('toolchain.root') ?? cfg.get<string>('toolchainPath');\n  if (explicit && isExecutableSync(path.join(explicit, isWindows() ? 'bin/vitte-runtime.exe' : 'bin/vitte-runtime'))) return explicit;\n\n  const envRoot = firstNonEmpty(process.env.VITTE_TOOLCHAIN_ROOT, process.env.VITTE_ROOT, process.env.VITTE_HOME, process.env.VITTE_BIN_DIR);\n  if (envRoot) {\n    const candidate = path.join(envRoot, 'bin', isWindows() ? 'vitte-runtime.exe' : 'vitte-runtime');\n    if (isExecutableSync(candidate)) return real(envRoot) ?? envRoot;\n  }\n\n  // workspace embedded bins (e.g., monorepo/tools)\n  for (const r of discoverWorkspaceBinRoots()) {\n    const candidate = path.join(r, isWindows() ? 'vitte-runtime.exe' : 'vitte-runtime');\n    if (isExecutableSync(candidate)) return real(path.resolve(r, '..')) ?? path.resolve(r, '..');\n  }\n\n  const lsp = which('vitte-lsp');\n  if (lsp) return path.resolve(path.dirname(lsp), '..');\n\n  const runtime = which('vitte-runtime');\n  if (runtime) return path.resolve(path.dirname(runtime), '..');\n\n  return undefined;\n}\n\nfunction getVersion(bin: string | undefined): string | undefined {\n  if (!bin) return undefined;\n  try {\n    const res = cp.spawnSync(bin, ['--version'], { encoding: 'utf8', timeout: 700 });\n    const stdout = (res.stdout ?? '').trim();\n    const stderr = (res.stderr ?? '').trim();\n    const out = stdout.length > 0 ? stdout : stderr;\n    const match = /\\b(v?\\d+\\.\\d+\\.\\d+(?:[-+].*)?)\\b/.exec(out);\n    if (match) return match[1];\n    return out.length > 0 ? out : undefined;\n  } catch { return undefined; }\n}\n\n// -----------------------------\n// core location with memoization\n// -----------------------------\nlet MEMO_RESULT: VitteRuntimePaths | undefined;\n\nexport function clearRuntimeLocatorCache(): void { MEMO_RESULT = undefined; }\n\nfunction resolveFromSettingOrRoot(cfg: vscode.WorkspaceConfiguration, root: string | undefined, name: string, settingKey: string): string | undefined {\n  const fromSetting = cfg.get<string>(settingKey);\n  if (fromSetting && isExecutableSync(fromSetting)) return real(fromSetting) ?? fromSetting;\n  if (root) {\n    const candidate = path.join(root, 'bin', name + (isWindows() ? '.exe' : ''));\n    if (isExecutableSync(candidate)) return real(candidate) ?? candidate;\n  }\n  // workspace overrides\n  for (const r of discoverWorkspaceBinRoots()) {\n    const candidate = path.join(r, name + (isWindows() ? '.exe' : ''));\n    if (isExecutableSync(candidate)) return real(candidate) ?? candidate;\n  }\n  return which(name);\n}\n\n/**\n * Locate runtime and companion binaries. Memoized per session.\n * Prefers workspace settings, then toolchain root, then workspace bins, then PATH.\n */\nexport function locateVitteRuntime(minRequired?: string): Promise<VitteRuntimePaths> {\n  if (MEMO_RESULT) return Promise.resolve(MEMO_RESULT);\n\n  const cfg = vscode.workspace.getConfiguration('vitte');\n  const toolchainRoot = detectVitteToolchainRoot();\n\n  const runtimePath = resolveFromSettingOrRoot(cfg, toolchainRoot, 'vitte-runtime', 'runtime.path')\n    ?? resolveFromSettingOrRoot(cfg, toolchainRoot, 'vitte-runtime', 'debug.program')\n    ?? 'vitte-runtime';\n  const lspPath   = resolveFromSettingOrRoot(cfg, toolchainRoot, 'vitte-lsp',   'lsp.path');\n  const buildPath = resolveFromSettingOrRoot(cfg, toolchainRoot, 'vitte-build', 'build.path');\n  const fmtPath   = resolveFromSettingOrRoot(cfg, toolchainRoot, 'vitte-fmt',   'fmt.path');\n  const benchPath = resolveFromSettingOrRoot(cfg, toolchainRoot, 'vitte-bench', 'bench.path');\n\n  const found = isExecutableSync(runtimePath);\n\n  const result: VitteRuntimePaths = { runtimePath, found };\n  if (toolchainRoot) result.toolchainRoot = toolchainRoot;\n  if (lspPath) result.lspPath = lspPath;\n  if (buildPath) result.buildPath = buildPath;\n  if (fmtPath) result.fmtPath = fmtPath;\n  if (benchPath) result.benchPath = benchPath;\n\n  // Versions\n  const versions: VitteVersions = {};\n  const vr = getVersion(found ? runtimePath : undefined);\n  if (vr) {\n    versions.runtime = vr;\n  }\n  const vl = getVersion(lspPath);\n  if (vl) {\n    versions.lsp = vl;\n  }\n  const vb = getVersion(buildPath);\n  if (vb) {\n    versions.build = vb;\n  }\n  const vf = getVersion(fmtPath);\n  if (vf) {\n    versions.fmt = vf;\n  }\n  const vn = getVersion(benchPath);\n  if (vn) {\n    versions.bench = vn;\n  }\n  if (Object.keys(versions).length > 0) {\n    result.versions = versions;\n  }\n\n  // Optional min version check\n  if (minRequired && versions.runtime) {\n    const have = parseSemver(versions.runtime);\n    const need = parseSemver(minRequired);\n    if (have && need && cmpSemver(have, need) < 0) {\n      result.message = `vitte-runtime ${versions.runtime} is older than required ${minRequired}`;\n    }\n  }\n\n  result.message ??= found\n    ? `vitte-runtime detected at ${runtimePath}`\n    : 'vitte-runtime not found in PATH or toolchain root';\n\n  MEMO_RESULT = result;\n  return Promise.resolve(result);\n}\n\n/** Quick command for users: Detect and show runtime info in VSCode output */\nexport async function detectAndShowRuntimeInfo(output?: vscode.OutputChannel): Promise<void> {\n  const result = await locateVitteRuntime();\n  const out = output ?? vscode.window.createOutputChannel('Vitte');\n  out.appendLine('[Vitte] Toolchain detection');\n  if (result.toolchainRoot) out.appendLine(`Toolchain root: ${result.toolchainRoot}`);\n  out.appendLine(`Runtime: ${result.runtimePath}`);\n  if (result.lspPath) out.appendLine(`LSP: ${result.lspPath}`);\n  if (result.buildPath) out.appendLine(`Build: ${result.buildPath}`);\n  if (result.fmtPath) out.appendLine(`Fmt: ${result.fmtPath}`);\n  if (result.benchPath) out.appendLine(`Bench: ${result.benchPath}`);\n  if (result.versions) {\n    const v = result.versions;\n    out.appendLine('Versions:');\n    if (v?.runtime) out.appendLine(`  runtime: ${v.runtime}`);\n    if (v?.lsp) out.appendLine(`  lsp:     ${v.lsp}`);\n    if (v?.build) out.appendLine(`  build:   ${v.build}`);\n    if (v?.fmt) out.appendLine(`  fmt:     ${v.fmt}`);\n    if (v?.bench) out.appendLine(`  bench:   ${v.bench}`);\n  }\n  out.appendLine(`Found: ${String(result.found)}`);\n  if (result.message) out.appendLine(result.message);\n  out.show(true);\n}\n\n/**\n * Register commands:\n *  - vitte.detectToolchain: show detected paths/versions\n *  - vitte.selectRuntime: let user pick a binary and persist to settings\n *  - vitte.clearRuntimeCache: invalidate memoized result\n */\nexport function registerRuntimeLocatorCommand(ctx: vscode.ExtensionContext): void {\n  const detectCmd = vscode.commands.registerCommand('vitte.detectToolchain', async () => {\n    await detectAndShowRuntimeInfo();\n  });\n\n  const clearCmd = vscode.commands.registerCommand('vitte.clearRuntimeCache', () => {\n    clearRuntimeLocatorCache();\n    vscode.window.showInformationMessage('Vitte: runtime cache cleared.');\n  });\n\n  const pickCmd = vscode.commands.registerCommand('vitte.selectRuntime', async () => {\n    const opts: vscode.OpenDialogOptions = {\n      canSelectMany: false,\n      canSelectFiles: true,\n      canSelectFolders: false,\n      openLabel: 'Sélectionner vitte-runtime',\n      title: 'Sélectionner le binaire vitte-runtime',\n    };\n    if (isWindows()) {\n      opts.filters = { Exécutables: ['exe', 'cmd', 'bat'] };\n    }\n    const picked = await vscode.window.showOpenDialog(opts);\n    const uri = picked?.[0];\n    if (!uri) return;\n    const fsPath = uri.fsPath;\n    if (!isExecutableSync(fsPath)) {\n      vscode.window.showErrorMessage('Le fichier sélectionné ne semble pas exécutable.');\n      return;\n    }\n    await vscode.workspace.getConfiguration('vitte').update('runtime.path', fsPath, vscode.ConfigurationTarget.Workspace);\n    clearRuntimeLocatorCache();\n    vscode.window.showInformationMessage(`Vitte: runtime défini sur ${fsPath}`);\n  });\n\n  ctx.subscriptions.push(detectCmd, clearCmd, pickCmd);\n}\n"]}