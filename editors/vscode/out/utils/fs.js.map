{"version":3,"file":"fs.js","sourceRoot":"","sources":["../../src/utils/fs.ts"],"names":[],"mappings":"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","sourcesContent":["import * as vscode from 'vscode';\nimport * as path from 'path';\nimport * as os from 'os';\n\n/** Lightweight FS helpers over vscode.workspace.fs (portable, no Node fs dependency). */\nexport type MaybeUri = vscode.Uri | string;\n\n/** Convert string → Uri (file scheme) or passthrough if already Uri. */\nexport function asUri(p: MaybeUri): vscode.Uri {\n  return typeof p === 'string' ? vscode.Uri.file(p) : p;\n}\n\n/** Join segments into a file Uri (using Node path for correctness). */\nexport function join(...segments: string[]): vscode.Uri {\n  const p = path.join(...segments);\n  return vscode.Uri.file(p);\n}\n\n/** Workspace root (first folder) if any. */\nexport function workspaceRoot(): vscode.Uri | undefined {\n  return vscode.workspace.workspaceFolders?.[0]?.uri;\n}\n\n/** Stats & existence */\nexport async function stat(uri: MaybeUri): Promise<vscode.FileStat | undefined> {\n  try { return await vscode.workspace.fs.stat(asUri(uri)); } catch { return undefined; }\n}\n\nexport async function exists(uri: MaybeUri): Promise<boolean> {\n  return (await stat(uri)) !== undefined;\n}\n\nexport async function isDirectory(uri: MaybeUri): Promise<boolean> {\n  const s = await stat(uri); return !!s && (s.type & vscode.FileType.Directory) !== 0;\n}\n\nexport async function isFile(uri: MaybeUri): Promise<boolean> {\n  const s = await stat(uri); return !!s && (s.type & vscode.FileType.File) !== 0;\n}\n\n/** Ensure directory exists (mkdir -p). */\nexport async function ensureDir(dir: MaybeUri): Promise<void> {\n  const uri = asUri(dir);\n  const parts = uri.fsPath.split(path.sep);\n  for (let i = 1; i <= parts.length; i++) {\n    const prefix = parts.slice(0, i).join(path.sep);\n    if (!prefix) continue;\n    const u = vscode.Uri.file(prefix);\n    if (!(await exists(u))) {\n      try { await vscode.workspace.fs.createDirectory(u); } catch { /* ignore */ }\n    }\n  }\n}\n\n/** Recursively remove a file or directory (rm -rf). */\nexport async function rmrf(target: MaybeUri): Promise<void> {\n  const uri = asUri(target);\n  const s = await stat(uri);\n  if (!s) return;\n  if ((s.type & vscode.FileType.File) !== 0) {\n    try { await vscode.workspace.fs.delete(uri, { useTrash: false }); } catch { /* ignore */ }\n    return;\n  }\n  if ((s.type & vscode.FileType.Directory) !== 0) {\n    try {\n      const entries = await vscode.workspace.fs.readDirectory(uri);\n      for (const [name, t] of entries) {\n        const child = vscode.Uri.file(path.join(uri.fsPath, name));\n        if (t & vscode.FileType.Directory) await rmrf(child);\n        else { try { await vscode.workspace.fs.delete(child, { useTrash: false }); } catch { /* ignore */ } }\n      }\n      await vscode.workspace.fs.delete(uri, { recursive: false, useTrash: false });\n    } catch { /* ignore */ }\n  }\n}\n\n/** Read directory entries. */\nexport async function listDir(dir: MaybeUri): Promise<{ name: string; uri: vscode.Uri; type: vscode.FileType }[]> {\n  const uri = asUri(dir);\n  try {\n    const entries = await vscode.workspace.fs.readDirectory(uri);\n    return entries.map(([name, type]) => ({ name, type, uri: vscode.Uri.file(path.join(uri.fsPath, name)) }));\n  } catch { return []; }\n}\n\n/** Read UTF-8 text file. */\nexport async function readFileText(file: MaybeUri): Promise<string> {\n  const data = await vscode.workspace.fs.readFile(asUri(file));\n  return new TextDecoder('utf-8').decode(data);\n}\n\n/** Write UTF-8 text file, creating parent dirs. */\nexport async function writeFileText(file: MaybeUri, text: string): Promise<void> {\n  const uri = asUri(file);\n  await ensureDir(path.dirname(uri.fsPath));\n  const data = new TextEncoder().encode(text);\n  await vscode.workspace.fs.writeFile(uri, data);\n}\n\n/** Write only if content changed (avoids churn). Returns true if written. */\nexport async function writeFileIfChanged(file: MaybeUri, text: string): Promise<boolean> {\n  const uri = asUri(file);\n  if (await exists(uri)) {\n    try {\n      const cur = await readFileText(uri);\n      if (cur === text) return false;\n    } catch { /* rewrite on error */ }\n  }\n  await writeFileText(uri, text);\n  return true;\n}\n\n/** JSON helpers */\nexport async function readJson<T = unknown>(file: MaybeUri): Promise<T | undefined> {\n  try { return JSON.parse(await readFileText(file)) as T; } catch { return undefined; }\n}\n\nexport async function writeJson(file: MaybeUri, value: unknown, indent = 2, eol = '\\n'): Promise<void> {\n  const text = JSON.stringify(value, null, indent) + eol;\n  await writeFileText(file, text);\n}\n\n/** Copy/move wrappers. */\nexport async function copy(src: MaybeUri, dst: MaybeUri, overwrite = true): Promise<void> {\n  await ensureDir(path.dirname(asUri(dst).fsPath));\n  await vscode.workspace.fs.copy(asUri(src), asUri(dst), { overwrite });\n}\n\nexport async function move(src: MaybeUri, dst: MaybeUri, overwrite = true): Promise<void> {\n  await ensureDir(path.dirname(asUri(dst).fsPath));\n  await vscode.workspace.fs.rename(asUri(src), asUri(dst), { overwrite });\n}\n\n/** Find up: search for any of `names` from start → up to workspace root. */\nexport async function findUp(names: string | readonly string[], start?: MaybeUri): Promise<vscode.Uri | undefined> {\n  let list: string[];\n  if (Array.isArray(names)) {\n    const arr = names as readonly string[];\n    list = [...arr];\n  } else {\n    list = [names as string];\n  }\n  const root = workspaceRoot()?.fsPath;\n  let cur = asUri(start ?? workspaceRoot() ?? vscode.Uri.file(process.cwd())).fsPath;\n  while (true) {\n    for (const n of list) {\n      const candidate = path.join(cur, n);\n      if (await exists(candidate)) return vscode.Uri.file(candidate);\n    }\n    const parent = path.dirname(cur);\n    if (parent === cur) break;\n    if (root && cur === root) break;\n    cur = parent;\n  }\n  return undefined;\n}\n\n/** Temp files under ${workspace}/.vitte/tmp or OS temp if no workspace. */\nexport async function ensureTmpDir(): Promise<vscode.Uri> {\n  const base = workspaceRoot()?.fsPath;\n  const dir = base ? path.join(base, '.vitte', 'tmp') : path.join(os.tmpdir(), 'vitte');\n  await ensureDir(dir);\n  return vscode.Uri.file(dir);\n}\n\nexport async function makeTempFile(prefix = 'tmp', ext = '.txt'): Promise<vscode.Uri> {\n  const dir = await ensureTmpDir();\n  const name = `${prefix}-${Date.now().toString(36)}-${Math.random().toString(36).slice(2)}${ext}`;\n  const uri = vscode.Uri.file(path.join(dir.fsPath, name));\n  await writeFileText(uri, '');\n  return uri;\n}\n\nexport async function writeTempText(text: string, prefix = 'tmp', ext = '.txt'): Promise<vscode.Uri> {\n  const f = await makeTempFile(prefix, ext);\n  await writeFileText(f, text);\n  return f;\n}\n\n/** Convenience EOL */\nexport const EOL = '\\n';\n\n/** Export a default namespace-like object for convenience imports. */\nexport default {\n  asUri,\n  join,\n  workspaceRoot,\n  stat,\n  exists,\n  isDirectory,\n  isFile,\n  ensureDir,\n  rmrf,\n  listDir,\n  readFileText,\n  writeFileText,\n  writeFileIfChanged,\n  readJson,\n  writeJson,\n  copy,\n  move,\n  findUp,\n  ensureTmpDir,\n  makeTempFile,\n  writeTempText,\n  EOL,\n};\n"]}