{"version":3,"file":"suggestionsView.js","sourceRoot":"","sources":["../../src/providers/suggestionsView.ts"],"names":[],"mappings":"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","sourcesContent":["import * as vscode from \"vscode\";\n\ntype Logger = (message: string) => void;\n\ninterface SuggestionState {\n  promptInput: string;\n  cInput: string;\n  outputVitte: string;\n  history: { title: string; output: string; ts: number }[];\n  cFlavor: \"c\" | \"cpp\";\n  aiStatus: string;\n}\n\ninterface AiConfig {\n  enabled: boolean;\n  provider: \"ollama\" | \"llamacpp\";\n  model: string;\n  endpoint: string;\n  maxTokens: number;\n  temperature: number;\n  systemPrompt: string;\n  strictVitteOnly: boolean;\n}\n\nfunction mapCTypeToVitte(typeRaw: string): string {\n  const cleaned = typeRaw\n    .replace(/\\bconst\\b/g, \"\")\n    .replace(/\\bunsigned\\b/g, \"\")\n    .replace(/\\bsigned\\b/g, \"\")\n    .replace(/\\bstd::/g, \"\")\n    .trim();\n  if (!cleaned) return \"int\";\n  if (cleaned.includes(\"string\")) return \"string\";\n  if (cleaned.includes(\"bool\")) return \"bool\";\n  if (cleaned.includes(\"char*\") || cleaned.includes(\"char *\")) return \"string\";\n  if (cleaned.includes(\"char\")) return \"int\";\n  if (/\\b(short|int|long|size_t|ssize_t)\\b/.exec(cleaned)) return \"int\";\n  const vectorMatch = /vector<\\s*([^>]+)\\s*>/.exec(cleaned);\n  if (vectorMatch) return `[${mapCTypeToVitte(vectorMatch[1] ?? \"int\")}]`;\n  if (cleaned.includes(\"*\")) return `*${mapCTypeToVitte(cleaned.replace(/\\*/g, \"\").trim())}`;\n  return cleaned;\n}\n\nfunction parseCParams(paramList: string): string {\n  const params = paramList.trim();\n  if (!params || params === \"void\") return \"\";\n  return params\n    .split(\",\")\n    .map((chunk) => {\n      const part = chunk.trim();\n      if (!part) return \"\";\n      const tokens = part.split(/\\s+/);\n      let name = tokens.pop() ?? \"arg\";\n      let type = tokens.join(\" \");\n      if (name.includes(\"*\")) {\n        type = `${type} ${name.replace(/[A-Za-z_]\\w*/, \"\")}`.trim();\n        name = name.replace(/[^A-Za-z_0-9]/g, \"\");\n      }\n      return `${name}: ${mapCTypeToVitte(type)}`;\n    })\n    .filter(Boolean)\n    .join(\", \");\n}\n\nfunction convertCSignature(line: string): string | null {\n  const match = /^\\s*([A-Za-z_][\\w:<>,\\s\\*&]+)\\s+([A-Za-z_]\\w*)\\s*\\(([^)]*)\\)\\s*\\{?/.exec(line);\n  if (!match) return null;\n  const ret = mapCTypeToVitte(match[1] ?? \"\");\n  const name = match[2] ?? \"proc\";\n  const params = parseCParams(match[3] ?? \"\");\n  return ret === \"void\" ? `proc ${name}(${params}) {` : `proc ${name}(${params}) -> ${ret} {`;\n}\n\nfunction convertCStruct(line: string): string | null {\n  const match = /^\\s*struct\\s+([A-Za-z_]\\w*)\\s*\\{/.exec(line);\n  if (!match) return null;\n  return `form ${match[1] ?? \"Struct\"} {`;\n}\n\nfunction convertCField(line: string): string | null {\n  const match = /^\\s*([A-Za-z_][\\w:<>,\\s\\*&]+)\\s+([A-Za-z_]\\w*)\\s*(\\[[^\\]]+\\])?\\s*;/.exec(line);\n  if (!match) return null;\n  const type = mapCTypeToVitte(match[1] ?? \"\");\n  const name = match[2] ?? \"field\";\n  return `  ${name}: ${type},`;\n}\n\nfunction convertCVar(line: string): string | null {\n  const match = /^\\s*(const\\s+)?([A-Za-z_][\\w:<>,\\s\\*&]+)\\s+([A-Za-z_]\\w*)\\s*(=\\s*(.+))?;/.exec(line);\n  if (!match) return null;\n  const isConst = Boolean(match[1]);\n  const type = mapCTypeToVitte(match[2] ?? \"\");\n  const name = match[3] ?? \"var\";\n  const value = (match[5] ?? \"\").trim();\n  const head = isConst ? \"const\" : \"let\";\n  if (value) return `${head} ${name}: ${type} = ${value}`;\n  return `${head} ${name}: ${type} = ${type === \"string\" ? \"\\\"\\\"\" : \"0\"}`;\n}\n\nfunction convertCIf(line: string): string | null {\n  const match = /^\\s*if\\s*\\((.+)\\)\\s*\\{/.exec(line);\n  if (!match) return null;\n  return `if ${match[1] ?? \"\"} {`;\n}\n\nfunction convertCElse(line: string): string | null {\n  if (/^\\s*else\\s*\\{/.test(line)) return \"else {\";\n  return null;\n}\n\nfunction convertCWhile(line: string): string | null {\n  const match = /^\\s*while\\s*\\((.+)\\)\\s*\\{/.exec(line);\n  if (!match) return null;\n  return `loop { // while ${match[1] ?? \"\"}`;\n}\n\nfunction convertCFor(line: string): string | null {\n  if (!/^\\s*for\\s*\\(/.test(line)) return null;\n  return \"loop { // for (...)\";\n}\n\nfunction convertCReturn(line: string): string | null {\n  const match = /^\\s*return\\s+(.+)\\s*;/.exec(line);\n  if (!match) return null;\n  return `return ${match[1] ?? \"\"}`;\n}\n\nfunction convertCStatements(line: string): string {\n  return line\n    .replace(/\\btrue\\b/g, \"true\")\n    .replace(/\\bfalse\\b/g, \"false\")\n    .replace(/\\bprintf\\s*\\(/g, \"emit \");\n}\n\nfunction convertCToVitte(input: string): string {\n  const lines = input.split(/\\r?\\n/);\n  const out: string[] = [];\n  for (const raw of lines) {\n    const line = raw.trimEnd();\n    if (!line) {\n      out.push(\"\");\n      continue;\n    }\n    const sig = convertCSignature(line);\n    if (sig) {\n      out.push(sig);\n      continue;\n    }\n    const form = convertCStruct(line);\n    if (form) {\n      out.push(form);\n      continue;\n    }\n    if (line.startsWith(\"}\")) {\n      out.push(\"}\");\n      continue;\n    }\n    const field = convertCField(line);\n    if (field) {\n      out.push(field);\n      continue;\n    }\n    const ifLine = convertCIf(line);\n    if (ifLine) {\n      out.push(ifLine);\n      continue;\n    }\n    const elseLine = convertCElse(line);\n    if (elseLine) {\n      out.push(elseLine);\n      continue;\n    }\n    const whileLine = convertCWhile(line);\n    if (whileLine) {\n      out.push(whileLine);\n      continue;\n    }\n    const forLine = convertCFor(line);\n    if (forLine) {\n      out.push(forLine);\n      continue;\n    }\n    const retLine = convertCReturn(line);\n    if (retLine) {\n      out.push(retLine);\n      continue;\n    }\n    const decl = convertCVar(line);\n    if (decl) {\n      out.push(decl);\n      continue;\n    }\n    out.push(convertCStatements(line));\n  }\n  return out.join(\"\\n\");\n}\n\nfunction getAiConfig(): AiConfig {\n  const cfg = vscode.workspace.getConfiguration(\"vitte.ai\");\n  const enabled = cfg.get<boolean>(\"enabled\", false);\n  const provider = cfg.get<\"ollama\" | \"llamacpp\">(\"provider\", \"ollama\");\n  const model = cfg.get<string>(\"model\", \"qwen2.5-coder:0.5b\");\n  const endpoint = cfg.get<string>(\"endpoint\", provider === \"ollama\" ? \"http://localhost:11434\" : \"http://localhost:8080\");\n  const maxTokens = cfg.get<number>(\"maxTokens\", 256);\n  const temperature = cfg.get<number>(\"temperature\", 0.2);\n  const systemPrompt = cfg.get<string>(\n    \"systemPrompt\",\n    \"You are a Vitte code generator. Output only valid Vitte code, no explanations, no markdown.\"\n  );\n  const strictVitteOnly = cfg.get<boolean>(\"strictVitteOnly\", true);\n  return { enabled, provider, model, endpoint, maxTokens, temperature, systemPrompt, strictVitteOnly };\n}\n\nasync function callOllama(cfg: AiConfig, prompt: string): Promise<string> {\n  const res = await fetch(`${cfg.endpoint.replace(/\\/$/, \"\")}/api/generate`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({\n      model: cfg.model,\n      prompt,\n      system: cfg.systemPrompt,\n      stream: false,\n      options: {\n        temperature: cfg.temperature,\n        num_predict: cfg.maxTokens\n      }\n    })\n  });\n  if (!res.ok) {\n    throw new Error(`Ollama error: ${res.status} ${res.statusText}`);\n  }\n  const data = (await res.json()) as { response?: string };\n  return data.response?.trim() ?? \"\";\n}\n\nasync function callLlamaCpp(cfg: AiConfig, prompt: string): Promise<string> {\n  const base = cfg.endpoint.replace(/\\/$/, \"\");\n  const res = await fetch(`${base}/v1/chat/completions`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({\n      model: cfg.model,\n      messages: [\n        { role: \"system\", content: cfg.systemPrompt },\n        { role: \"user\", content: prompt }\n      ],\n      temperature: cfg.temperature,\n      max_tokens: cfg.maxTokens\n    })\n  });\n  if (!res.ok) {\n    throw new Error(`llama.cpp error: ${res.status} ${res.statusText}`);\n  }\n  const data = (await res.json()) as { choices?: Array<{ message?: { content?: string } }> };\n  return data.choices?.[0]?.message?.content?.trim() ?? \"\";\n}\n\nfunction sanitizeVitteOnly(raw: string): string {\n  const cleaned = raw\n    .replace(/```[\\s\\S]*?```/g, (block) => block.replace(/```[a-zA-Z]*\\n?/g, \"\").replace(/```/g, \"\"))\n    .replace(/```/g, \"\")\n    .trim();\n\n  const lines = cleaned.split(/\\r?\\n/);\n  const vitteStarts = [\"space\", \"use\", \"pull\", \"share\", \"type\", \"form\", \"trait\", \"pick\", \"proc\", \"macro\", \"entry\", \"const\", \"let\", \"make\"];\n  let startIndex = 0;\n  for (let i = 0; i < lines.length; i++) {\n    const line = (lines[i] ?? \"\").trim();\n    if (!line) continue;\n    if (vitteStarts.some((k) => line.startsWith(k))) {\n      startIndex = i;\n      break;\n    }\n  }\n  const sliced = lines.slice(startIndex).join(\"\\n\").trim();\n  return sliced || cleaned;\n}\n\nasync function generateWithLocalAi(prompt: string, log?: Logger): Promise<string> {\n  const cfg = getAiConfig();\n  if (!cfg.enabled) {\n    return \"// Local AI disabled. Enable vitte.ai.enabled in Settings.\";\n  }\n  log?.(`AI provider=${cfg.provider} model=${cfg.model}`);\n  const raw = cfg.provider === \"ollama\" ? await callOllama(cfg, prompt) : await callLlamaCpp(cfg, prompt);\n  return cfg.strictVitteOnly ? sanitizeVitteOnly(raw) : raw;\n}\n\nfunction pickTemplateFromPrompt(prompt: string): string {\n  const text = prompt.trim().toLowerCase();\n  if (!text) {\n    return [\n      \"space app\",\n      \"\",\n      \"proc main() -> int {\",\n      \"  println(\\\"hello\\\")\",\n      \"  return 0\",\n      \"}\",\n    ].join(\"\\n\");\n  }\n  if (/(http|api|server|route|endpoint)/.test(text)) {\n    return [\n      \"space app/api\",\n      \"\",\n      \"type Request { path: string, method: string }\",\n      \"type Response { status: int, body: string }\",\n      \"\",\n      \"proc handle(req: Request) -> Response {\",\n      \"  if req.path == \\\"/health\\\" {\",\n      \"    return Response { status: 200, body: \\\"ok\\\" }\",\n      \"  }\",\n      \"  return Response { status: 404, body: \\\"not found\\\" }\",\n      \"}\",\n    ].join(\"\\n\");\n  }\n  if (/(file|read|write|io|csv|json)/.test(text)) {\n    return [\n      \"space app/io\",\n      \"\",\n      \"proc load(path: string) -> string {\",\n      \"  let fd = open(path)\",\n      \"  let data = read(fd)\",\n      \"  close(fd)\",\n      \"  return data\",\n      \"}\",\n      \"\",\n      \"proc save(path: string, content: string) {\",\n      \"  let fd = open(path)\",\n      \"  write(fd, content)\",\n      \"  close(fd)\",\n      \"}\",\n    ].join(\"\\n\");\n  }\n  if (/(loop|for|iterate|list|array|map|filter|reduce)/.test(text)) {\n    return [\n      \"space app/data\",\n      \"\",\n      \"proc process(values: [int]) -> int {\",\n      \"  let total = 0\",\n      \"  for v in values {\",\n      \"    if v > 0 {\",\n      \"      total = total + v\",\n      \"    }\",\n      \"  }\",\n      \"  return total\",\n      \"}\",\n    ].join(\"\\n\");\n  }\n  if (/(auth|login|token|user|account)/.test(text)) {\n    return [\n      \"space app/auth\",\n      \"\",\n      \"type User { id: int, email: string }\",\n      \"\",\n      \"proc login(email: string, password: string) -> bool {\",\n      \"  if len(email) == 0 or len(password) == 0 {\",\n      \"    return false\",\n      \"  }\",\n      \"  return true\",\n      \"}\",\n    ].join(\"\\n\");\n  }\n  return [\n    \"space app\",\n    \"\",\n    `# prompt: ${prompt.replace(/\\r?\\n/g, \" \").trim()}`,\n    \"proc main() -> int {\",\n    \"  println(\\\"todo: implement\\\")\",\n    \"  return 0\",\n    \"}\",\n  ].join(\"\\n\");\n}\n\nfunction createConverterSession(webview: vscode.Webview, title: string, log?: Logger): void {\n  webview.options = { enableScripts: true };\n  const state: SuggestionState = {\n    promptInput: \"\",\n    cInput: \"\",\n    outputVitte: \"\",\n    history: [],\n    cFlavor: \"cpp\",\n    aiStatus: \"\"\n  };\n  const update = () => {\n    try {\n      webview.html = getHtml(state, title);\n    } catch (err) {\n      const message = err instanceof Error ? err.message : String(err);\n      log?.(`Webview render error: ${message}`);\n      webview.html = `<!doctype html><html><body><pre>Vitte converter failed to render: ${message}</pre></body></html>`;\n    }\n  };\n  webview.html = `<!doctype html><html><body><p>Loading Vitte converter…</p></body></html>`;\n  update();\n  log?.(\"Converter session initialized.\");\n\n  webview.onDidReceiveMessage(async (msg) => {\n    const data = asRecord(msg);\n    if (!data) return;\n    const type = typeof data.type === \"string\" ? data.type : \"\";\n    if (type === \"generateFromPrompt\") {\n      const prompt = typeof data.prompt === \"string\" ? data.prompt : \"\";\n      state.promptInput = prompt;\n      state.outputVitte = pickTemplateFromPrompt(prompt);\n      state.aiStatus = \"\";\n      state.history.unshift({ title: \"Generate: prompt -> Vitte\", output: state.outputVitte, ts: Date.now() });\n      state.history = state.history.slice(0, 12);\n      update();\n      return;\n    }\n    if (type === \"generateFromAi\") {\n      const prompt = typeof data.prompt === \"string\" ? data.prompt : \"\";\n      state.promptInput = prompt;\n      state.aiStatus = \"Generating with local AI…\";\n      update();\n      try {\n        state.outputVitte = await generateWithLocalAi(prompt, log);\n        state.aiStatus = \"\";\n        state.history.unshift({ title: \"Generate: local AI -> Vitte\", output: state.outputVitte, ts: Date.now() });\n        state.history = state.history.slice(0, 12);\n      } catch (err) {\n        const message = err instanceof Error ? err.message : String(err);\n        state.aiStatus = `Error: ${message}`;\n      }\n      update();\n      return;\n    }\n    if (type === \"convertFromC\") {\n      const input = typeof data.input === \"string\" ? data.input : \"\";\n      const flavor = data.flavor === \"c\" ? \"c\" : \"cpp\";\n      state.cInput = input;\n      state.cFlavor = flavor;\n      state.outputVitte = convertCToVitte(state.cInput);\n      state.history.unshift({ title: \"Convert: C/C++ -> Vitte\", output: state.outputVitte, ts: Date.now() });\n      state.history = state.history.slice(0, 12);\n      update();\n      return;\n    }\n    if (type === \"insert\") {\n      const editor = vscode.window.activeTextEditor;\n      if (!editor) {\n        void vscode.window.showWarningMessage(\"Open a Vitte/Vit file to insert code.\");\n        return;\n      }\n      await editor.edit((edit) => {\n        edit.insert(editor.selection.active, state.outputVitte + \"\\n\");\n      });\n      return;\n    }\n    if (type === \"copy\") {\n      await vscode.env.clipboard.writeText(state.outputVitte);\n      void vscode.window.showInformationMessage(\"Vitte code copied.\");\n      return;\n    }\n    if (type === \"clear\") {\n      state.promptInput = \"\";\n      state.cInput = \"\";\n      state.outputVitte = \"\";\n      state.history = [];\n      state.aiStatus = \"\";\n      update();\n      return;\n    }\n    if (type === \"openAiSettings\") {\n      await vscode.commands.executeCommand(\"workbench.action.openSettings\", \"vitte.ai\");\n      update();\n      return;\n    }\n  });\n}\n\nfunction asRecord(value: unknown): Record<string, unknown> | null {\n  if (!value || typeof value !== \"object\") return null;\n  return value as Record<string, unknown>;\n}\n\nexport function registerSuggestionsView(\n  context: vscode.ExtensionContext,\n  viewId = \"vitteSuggestions\",\n  title = \"Vitte Code Generator\",\n  log?: Logger\n): void {\n  const provider = {\n    resolveWebviewView(view: vscode.WebviewView) {\n      log?.(`Resolve view: ${viewId}`);\n      try {\n        createConverterSession(view.webview, title, log);\n      } catch (err) {\n        const message = err instanceof Error ? err.message : String(err);\n        log?.(`Resolve failed (${viewId}): ${message}`);\n        view.webview.options = { enableScripts: false };\n        view.webview.html = `<!doctype html><html><body><h3>${escapeHtml(title)}</h3><p>Failed to load view.</p><pre>${escapeHtml(message)}</pre></body></html>`;\n      }\n    },\n  } satisfies vscode.WebviewViewProvider;\n\n  context.subscriptions.push(\n    vscode.window.registerWebviewViewProvider(viewId, provider)\n  );\n}\n\nexport function openSuggestionsPanel(\n  context: vscode.ExtensionContext,\n  title = \"Vitte Code Generator\",\n  log?: Logger\n): void {\n  const panel = vscode.window.createWebviewPanel(\n    \"vitteCodeGeneratorPanel\",\n    title,\n    vscode.ViewColumn.One,\n    { enableScripts: true, retainContextWhenHidden: true }\n  );\n  log?.(\"Open converter panel.\");\n  createConverterSession(panel.webview, title, log);\n  context.subscriptions.push(panel);\n}\n\nfunction getHtml(state: SuggestionState, title: string): string {\n  const promptInput = escapeHtml(state.promptInput);\n  const cInput = escapeHtml(state.cInput);\n  const cFlavor = state.cFlavor === \"c\" ? \"c\" : \"cpp\";\n  const outputVitte = escapeHtml(state.outputVitte);\n  const aiStatus = escapeHtml(state.aiStatus);\n  const history = state.history\n    .map((entry) => {\n      const when = new Date(entry.ts).toLocaleTimeString();\n      const entryPrompt = escapeHtml(entry.title || \"Prompt\");\n      const entryOutput = escapeHtml(entry.output || \"\");\n      return `<div class=\"bubble\">\\n  <div class=\"bubble-header\">${entryPrompt} <span class=\"time\">${when}</span></div>\\n  <pre>${entryOutput}</pre>\\n</div>`;\n    })\n    .join(\"\");\n  return `<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<style>\n  :root { color-scheme: light dark; }\n  body { font-family: -apple-system, BlinkMacSystemFont, Segoe UI, sans-serif; padding: 12px; }\n  h3 { margin: 0 0 8px; }\n  textarea { width: 100%; box-sizing: border-box; min-height: 160px; }\n  .row { display: flex; gap: 8px; margin-top: 8px; }\n  button { flex: 1; padding: 6px 10px; }\n  pre { white-space: pre-wrap; background: rgba(127,127,127,0.15); padding: 8px; border-radius: 6px; margin: 0; }\n  .bubble { border: 1px solid rgba(127,127,127,0.35); border-radius: 8px; padding: 8px; margin-top: 8px; }\n  .bubble-header { font-weight: 600; margin-bottom: 6px; display: flex; justify-content: space-between; gap: 8px; }\n  .time { font-weight: 400; opacity: 0.7; font-size: 11px; }\n  .muted { opacity: 0.7; font-size: 12px; }\n  .status { margin-top: 6px; font-size: 12px; }\n</style>\n</head>\n<body>\n  <h3>${escapeHtml(title)}</h3>\n  <div class=\"muted\">Generate Vitte from a prompt, or convert C/C++ (offline).</div>\n  <label>Prompt</label>\n  <textarea id=\"prompt-input\" placeholder=\"Describe what code you want (example: auth API with login and token)\">${promptInput}</textarea>\n  <div class=\"row\">\n    <button id=\"generate\">Generate Vitte</button>\n    <button id=\"generate-ai\">Generate Vitte (Local AI)</button>\n    <button id=\"ai-settings\">AI Settings</button>\n  </div>\n  <div class=\"status\">${aiStatus ? aiStatus : \"\"}</div>\n  <hr />\n  <label>C / C++ input</label>\n  <textarea id=\"c-input\" placeholder=\"Paste C or C++ code here\">${cInput}</textarea>\n  <div class=\"row\">\n    <select id=\"c-flavor\">\n      <option value=\"cpp\" ${cFlavor === \"cpp\" ? \"selected\" : \"\"}>C++</option>\n      <option value=\"c\" ${cFlavor === \"c\" ? \"selected\" : \"\"}>C</option>\n    </select>\n    <button id=\"convert\">Convert to Vitte</button>\n  </div>\n  <div class=\"row\">\n    <button id=\"insert\">Insert Vitte</button>\n    <button id=\"copy\">Copy Vitte</button>\n    <button id=\"clear\">Clear</button>\n  </div>\n  <label style=\"margin-top:8px; display:block;\">Vitte output</label>\n  <pre id=\"out-vitte\">${outputVitte || \"(no Vitte output yet)\"}</pre>\n  <div style=\"margin-top:10px;\">\n    <label>History</label>\n    ${history || `<div class=\"muted\">(no history yet)</div>`}\n  </div>\n\n<script>\n  const vscode = acquireVsCodeApi();\n  document.getElementById('generate').addEventListener('click', () => {\n    const prompt = document.getElementById('prompt-input').value || '';\n    vscode.postMessage({ type: 'generateFromPrompt', prompt });\n  });\n  document.getElementById('generate-ai').addEventListener('click', () => {\n    const prompt = document.getElementById('prompt-input').value || '';\n    vscode.postMessage({ type: 'generateFromAi', prompt });\n  });\n  document.getElementById('ai-settings').addEventListener('click', () => {\n    vscode.postMessage({ type: 'openAiSettings' });\n  });\n  document.getElementById('convert').addEventListener('click', () => {\n    const input = document.getElementById('c-input').value || '';\n    const flavor = document.getElementById('c-flavor').value || 'cpp';\n    vscode.postMessage({ type: 'convertFromC', input, flavor });\n  });\n  document.getElementById('insert').addEventListener('click', () => {\n    vscode.postMessage({ type: 'insert' });\n  });\n  document.getElementById('copy').addEventListener('click', () => {\n    vscode.postMessage({ type: 'copy' });\n  });\n  document.getElementById('clear').addEventListener('click', () => {\n    vscode.postMessage({ type: 'clear' });\n  });\n</script>\n</body>\n</html>`;\n}\n\nfunction escapeHtml(value: string): string {\n  return value\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\\\"/g, \"&quot;\")\n    .replace(/'/g, \"&#39;\");\n}\n"]}