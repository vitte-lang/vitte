{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../src/test/suite/index.ts"],"names":[],"mappings":";AAAA;;GAEG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBH,kBA2BC;AA9CD,gDAAkC;AAClC,kDAA0B;AAC1B,qCAAyC;AAEzC,KAAK,UAAU,gBAAgB,CAAC,IAAY;IAC1C,MAAM,OAAO,GAAG,MAAM,kBAAE,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;IAChE,MAAM,KAAK,GAAa,EAAE,CAAC;IAC3B,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE,CAAC;QAC5B,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;QAChD,IAAI,KAAK,CAAC,WAAW,EAAE,EAAE,CAAC;YACxB,MAAM,MAAM,GAAG,MAAM,gBAAgB,CAAC,QAAQ,CAAC,CAAC;YAChD,KAAK,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC;QACxB,CAAC;aAAM,IAAI,KAAK,CAAC,MAAM,EAAE,IAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC;YAC7D,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACvB,CAAC;IACH,CAAC;IACD,OAAO,KAAK,CAAC;AACf,CAAC;AAEM,KAAK,UAAU,GAAG;IACvB,MAAM,KAAK,GAAG,IAAI,eAAK,CAAC;QACtB,EAAE,EAAE,KAAK;QACT,KAAK,EAAE,IAAI;QACX,OAAO,EAAE,KAAM;KAChB,CAAC,CAAC;IAEH,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;IAC1C,MAAM,KAAK,GAAG,MAAM,gBAAgB,CAAC,SAAS,CAAC,CAAC;IAEhD,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;QACvB,OAAO,CAAC,IAAI,CAAC,6CAA6C,EAAE,SAAS,CAAC,CAAC;IACzE,CAAC;IAED,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;QACzB,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACtB,CAAC;IAED,MAAM,IAAI,OAAO,CAAO,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QAC1C,KAAK,CAAC,GAAG,CAAC,CAAC,QAAgB,EAAE,EAAE;YAC7B,IAAI,QAAQ,GAAG,CAAC,EAAE,CAAC;gBACjB,MAAM,CAAC,IAAI,KAAK,CAAC,GAAG,QAAQ,sBAAsB,CAAC,CAAC,CAAC;YACvD,CAAC;iBAAM,CAAC;gBACN,OAAO,EAAE,CAAC;YACZ,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC","sourcesContent":["/**\n * index.ts — configuration Mocha pour les tests d’intégration VS Code.\n */\n\nimport * as path from \"node:path\";\nimport Mocha from \"mocha\";\nimport { promises as fs } from \"node:fs\";\n\nasync function collectTestFiles(root: string): Promise<string[]> {\n  const entries = await fs.readdir(root, { withFileTypes: true });\n  const files: string[] = [];\n  for (const entry of entries) {\n    const fullPath = path.resolve(root, entry.name);\n    if (entry.isDirectory()) {\n      const nested = await collectTestFiles(fullPath);\n      files.push(...nested);\n    } else if (entry.isFile() && entry.name.endsWith(\".test.js\")) {\n      files.push(fullPath);\n    }\n  }\n  return files;\n}\n\nexport async function run(): Promise<void> {\n  const mocha = new Mocha({\n    ui: \"tdd\",\n    color: true,\n    timeout: 60_000,\n  });\n\n  const testsRoot = path.resolve(__dirname);\n  const files = await collectTestFiles(testsRoot);\n\n  if (files.length === 0) {\n    console.warn(\"[tests] Aucun fichier *.test.js trouvé dans\", testsRoot);\n  }\n\n  for (const file of files) {\n    mocha.addFile(file);\n  }\n\n  await new Promise<void>((resolve, reject) => {\n    mocha.run((failures: number) => {\n      if (failures > 0) {\n        reject(new Error(`${failures} test(s) ont échoué.`));\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n"]}