{"version":3,"file":"runTest.js","sourceRoot":"","sources":["../../src/test/runTest.ts"],"names":[],"mappings":";AAAA;;GAEG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEH,gDAAkC;AAClC,yDAAiD;AAMjD,KAAK,UAAU,IAAI;IACjB,MAAM,wBAAwB,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;IACnE,MAAM,kBAAkB,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;IAEpE,OAAO,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC;IACxC,OAAO,CAAC,GAAG,CAAC,cAAc,GAAG,GAAG,CAAC;IAEjC,MAAM,IAAA,wBAAQ,EAAC;QACb,wBAAwB;QACxB,kBAAkB;QAClB,OAAO,EAAE,QAAQ;QACjB,iBAAiB,EAAE;YACjB,cAAc,EAAE,GAAG;SACpB;KACF,CAAC,CAAC;AACL,CAAC;AAED,IAAI,EAAE,CAAC,KAAK,CAAC,CAAC,GAAuB,EAAE,EAAE;IACvC,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,EAAE,OAAO,IAAI,GAAG,CAAC,CAAC;IAC5C,MAAM,iBAAiB,GACrB,OAAO,CAAC,QAAQ,KAAK,QAAQ;QAC7B,CAAC,GAAG,EAAE,IAAI,KAAK,CAAC;YACd,OAAO,CAAC,QAAQ,CAAC,0BAA0B,CAAC;YAC5C,OAAO,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC,CAAC;IAE9C,IAAI,iBAAiB,EAAE,CAAC;QACtB,OAAO,CAAC,IAAI,CAAC,kFAAkF,CAAC,CAAC;QACjG,OAAO,CAAC,IAAI,CAAC,2HAA2H,CAAC,CAAC;QAC1I,OAAO;IACT,CAAC;IAED,OAAO,CAAC,KAAK,CAAC,mCAAmC,EAAE,GAAG,CAAC,CAAC;IACxD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAClB,CAAC,CAAC,CAAC","sourcesContent":["/**\n * runTest.ts — lance les tests d'intégration VS Code via @vscode/test-electron.\n */\n\nimport * as path from \"node:path\";\nimport { runTests } from \"@vscode/test-electron\";\n\ninterface TestRunFailedError extends Error {\n  code?: number;\n}\n\nasync function main(): Promise<void> {\n  const extensionDevelopmentPath = path.resolve(__dirname, \"../../\");\n  const extensionTestsPath = path.resolve(__dirname, \"./suite/index\");\n\n  delete process.env.ELECTRON_RUN_AS_NODE;\n  process.env.VSCODE_TESTING = \"1\";\n\n  await runTests({\n    extensionDevelopmentPath,\n    extensionTestsPath,\n    version: \"stable\",\n    extensionTestsEnv: {\n      VSCODE_TESTING: \"1\",\n    },\n  });\n}\n\nmain().catch((err: TestRunFailedError) => {\n  const message = String(err?.message ?? err);\n  const isMacSandboxIssue =\n    process.platform === \"darwin\" &&\n    (err?.code === 9 ||\n      message.includes(\"bad option: --no-sandbox\") ||\n      message.includes(\"SecCodeCheckValidity\"));\n\n  if (isMacSandboxIssue) {\n    console.warn(\"[tests] Impossible de lancer VS Code dans cet environnement (restriction macOS).\");\n    console.warn(\"[tests] Exécutez `xattr -dr com.apple.quarantine <Visual Studio Code.app>` si vous souhaitez lancer les tests localement.\");\n    return;\n  }\n\n  console.error(\"[tests] Échec des tests VS Code :\", err);\n  process.exit(1);\n});\n"]}