{"version":3,"file":"diagnosticsView.js","sourceRoot":"","sources":["../src/diagnosticsView.ts"],"names":[],"mappings":"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","sourcesContent":["import * as path from \"node:path\";\nimport * as vscode from \"vscode\";\n\ntype SeverityKey = 'error' | 'warning' | 'information' | 'hint';\n\n// ðŸŸ© Vitte: diagnostics view settings & helpers\ninterface VitteDiagnosticsConfig {\n  /** Allowed severities; when empty or undefined -> show all. */\n  severities?: SeverityKey[];\n  /** Debounce delay in ms for refresh. */\n  refreshDebounceMs?: number;\n}\n\nconst VALID_SEVERITY_MAP: Record<SeverityKey, true> = {\n  error: true,\n  warning: true,\n  information: true,\n  hint: true,\n};\n\nconst DEFAULT_CFG: Readonly<Required<VitteDiagnosticsConfig>> = {\n  severities: [],\n  refreshDebounceMs: 150,\n};\n\nfunction isSeverityKey(value: unknown): value is SeverityKey {\n  return typeof value === 'string' && value in VALID_SEVERITY_MAP;\n}\n\nfunction readConfig(): Required<VitteDiagnosticsConfig> {\n  const cfg = vscode.workspace.getConfiguration('vitte').get<VitteDiagnosticsConfig>('diagnostics') ?? {};\n  const severities = Array.isArray(cfg.severities)\n    ? cfg.severities.filter(isSeverityKey)\n    : [];\n  const refreshDebounceMs = typeof cfg.refreshDebounceMs === 'number'\n    ? Math.max(0, cfg.refreshDebounceMs)\n    : DEFAULT_CFG.refreshDebounceMs;\n  return {\n    severities,\n    refreshDebounceMs,\n  };\n}\n\nfunction sevToName(s?: vscode.DiagnosticSeverity): 'error' | 'warning' | 'information' | 'hint' | 'unknown' {\n  switch (s) {\n    case vscode.DiagnosticSeverity.Error: return 'error';\n    case vscode.DiagnosticSeverity.Warning: return 'warning';\n    case vscode.DiagnosticSeverity.Information: return 'information';\n    case vscode.DiagnosticSeverity.Hint: return 'hint';\n    default: return 'unknown';\n  }\n}\n\nfunction matchesFilter(s: vscode.DiagnosticSeverity | undefined, allowed: SeverityKey[]): boolean {\n  if (allowed.length === 0) return true;\n  const name = sevToName(s);\n  return name !== 'unknown' && allowed.includes(name);\n}\n\nfunction countBySeverity(list: AggregatedDiagnostic[]) {\n  let e=0, w=0, i=0, h=0;\n  for (const d of list) {\n    switch (d.diagnostic.severity) {\n      case vscode.DiagnosticSeverity.Error: e++; break;\n      case vscode.DiagnosticSeverity.Warning: w++; break;\n      case vscode.DiagnosticSeverity.Information: i++; break;\n      case vscode.DiagnosticSeverity.Hint: h++; break;\n    }\n  }\n  return { e, w, i, h };\n}\n\nfunction debounce<T extends (...args: unknown[]) => void>(fn: T, ms: number): T {\n  let tid: NodeJS.Timeout | undefined;\n  const debounced = function(this: ThisParameterType<T>, ...args: Parameters<T>) {\n    if (tid) clearTimeout(tid);\n    tid = setTimeout(() => fn.apply(this, args), ms);\n  };\n  return debounced as T;\n}\n\nconst SUPPORTED_EXTS = new Set([\".vitte\", \".vit\"]);\n\nexport interface DiagnosticsView {\n  readonly provider: DiagnosticsTreeDataProvider;\n  readonly tree: vscode.TreeView<TreeNode>;\n  refresh(): void;\n}\n\ntype TreeNode = FileNode | DiagnosticNode;\n\ninterface AggregatedDiagnostic {\n  uri: vscode.Uri;\n  diagnostic: vscode.Diagnostic;\n  index: number;\n}\n\nclass FileNode extends vscode.TreeItem {\n  constructor(\n    public readonly uri: vscode.Uri,\n    private readonly entries: AggregatedDiagnostic[],\n    collState: vscode.TreeItemCollapsibleState\n  ) {\n    super(relativeLabel(uri), collState);\n    const c = countBySeverity(entries);\n    const parts: string[] = [];\n    if (c.e) parts.push(`${c.e} erreur${c.e>1?'s':''}`);\n    if (c.w) parts.push(`${c.w} avertissement${c.w>1?'s':''}`);\n    if (c.i) parts.push(`${c.i} info${c.i>1?'s':''}`);\n    if (c.h) parts.push(`${c.h} astuce${c.h>1?'s':''}`);\n    this.description = parts.length ? parts.join(', ') : `${entries.length} ${entries.length > 1 ? 'problÃ¨mes' : 'problÃ¨me'}`;\n    this.contextValue = \"vitteDiagnosticFile\";\n    this.iconPath = vscode.ThemeIcon.File;\n  }\n\n  get children(): DiagnosticNode[] {\n    return this.entries.map(entry => new DiagnosticNode(entry));\n  }\n}\n\nclass DiagnosticNode extends vscode.TreeItem {\n  constructor(public readonly entry: AggregatedDiagnostic) {\n    super(entry.diagnostic.message, vscode.TreeItemCollapsibleState.None);\n    const pos = entry.diagnostic.range.start;\n    this.description = `L${pos.line + 1}:C${pos.character + 1}`;\n    const parts = [\n      entry.diagnostic.message,\n      `${entry.uri.fsPath}:${pos.line + 1}:${pos.character + 1}`,\n      entry.diagnostic.source ? `Source: ${entry.diagnostic.source}` : \"\"\n    ].filter(Boolean);\n    const severityName = sevToName(entry.diagnostic.severity);\n    const codeValue = entry.diagnostic.code;\n    const codeText = typeof codeValue === 'string' || typeof codeValue === 'number'\n      ? `Code: ${String(codeValue)}`\n      : undefined;\n    const extra = [severityName && `Niveau: ${severityName}`, codeText].filter(Boolean).join('\\n');\n    this.tooltip = [parts.join('\\n'), extra].filter(Boolean).join('\\n');\n    this.iconPath = iconForSeverity(entry.diagnostic.severity);\n    this.command = {\n      command: \"vitte.diagnostics.open\",\n      title: \"Ouvrir le diagnostic\",\n      arguments: [entry]\n    };\n    this.contextValue = \"vitteDiagnostic\";\n  }\n}\n\nclass DiagnosticsTreeDataProvider implements vscode.TreeDataProvider<TreeNode>, vscode.Disposable {\n  private readonly onDidChangeEmitter = new vscode.EventEmitter<TreeNode | undefined>();\n  readonly onDidChangeTreeData: vscode.Event<TreeNode | undefined> = this.onDidChangeEmitter.event;\n\n  private nodes: FileNode[] = [];\n  private cfg: Required<VitteDiagnosticsConfig> = DEFAULT_CFG;\n  private schedule = debounce(() => this.refresh(), this.cfg.refreshDebounceMs);\n\n  refresh(): void {\n    this.cfg = readConfig();\n    // rebuild nodes from diagnostics with filtering\n    this.nodes = buildFileNodes(this.cfg);\n    this.onDidChangeEmitter.fire(undefined);\n  }\n\n  refreshDebounced(): void {\n    // re-create debouncer if delay changed\n    this.schedule = debounce(() => this.refresh(), this.cfg.refreshDebounceMs);\n    this.schedule();\n  }\n\n  hasItems(): boolean {\n    return this.nodes.length > 0;\n  }\n\n  getTreeItem(element: TreeNode): vscode.TreeItem {\n    return element;\n  }\n\n  getChildren(element?: TreeNode): vscode.ProviderResult<TreeNode[]> {\n    if (!element) return this.nodes;\n    if (element instanceof FileNode) return element.children;\n    return [];\n  }\n\n  dispose(): void {\n    this.onDidChangeEmitter.dispose();\n  }\n}\n\nexport function registerDiagnosticsView(context: vscode.ExtensionContext): DiagnosticsView {\n  const provider = new DiagnosticsTreeDataProvider();\n  const tree = vscode.window.createTreeView<TreeNode>(\"vitteDiagnostics\", { treeDataProvider: provider });\n\n  const refresh = () => {\n    provider.refresh();\n    if (provider.hasItems()) {\n      tree.message = '';\n    } else {\n      tree.message = '$(pass-filled) Aucun diagnostic Vitte dÃ©tectÃ©';\n    }\n  };\n\n  const refreshDebounced = () => {\n    provider.refreshDebounced();\n    if (!provider.hasItems()) tree.message = '$(pass-filled) Aucun diagnostic Vitte dÃ©tectÃ©';\n  };\n\n  refresh();\n\n  context.subscriptions.push(\n    tree,\n    provider,\n    vscode.languages.onDidChangeDiagnostics(refreshDebounced),\n    vscode.workspace.onDidCloseTextDocument(refreshDebounced),\n    vscode.workspace.onDidOpenTextDocument(refreshDebounced),\n    vscode.workspace.onDidSaveTextDocument(refreshDebounced),\n    vscode.commands.registerCommand(\"vitte.diagnostics.refresh\", refresh),\n    vscode.commands.registerCommand(\"vitte.diagnostics.open\", async (entry: AggregatedDiagnostic) => {\n      if (!entry?.uri) return;\n      const doc = await vscode.workspace.openTextDocument(entry.uri);\n      const editor = await vscode.window.showTextDocument(doc, { preserveFocus: false, preview: true });\n      const range = entry.diagnostic.range;\n      editor.revealRange(range, vscode.TextEditorRevealType.InCenter);\n      editor.selection = new vscode.Selection(range.start, range.start);\n    }),\n    vscode.commands.registerCommand('vitte.diagnostics.copy', async (entry: AggregatedDiagnostic) => {\n      if (!entry) return;\n      const pos = entry.diagnostic.range.start;\n      const text = `${entry.uri.fsPath}:${pos.line + 1}:${pos.character + 1} â€” ${entry.diagnostic.message}`;\n      await vscode.env.clipboard.writeText(text);\n      void vscode.window.setStatusBarMessage('Diagnostic copiÃ© dans le presse-papiers', 2000);\n    }),\n  );\n\n  vscode.window.onDidChangeActiveTextEditor(refresh, undefined, context.subscriptions);\n\n  return { provider, tree, refresh };\n}\n\nfunction buildFileNodes(cfg: Required<VitteDiagnosticsConfig>): FileNode[] {\n  const entries = collectDiagnostics(cfg);\n  const byFile = new Map<string, AggregatedDiagnostic[]>();\n  for (const entry of entries) {\n    const key = entry.uri.toString();\n    const arr = byFile.get(key) ?? [];\n    arr.push(entry);\n    byFile.set(key, arr);\n  }\n\n  const perFile = Array.from(byFile.values())\n    .map(list => list.slice().sort(compareDiagnostics))\n    .filter(list => list.length > 0);\n\n  perFile.sort(compareFiles);\n\n  return perFile.map(list => {\n    const [head] = list;\n    if (!head) {\n      throw new Error('Invariant: diagnostics list is empty');\n    }\n    return new FileNode(head.uri, list, vscode.TreeItemCollapsibleState.Expanded);\n  });\n}\n\nfunction collectDiagnostics(cfg: Required<VitteDiagnosticsConfig>): AggregatedDiagnostic[] {\n  const all = vscode.languages.getDiagnostics();\n  const collected: AggregatedDiagnostic[] = [];\n  for (const [uri, diagnostics] of all) {\n    if (uri.scheme !== 'file') continue;\n    if (!SUPPORTED_EXTS.has(path.extname(uri.fsPath))) continue;\n    diagnostics.forEach((diagnostic, index) => {\n      if (!matchesFilter(diagnostic.severity, cfg.severities)) return;\n      collected.push({ uri, diagnostic, index });\n    });\n  }\n  return collected;\n}\n\nfunction compareDiagnostics(a: AggregatedDiagnostic, b: AggregatedDiagnostic): number {\n  const severityDiff = (a.diagnostic.severity ?? vscode.DiagnosticSeverity.Information) -\n    (b.diagnostic.severity ?? vscode.DiagnosticSeverity.Information);\n  if (severityDiff !== 0) return severityDiff;\n  const lineDiff = a.diagnostic.range.start.line - b.diagnostic.range.start.line;\n  if (lineDiff !== 0) return lineDiff;\n  return a.diagnostic.range.start.character - b.diagnostic.range.start.character;\n}\n\nfunction compareFiles(a: AggregatedDiagnostic[], b: AggregatedDiagnostic[]): number {\n  const uriA = a[0]?.uri;\n  const uriB = b[0]?.uri;\n  return relativeLabel(uriA).localeCompare(relativeLabel(uriB));\n}\n\nfunction relativeLabel(uri: vscode.Uri | undefined): string {\n  if (!uri) return \"\";\n  const rel = vscode.workspace.asRelativePath(uri, false);\n  return rel || uri.fsPath;\n}\n\nfunction iconForSeverity(severity: vscode.DiagnosticSeverity | undefined): vscode.ThemeIcon {\n  const makeIcon = (id: string): vscode.ThemeIcon => ({ id } as vscode.ThemeIcon);\n  switch (severity) {\n    case vscode.DiagnosticSeverity.Error:\n      return makeIcon(\"error\");\n    case vscode.DiagnosticSeverity.Warning:\n      return makeIcon(\"warning\");\n    case vscode.DiagnosticSeverity.Information:\n      return makeIcon(\"info\");\n    case vscode.DiagnosticSeverity.Hint:\n      return makeIcon(\"lightbulb\");\n    default:\n      return makeIcon(\"question\");\n  }\n}\n"]}