{"version":3,"file":"quickActions.js","sourceRoot":"","sources":["../../src/commands/quickActions.ts"],"names":[],"mappings":"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","sourcesContent":["import * as path from 'node:path';\nimport * as vscode from 'vscode';\n\ninterface QuickActionItem extends vscode.QuickPickItem {\n  readonly command: string;\n  readonly args?: unknown[] | undefined;\n}\n\ninterface QuickActionStep {\n  readonly command: string;\n  readonly args?: unknown[] | undefined;\n}\n\nexport interface QuickActionDefinition {\n  readonly label: string;\n  readonly description?: string | undefined;\n  readonly id?: string;\n  readonly command: string;\n  readonly args?: unknown[] | undefined;\n  readonly actions?: QuickActionStep[];\n  readonly when?: (ctx: QuickActionsContext) => boolean | Promise<boolean>;\n  readonly isSuggested?: (ctx: QuickActionsContext) => boolean;\n  readonly detail?: (ctx: QuickActionsContext) => string | undefined;\n  readonly highlightLastRun?: boolean;\n}\ntype Mutable<T> = { -readonly [P in keyof T]: T[P] };\n\ninterface QuickActionOverrideConfig {\n  label?: string;\n  description?: string;\n  detail?: string;\n  command?: string;\n  args?: unknown[];\n  actions?: QuickActionStep[];\n}\n\nexport interface QuickActionsContext {\n  hasBenchConfig: boolean;\n  activeIsTestFile: boolean;\n  workspaceBuilt: boolean;\n  diagnosticsLastRefresh?: number | undefined;\n  diagnosticsStale: boolean;\n  telemetryEnabled: boolean;\n  usageStats: Record<string, UsageEntry>;\n  buildProfile: string;\n  buildIncremental: boolean;\n}\n\nconst strings = {\n  noActions: () => vscode.l10n.t('Vitte: no actions available for this workspace.'),\n  placeholder: () => vscode.l10n.t('Choose a Vitte action'),\n  neverRefreshed: () => vscode.l10n.t('Never refreshed'),\n  lastRefresh: (prefix: string, relative: string) => vscode.l10n.t('{0} Last refresh: {1}', prefix, relative),\n  lastRun: (relative: string) => vscode.l10n.t('ðŸ” Last run: {0}', relative),\n  runAgain: () => vscode.l10n.t('âŸ³ Run again'),\n  usageCount: (count: number) => vscode.l10n.t('{0}Ã— run', count),\n  favoriteDetail: (detail?: string) =>\n    detail ? vscode.l10n.t('{0} â€¢ Favorite action', detail) : vscode.l10n.t('Favorite action'),\n  runError: (message: string) => vscode.l10n.t('Vitte: unable to run the selected action ({0})', message),\n};\n\nconst BUILTIN_ACTION_DEFS: QuickActionDefinition[] = [\n  {\n    id: 'build',\n    label: 'âš™ï¸ Build',\n    description: 'Compile the entire workspace (vitte.build)',\n    command: 'vitte.build',\n    isSuggested: (ctx) => !ctx.workspaceBuilt,\n    highlightLastRun: true,\n  },\n  {\n    id: 'clean',\n    label: 'ðŸ§¹ Clean',\n    description: 'Remove build outputs (vitte.clean)',\n    command: 'vitte.clean',\n  },\n  {\n    id: 'run',\n    label: 'â–¶ï¸ Run',\n    description: 'Build and run the entry point (vitte.run)',\n    command: 'vitte.run',\n    highlightLastRun: true,\n  },\n  {\n    id: 'tests',\n    label: 'ðŸ§ª Tests',\n    description: 'Execute the toolchain test suite (vitte.test)',\n    command: 'vitte.test',\n    highlightLastRun: true,\n  },\n  {\n    id: 'testFile',\n    label: 'ðŸ§ª Test file',\n    description: 'Run vitte.testCurrent for *_test.vitte files',\n    command: 'vitte.testCurrent',\n    isSuggested: (ctx) => ctx.activeIsTestFile,\n    highlightLastRun: true,\n  },\n  {\n    id: 'bench',\n    label: 'ðŸ“ˆ Bench',\n    description: 'Run vitte.bench with current settings',\n    command: 'vitte.bench',\n    when: (ctx) => ctx.hasBenchConfig,\n    highlightLastRun: true,\n  },\n  {\n    id: 'benchReport',\n    label: 'ðŸ“Š Report',\n    description: 'Run vitte.bench and open the latest report',\n    command: 'vitte.benchReport',\n    when: (ctx) => ctx.hasBenchConfig,\n  },\n  {\n    id: 'benchDir',\n    label: 'ðŸ“ Bench dir',\n    description: 'Reveal .vitte/bench or configured bench.reportDir',\n    command: 'vitte.openBenchDir',\n    when: (ctx) => ctx.hasBenchConfig,\n  },\n  {\n    id: 'diagnostics.refresh',\n    label: 'ðŸ©º Refresh',\n    description: 'Refresh the Vitte Diagnostics view',\n    command: 'vitte.diagnostics.refresh',\n    detail: (ctx) => {\n      if (!ctx.diagnosticsLastRefresh) return strings.neverRefreshed();\n      const prefix = ctx.diagnosticsStale ? 'âš ï¸' : 'â±ï¸';\n      return strings.lastRefresh(prefix, formatRelativeTime(ctx.diagnosticsLastRefresh));\n    },\n  },\n  {\n    id: 'diagnostics.next',\n    label: 'âž¡ï¸ Next issue',\n    description: 'Jump to the next diagnostic',\n    command: 'editor.action.marker.next',\n  },\n  {\n    id: 'docs',\n    label: 'ðŸ“š Docs',\n    description: 'Open the bundled docs/playground portal',\n    command: 'vitte.openDocs',\n  },\n  {\n    id: 'profile',\n    label: 'ðŸ” Profile',\n    description: 'Cycle dev â†’ test â†’ release â†’ bench (vitte.switchProfile)',\n    command: 'vitte.switchProfile',\n    detail: (ctx) => `Current profile: ${ctx.buildProfile}`,\n  },\n  {\n    id: 'incremental',\n    label: 'âš¡ Incremental',\n    description: 'Toggle vitte.build.incremental',\n    command: 'vitte.toggleIncremental',\n    detail: (ctx) => `Incremental: ${ctx.buildIncremental ? 'ON' : 'OFF'}`,\n  },\n  {\n    id: 'docs.combo',\n    label: 'ðŸ“˜ Docs+Play',\n    description: 'Open docs then launch the playground',\n    command: 'vitte.openDocs',\n    actions: [\n      { command: 'vitte.openDocs' },\n      { command: 'vitte.openPlayground' },\n    ],\n    detail: () => 'Docs & playground chain',\n  },\n  {\n    id: 'onboarding.setup',\n    label: 'ðŸš€ Setup',\n    description: 'Docs â†’ toolchain detection â†’ build for onboarding',\n    command: 'vitte.openDocs',\n    actions: [\n      { command: 'vitte.openDocs' },\n      { command: 'vitte.detectToolchain' },\n      { command: 'vitte.build' },\n    ],\n    detail: () => 'Guided: docs + tooling + build',\n  },\n];\n\nconst RECENT_STORAGE_KEY = 'vitte.quickActions.recent';\nconst PIN_STORAGE_KEY = 'vitte.quickActions.pinned';\nconst BUILD_STATE_KEY = 'vitte.quickActions.buildState';\nconst DIAGNOSTICS_REFRESH_KEY = 'vitte.quickActions.diagRefresh';\nconst USAGE_STORAGE_KEY = 'vitte.quickActions.usage';\nconst RECENT_LIMIT = 3;\nconst RECENT_TTL_MS = 30 * 24 * 60 * 60 * 1000;\nconst DIAGNOSTICS_STALE_MS = 10 * 60 * 1000;\n\nconst PIN_BUTTON: vscode.QuickInputButton = { iconPath: new vscode.ThemeIcon('star-empty'), tooltip: 'Mark as favorite' };\nconst UNPIN_BUTTON: vscode.QuickInputButton = { iconPath: new vscode.ThemeIcon('star-full'), tooltip: 'Remove from favorites' };\n\nfunction getVitteConfiguration(): vscode.WorkspaceConfiguration | undefined {\n  try {\n    return vscode.workspace.getConfiguration('vitte');\n  } catch (error) {\n    console.warn('[vitte.quickActions] Unable to read vitte configuration', error);\n    return undefined;\n  }\n}\n\nfunction getConfigValue<T>(config: vscode.WorkspaceConfiguration | undefined, section: string, fallback: T): T {\n  if (!config) return fallback;\n  try {\n    const value = config.get<T>(section);\n    return value ?? fallback;\n  } catch {\n    return fallback;\n  }\n}\n\nfunction memoizeConfiguration(): () => vscode.WorkspaceConfiguration | undefined {\n  let cached: vscode.WorkspaceConfiguration | undefined;\n  let loaded = false;\n  return () => {\n    if (loaded) return cached;\n    cached = getVitteConfiguration();\n    loaded = true;\n    return cached;\n  };\n}\n\nfunction deepCloneArgs<T extends unknown[] | undefined>(args: T): T {\n  if (args === undefined) return args;\n  const cloneFn = (globalThis as { structuredClone?: <T>(value: T) => T }).structuredClone;\n  if (typeof cloneFn === 'function') {\n    try {\n      return cloneFn(args);\n    } catch {\n      // ignore and fall through to simpler clones\n    }\n  }\n  try {\n    return JSON.parse(JSON.stringify(args)) as T;\n  } catch {\n    return [...args] as T;\n  }\n}\n\ninterface UserSequenceConfig {\n  id?: string;\n  label?: string;\n  description?: string;\n  detail?: string;\n  steps?: UserSequenceStep[];\n}\n\ninterface UserSequenceStep {\n  command?: string;\n  args?: unknown[];\n}\n\ninterface RecentCommandEntry {\n  command: string;\n  actionId?: string;\n  workspace?: string;\n  timestamp: number;\n}\n\ninterface UsageEntry {\n  count: number;\n  lastUsed: number;\n}\n\nexport function registerQuickActions(context: vscode.ExtensionContext): void {\n  const disposable = vscode.commands.registerCommand('vitte.quickActions', async () => {\n    const loadConfig = memoizeConfiguration();\n    const recentEntries = getRecentCommands(context);\n    const cfg = loadConfig();\n    const ctx = await resolveContext(context, cfg);\n    const definitions = getActionDefinitions(cfg);\n    const buildWithDefinitions = (pinned?: string) => buildItems(definitions, ctx, recentEntries, pinned);\n    let pinnedCommand = getPinnedCommand(context);\n    let items = await buildWithDefinitions(pinnedCommand);\n    if (items.length === 0) {\n      void vscode.window.showWarningMessage(strings.noActions());\n      return;\n    }\n\n    const quickPick = vscode.window.createQuickPick<QuickPickWithMeta>();\n    quickPick.items = items;\n    quickPick.matchOnDescription = true;\n    quickPick.placeholder = strings.placeholder();\n    quickPick.ignoreFocusOut = true;\n    const initialSelection = items.filter((item) => item.__isSuggested);\n    if (initialSelection.length > 0) {\n      quickPick.selectedItems = initialSelection.slice(0, 1) as readonly QuickPickWithMeta[];\n    }\n\n    quickPick.onDidTriggerItemButton(async ({ item, button }) => {\n      if (button === PIN_BUTTON) {\n        const activeSelectionId = quickPick.selectedItems[0]?.actionId ?? item.actionId;\n        pinnedCommand = item.actionId;\n        await setPinnedCommand(context, pinnedCommand);\n        items = await buildWithDefinitions(pinnedCommand);\n        updateQuickPickItems(quickPick, items, activeSelectionId);\n      } else if (button === UNPIN_BUTTON && pinnedCommand) {\n        const activeSelectionId = quickPick.selectedItems[0]?.actionId ?? item.actionId;\n        pinnedCommand = undefined;\n        await setPinnedCommand(context, undefined);\n        items = await buildWithDefinitions(pinnedCommand);\n        updateQuickPickItems(quickPick, items, activeSelectionId);\n      }\n    });\n\n    const selection = await new Promise<QuickPickWithMeta | undefined>((resolve) => {\n      quickPick.onDidAccept(() => {\n        resolve(quickPick.selectedItems[0]);\n        quickPick.hide();\n      });\n      quickPick.onDidHide(() => resolve(undefined));\n      quickPick.show();\n    });\n    quickPick.dispose();\n\n    if (!selection) return;\n    try {\n      for (const step of selection.steps) {\n        await vscode.commands.executeCommand(step.command, ...(step.args ?? []));\n      }\n      await rememberSelection(context, selection);\n      if (ctx.telemetryEnabled && !selection.__isRecent) {\n        await recordUsage(context, selection.actionId);\n      }\n    } catch (error) {\n      const message = error instanceof Error ? error.message : String(error);\n      void vscode.window.showErrorMessage(strings.runError(message));\n    }\n  });\n  context.subscriptions.push(disposable);\n\n  const exportStatsDisposable = vscode.commands.registerCommand('vitte.quickActions.exportStats', async () => {\n    const cfg = getVitteConfiguration();\n    const stats = getUsageStats(context);\n    const definitions = getActionDefinitions(cfg);\n    const actionEntries = Object.entries(stats ?? {});\n    if (actionEntries.length === 0) {\n      void vscode.window.showInformationMessage('Quick Actions: no usage data recorded yet.');\n      return;\n    }\n    const report = buildUsageReport(definitions, stats);\n    const defaultUri = buildDefaultExportUri(report);\n    const saveOptions: vscode.SaveDialogOptions = {\n      filters: { 'JSON Files': ['json'] },\n      saveLabel: 'Export Quick Action stats',\n    };\n    if (defaultUri) saveOptions.defaultUri = defaultUri;\n    const targetUri = await vscode.window.showSaveDialog(saveOptions);\n    if (!targetUri) return;\n    const encoder = new TextEncoder();\n    const payload = encoder.encode(JSON.stringify(report, null, 2));\n    await vscode.workspace.fs.writeFile(targetUri, payload);\n    void vscode.window.showInformationMessage(`Quick Actions: exported stats to ${targetUri.fsPath}`);\n  });\n  context.subscriptions.push(exportStatsDisposable);\n}\n\nexport interface QuickPickWithMeta extends QuickActionItem {\n  readonly __isSuggested: boolean;\n  readonly __isRecent: boolean;\n  readonly __isPinned: boolean;\n  readonly actionId: string;\n  readonly steps: QuickActionStep[];\n  readonly baseCommand: string;\n}\n\nasync function buildItems(\n  defs: QuickActionDefinition[],\n  ctx: QuickActionsContext,\n  recentEntries: RecentCommandEntry[],\n  pinnedCommand?: string\n): Promise<QuickPickWithMeta[]> {\n  const available: QuickPickWithMeta[] = [];\n  for (const def of defs) {\n    if (def.when) {\n      try {\n        const ok = await def.when(ctx);\n        if (!ok) continue;\n      } catch {\n        continue;\n      }\n    }\n    const actionId = def.id ?? def.command;\n    const steps = (def.actions ?? [{ command: def.command, args: def.args }]).map((step) => ({\n      command: step.command,\n      args: deepCloneArgs(step.args),\n    }));\n    const usageInfo = ctx.telemetryEnabled ? ctx.usageStats[actionId] : undefined;\n    const lastRunBadge =\n      ctx.telemetryEnabled && def.highlightLastRun && usageInfo?.lastUsed\n        ? strings.lastRun(formatRelativeTime(usageInfo.lastUsed))\n        : undefined;\n    const runAgainBadge =\n      ctx.telemetryEnabled && def.highlightLastRun && usageInfo\n        ? strings.runAgain()\n        : undefined;\n    const usageCountText = usageInfo?.count ? strings.usageCount(usageInfo.count) : undefined;\n    const detailParts = [def.detail?.(ctx), lastRunBadge, usageCountText].filter(\n      (value): value is string => typeof value === 'string'\n    );\n    const suggestedFlag = Boolean(def.isSuggested?.(ctx));\n\n    const baseItem: QuickPickWithMeta = {\n      label: def.label,\n      command: def.command,\n      args: deepCloneArgs(def.args),\n      actionId,\n      steps,\n      baseCommand: def.command,\n      __isSuggested: suggestedFlag,\n      __isRecent: false,\n      __isPinned: false,\n      buttons: [PIN_BUTTON],\n    };\n    if (def.description !== undefined || runAgainBadge) {\n      const baseDesc = def.description ?? '';\n      baseItem.description =\n        runAgainBadge && baseDesc.length > 0 ? `${baseDesc} â€” ${runAgainBadge}` : runAgainBadge ?? baseDesc;\n      if (!baseItem.description || baseItem.description.trim().length === 0) {\n        delete baseItem.description;\n      }\n    }\n    if (detailParts.length > 0) {\n      baseItem.detail = detailParts.join(' â€¢ ');\n    }\n    available.push(baseItem);\n  }\n\n  const items: QuickPickWithMeta[] = [];\n\n  if (pinnedCommand) {\n    const idx = available.findIndex((item) => item.actionId === pinnedCommand);\n    if (idx >= 0) {\n      const removed = available.splice(idx, 1);\n      const match = removed[0];\n      if (match) {\n        items.push({\n          ...match,\n          label: `â˜… ${match.label.replace(/^â˜…\\s*/u, '').replace(/^â†º\\s*/u, '')}`,\n          detail: strings.favoriteDetail(match.detail),\n          __isPinned: true,\n          __isRecent: false,\n          buttons: [UNPIN_BUTTON],\n        });\n      }\n    }\n  }\n\n  const recentItems: QuickPickWithMeta[] = [];\n  for (const entry of recentEntries) {\n    const entryId = entry.actionId ?? entry.command;\n    const idx = available.findIndex((item) => item.actionId === entryId);\n    if (idx === -1) continue;\n    const removed = available.splice(idx, 1);\n    const match = removed[0];\n    if (!match) continue;\n    const detailParts: string[] = [];\n    if (match.detail) detailParts.push(match.detail);\n    if (entry.workspace) detailParts.push(entry.workspace);\n    detailParts.push(formatRelativeTime(entry.timestamp));\n    recentItems.push({\n      ...match,\n      label: `â†º ${match.label}`,\n      detail: detailParts.join(' â€¢ '),\n      __isRecent: true,\n      __isPinned: false,\n      buttons: [PIN_BUTTON],\n    });\n  }\n\n  items.push(...recentItems, ...available);\n  return items;\n}\n\nfunction updateQuickPickItems(\n  quickPick: vscode.QuickPick<QuickPickWithMeta>,\n  items: QuickPickWithMeta[],\n  preferredActionId?: string\n): void {\n  const currentSelectionId = preferredActionId ?? quickPick.selectedItems?.[0]?.actionId;\n  const currentActiveId = quickPick.activeItems?.[0]?.actionId ?? currentSelectionId;\n  quickPick.items = items;\n  const nextSelection = currentSelectionId\n    ? items.find((candidate) => candidate.actionId === currentSelectionId)\n    : undefined;\n  const nextActive = currentActiveId ? items.find((candidate) => candidate.actionId === currentActiveId) : undefined;\n  if (nextSelection) {\n    quickPick.selectedItems = [nextSelection];\n  } else if (items.length > 0) {\n    quickPick.selectedItems = [items[0]!];\n  }\n  if (nextActive) {\n    quickPick.activeItems = [nextActive];\n  } else if (quickPick.selectedItems.length > 0) {\n    quickPick.activeItems = quickPick.selectedItems;\n  }\n}\n\nfunction getActionDefinitions(config?: vscode.WorkspaceConfiguration): QuickActionDefinition[] {\n  const cfg = config ?? getVitteConfiguration();\n  return applyQuickActionOverrides([...BUILTIN_ACTION_DEFS, ...readConfiguredSequences(cfg)], cfg);\n}\n\nasync function resolveContext(\n  extCtx: vscode.ExtensionContext,\n  config?: vscode.WorkspaceConfiguration,\n): Promise<QuickActionsContext> {\n  const active = vscode.window.activeTextEditor;\n  const activePath = active?.document?.uri?.fsPath ?? '';\n  const activeLanguage = active?.document?.languageId;\n  const isVitteLanguage = activeLanguage ? ['vitte', 'vit'].includes(activeLanguage) : false;\n  const activeIsTestFile = Boolean(isVitteLanguage && activePath && /(_test\\.vitte|\\.(vitte|vit))$/i.test(activePath));\n\n  const hasBenchConfig = await workspaceHasBenchConfig();\n\n  const workspaceBuilt = hasWorkspaceBeenBuilt(extCtx);\n  const diagnosticsState = getDiagnosticsRefreshState(extCtx);\n  const cfg = config ?? getVitteConfiguration();\n  const telemetryEnabled = Boolean(getConfigValue(cfg, 'telemetry.enabled', false));\n  const buildProfile = getConfigValue(cfg, 'build.profile', 'dev').toLowerCase();\n  const buildIncremental = Boolean(getConfigValue(cfg, 'build.incremental', false));\n  const usageStats: Record<string, UsageEntry> = telemetryEnabled ? getUsageStats(extCtx) : createEmptyUsageStats();\n\n  return {\n    hasBenchConfig,\n    activeIsTestFile,\n    workspaceBuilt,\n    diagnosticsLastRefresh: diagnosticsState.lastRefresh,\n    diagnosticsStale: diagnosticsState.stale,\n    telemetryEnabled,\n    usageStats,\n    buildProfile,\n    buildIncremental,\n  };\n}\n\nasync function workspaceHasBenchConfig(): Promise<boolean> {\n  const folders = vscode.workspace.workspaceFolders;\n  if (!folders || folders.length === 0) return false;\n\n  try {\n    const files = await vscode.workspace.findFiles('vitte.config.json', '**/node_modules/**', 1);\n    if (files.length > 0) return true;\n\n    // fallback: check hidden folder `.vitte/config.json`\n    for (const folder of folders) {\n      const candidate = vscode.Uri.file(path.join(folder.uri.fsPath, '.vitte', 'config.json'));\n      try {\n        await vscode.workspace.fs.stat(candidate);\n        return true;\n      } catch {\n        // ignore\n      }\n    }\n  } catch {\n    // ignore lookup errors\n  }\n\n  return false;\n}\n\nfunction readConfiguredSequences(config?: vscode.WorkspaceConfiguration): QuickActionDefinition[] {\n  const cfg = config ?? getVitteConfiguration();\n  const raw = cfg?.get<unknown>('quickActions.sequences');\n  if (!Array.isArray(raw)) return [];\n\n  const defs: QuickActionDefinition[] = [];\n  raw.forEach((entry, index) => {\n    if (!entry || typeof entry !== 'object') return;\n    const data = entry as UserSequenceConfig;\n    const label = typeof data.label === 'string' ? data.label.trim() : '';\n    if (!label) return;\n    const rawSteps = Array.isArray(data.steps) ? data.steps : [];\n    const steps: QuickActionStep[] = [];\n    for (const step of rawSteps) {\n      if (!step || typeof step !== 'object') continue;\n      const cmd = typeof step.command === 'string' ? step.command.trim() : '';\n      if (!cmd) continue;\n      const args = Array.isArray(step.args) ? deepCloneArgs(step.args) : undefined;\n      steps.push({ command: cmd, args });\n    }\n    if (steps.length === 0) return;\n    const firstStep = steps[0];\n    if (!firstStep) return;\n    const actionId =\n      typeof data.id === 'string' && data.id.trim().length > 0\n        ? data.id.trim()\n        : `custom.sequence.${index}`;\n    const description = typeof data.description === 'string' ? data.description : undefined;\n    const detailText =\n      typeof data.detail === 'string' && data.detail.trim().length > 0\n        ? data.detail\n        : `Steps: ${steps.map((s) => summarizeCommandLabel(s.command)).join(' â†’ ')}`;\n    defs.push({\n      id: actionId,\n      label,\n      description,\n      command: firstStep.command,\n      actions: steps,\n      detail: () => detailText,\n    });\n  });\n  return defs;\n}\n\nfunction readQuickActionOverrides(config?: vscode.WorkspaceConfiguration): Record<string, QuickActionOverrideConfig> {\n  const cfg = config ?? getVitteConfiguration();\n  const raw = cfg?.get<unknown>('quickActions.defaults');\n  if (!raw || typeof raw !== 'object' || Array.isArray(raw)) {\n    return {};\n  }\n  const overrides: Record<string, QuickActionOverrideConfig> = {};\n  for (const [id, value] of Object.entries(raw)) {\n    if (!value || typeof value !== 'object') continue;\n    const data = value as QuickActionOverrideConfig;\n    const sanitized: QuickActionOverrideConfig = {};\n    if (typeof data.label === 'string' && data.label.trim().length > 0) sanitized.label = data.label.trim();\n    if (typeof data.description === 'string' && data.description.trim().length > 0) {\n      sanitized.description = data.description;\n    }\n    if (typeof data.detail === 'string' && data.detail.trim().length > 0) {\n      sanitized.detail = data.detail;\n    }\n    if (typeof data.command === 'string' && data.command.trim().length > 0) {\n      sanitized.command = data.command.trim();\n    }\n    if (Array.isArray(data.args)) {\n      sanitized.args = deepCloneArgs(data.args);\n    }\n    if (Array.isArray(data.actions)) {\n      const steps: QuickActionStep[] = [];\n      for (const step of data.actions) {\n        if (!step || typeof step !== 'object') continue;\n        const cmd = typeof step.command === 'string' ? step.command.trim() : '';\n        if (!cmd) continue;\n        const args = Array.isArray(step.args) ? deepCloneArgs(step.args) : undefined;\n        steps.push({ command: cmd, args });\n      }\n      if (steps.length > 0) {\n        sanitized.actions = steps;\n      }\n    }\n    if (Object.keys(sanitized).length > 0) {\n      overrides[id] = sanitized;\n    }\n  }\n  return overrides;\n}\n\nfunction applyQuickActionOverrides(\n  defs: QuickActionDefinition[],\n  config?: vscode.WorkspaceConfiguration,\n): QuickActionDefinition[] {\n  const overrides = readQuickActionOverrides(config);\n  if (Object.keys(overrides).length === 0) {\n    return defs;\n  }\n  return defs.map((def) => {\n    if (!def.id) return def;\n    const override = overrides[def.id];\n    if (!override) return def;\n    const next: Mutable<QuickActionDefinition> = { ...def };\n    if (override.label !== undefined) next.label = override.label;\n    if (override.description !== undefined) next.description = override.description;\n    if (override.detail !== undefined) {\n      const detailText = override.detail;\n      next.detail = detailText ? () => detailText : () => \"\";\n    }\n    if (override.command !== undefined) next.command = override.command;\n    if (override.args !== undefined) next.args = deepCloneArgs(override.args);\n    if (override.actions) {\n      next.actions = override.actions.map((step) => ({\n        ...step,\n        args: deepCloneArgs(step.args),\n      }));\n    }\n    return next;\n  });\n}\n\nfunction getRecentCommands(context: vscode.ExtensionContext): RecentCommandEntry[] {\n  const stored = context.globalState.get<RecentCommandEntry[] | string[]>(RECENT_STORAGE_KEY, []);\n  if (stored.length === 0) return [];\n  // Migration: older versions stored plain command strings\n  if (typeof stored[0] === 'string') {\n    const migrated = (stored as string[]).map((command) => ({\n      command,\n      timestamp: Date.now(),\n    }));\n    void context.globalState.update(RECENT_STORAGE_KEY, migrated);\n    return migrated;\n  }\n  const now = Date.now();\n  const entries = (stored as RecentCommandEntry[]).filter((entry) => isRecentEntry(entry, now));\n  if (entries.length !== stored.length) {\n    void context.globalState.update(RECENT_STORAGE_KEY, entries);\n  }\n  return entries;\n}\n\nfunction getPinnedCommand(context: vscode.ExtensionContext): string | undefined {\n  return context.globalState.get<string>(PIN_STORAGE_KEY);\n}\n\nasync function setPinnedCommand(context: vscode.ExtensionContext, command: string | undefined): Promise<void> {\n  await context.globalState.update(PIN_STORAGE_KEY, command);\n}\n\nasync function rememberSelection(context: vscode.ExtensionContext, selection: QuickPickWithMeta): Promise<void> {\n  const now = Date.now();\n  const workspace = vscode.workspace.workspaceFolders?.[0]?.name;\n  const current = getRecentCommands(context).filter((entry) => isRecentEntry(entry, now));\n  const next = [\n    {\n      command: selection.baseCommand,\n      actionId: selection.actionId,\n      workspace,\n      timestamp: now,\n    },\n    ...current.filter((entry) => (entry.actionId ?? entry.command) !== selection.actionId),\n  ].slice(0, RECENT_LIMIT);\n  await context.globalState.update(RECENT_STORAGE_KEY, next);\n\n  const containsBuild = selection.steps.some((step) => step.command === 'vitte.build');\n  const containsDiagRefresh = selection.steps.some((step) => step.command === 'vitte.diagnostics.refresh');\n  if (containsBuild) await markWorkspaceBuilt(context);\n  if (containsDiagRefresh) await markDiagnosticsRefreshed(context);\n}\n\nfunction isRecentEntry(entry: RecentCommandEntry, now: number): boolean {\n  const timestamp = typeof entry.timestamp === 'number' ? entry.timestamp : now;\n  return now - timestamp <= RECENT_TTL_MS;\n}\n\nfunction formatRelativeTime(epochMs: number): string {\n  const diff = Date.now() - epochMs;\n  if (diff < 0) return 'just now';\n  const sec = Math.floor(diff / 1000);\n  if (sec < 60) return sec <= 1 ? '1s ago' : `${sec}s ago`;\n  const min = Math.floor(sec / 60);\n  if (min < 60) return min === 1 ? '1 min ago' : `${min} min ago`;\n  const hours = Math.floor(min / 60);\n  if (hours < 24) return hours === 1 ? '1 h ago' : `${hours} h ago`;\n  const days = Math.floor(hours / 24);\n  return days === 1 ? '1 day ago' : `${days} days ago`;\n}\n\nfunction getWorkspaceId(): string | undefined {\n  const folder = vscode.workspace.workspaceFolders?.[0];\n  return folder?.uri.fsPath;\n}\n\nfunction hasWorkspaceBeenBuilt(context: vscode.ExtensionContext): boolean {\n  const workspaceId = getWorkspaceId();\n  if (!workspaceId) return false;\n  const map = context.globalState.get<Record<string, number>>(BUILD_STATE_KEY, {});\n  return Boolean(map[workspaceId]);\n}\n\nasync function markWorkspaceBuilt(context: vscode.ExtensionContext): Promise<void> {\n  const workspaceId = getWorkspaceId();\n  if (!workspaceId) return;\n  const map = { ...context.globalState.get<Record<string, number>>(BUILD_STATE_KEY, {}) };\n  map[workspaceId] = Date.now();\n  await context.globalState.update(BUILD_STATE_KEY, map);\n}\n\nfunction getDiagnosticsRefreshState(context: vscode.ExtensionContext): { lastRefresh?: number; stale: boolean } {\n  const workspaceId = getWorkspaceId();\n  if (!workspaceId) return { stale: true };\n  const map = context.globalState.get<Record<string, number>>(DIAGNOSTICS_REFRESH_KEY, {});\n  const ts = map[workspaceId];\n  if (!ts) return { stale: true };\n  return { lastRefresh: ts, stale: Date.now() - ts > DIAGNOSTICS_STALE_MS };\n}\n\nasync function markDiagnosticsRefreshed(context: vscode.ExtensionContext): Promise<void> {\n  const workspaceId = getWorkspaceId();\n  if (!workspaceId) return;\n  const map = { ...context.globalState.get<Record<string, number>>(DIAGNOSTICS_REFRESH_KEY, {}) };\n  map[workspaceId] = Date.now();\n  await context.globalState.update(DIAGNOSTICS_REFRESH_KEY, map);\n}\n\nfunction getUsageStats(context: vscode.ExtensionContext): Record<string, UsageEntry> {\n  return context.globalState.get<Record<string, UsageEntry>>(USAGE_STORAGE_KEY, {});\n}\n\nasync function recordUsage(context: vscode.ExtensionContext, actionId: string): Promise<void> {\n  const map = { ...getUsageStats(context) };\n  const entry = map[actionId] ?? { count: 0, lastUsed: 0 };\n  map[actionId] = { count: entry.count + 1, lastUsed: Date.now() };\n  await context.globalState.update(USAGE_STORAGE_KEY, map);\n}\n\nfunction createEmptyUsageStats(): Record<string, UsageEntry> {\n  return {};\n}\n\nfunction summarizeCommandLabel(command: string): string {\n  if (command.startsWith('vitte.')) {\n    return command.slice('vitte.'.length);\n  }\n  if (command.startsWith('workbench.action.')) {\n    return command.slice('workbench.action.'.length);\n  }\n  return command;\n}\n\nfunction buildUsageReport(\n  defs: QuickActionDefinition[],\n  stats: Record<string, UsageEntry>,\n): { exportedAt: string; actions: { id: string; label: string; totalRuns: number; lastUsed?: string; commands: string[] }[]; totalActions: number } {\n  const map = new Map<string, QuickActionDefinition>();\n  for (const def of defs) {\n    map.set(def.id ?? def.command, def);\n  }\n  const actions = Object.entries(stats).map(([id, entry]) => {\n    const def = map.get(id);\n    const commands = def?.actions?.map((step) => step.command) ?? (def?.command ? [def.command] : []);\n    const record: { id: string; label: string; totalRuns: number; commands: string[]; lastUsed?: string } = {\n      id,\n      label: def?.label ?? id,\n      totalRuns: entry.count,\n      commands,\n    };\n    if (entry.lastUsed) {\n      record.lastUsed = new Date(entry.lastUsed).toISOString();\n    }\n    return record;\n  });\n  actions.sort((a, b) => b.totalRuns - a.totalRuns);\n  return {\n    exportedAt: new Date().toISOString(),\n    totalActions: actions.length,\n    actions,\n  };\n}\n\nfunction buildDefaultExportUri(report: { exportedAt: string }): vscode.Uri | undefined {\n  const fileName = `vitte-quick-actions-stats-${report.exportedAt.replace(/[:.]/g, '-')}.json`;\n  const root = vscode.workspace.workspaceFolders?.[0]?.uri;\n  if (root) {\n    const joined = root.with({ path: path.posix.join(root.path, fileName) });\n    return joined;\n  }\n  if (typeof process?.env?.HOME === 'string' && process.env.HOME.length > 0) {\n    return vscode.Uri.file(path.join(process.env.HOME, fileName));\n  }\n  return undefined;\n}\n\n// Exposed for unit tests\nexport const __test = {\n  readConfiguredSequences,\n  readQuickActionOverrides,\n  applyQuickActionOverrides,\n  buildItems,\n  updateQuickPickItems,\n};\n"]}