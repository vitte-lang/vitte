{"version":3,"file":"extension.js","sourceRoot":"","sources":["../src/extension.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * extension.ts â€” VS Code client for Vitte/Vit\n * - Full LSP client (start/stop/restart, traces, status, watchers)\n * - Commands: logs, restart, actions (format/organize/fix), rename, debug demos\n * - Progress UI, output channel, status bar, config-sync, file watcher\n * - Hardened: no-op when no editor, consistent error handling, strict types\n */\n\nimport * as path from \"node:path\";\nimport * as fs from \"node:fs\";\nimport * as os from \"node:os\";\nimport * as vscode from \"vscode\";\nimport { registerDiagnosticsView } from \"./diagnosticsView\";\nimport { registerModuleExplorerView } from \"./moduleExplorerView\";\nimport { PlaygroundPanel } from \"./providers/playgroundPanel\";\nimport { registerOfflineView } from \"./providers/offlineView\";\nimport { registerBuildTasks } from \"./tasks/buildTasks\";\nimport { registerBenchTasks } from \"./tasks/benchTasks\";\nimport { registerRuntimeLocatorCommand } from \"./debug/runtimeLocator\";\nimport { registerDebugFactory } from \"./debug/adapterFactory\";\nimport { registerDebugConfigurationProvider } from \"./debug/configurationProvider\";\nimport { registerTelemetry } from \"./utils/telemetry\";\nimport { registerQuickActions } from \"./commands/quickActions\";\nimport { registerMetricsView } from \"./providers/metricsView\";\nimport { registerDocumentationView } from \"./providers/documentationView\";\nimport { registerDocsChaptersView } from \"./providers/docsChaptersView\";\nimport {\n  LanguageClient,\n  TransportKind,\n  RevealOutputChannelOn,\n  State as ClientState,\n} from \"vscode-languageclient/node\";\nimport type {\n  LanguageClientOptions,\n  ServerOptions,\n  DocumentSelector,\n  ProvideDocumentFormattingEditsSignature,\n} from \"vscode-languageclient/node\";\nimport {\n  summarizeWorkspaceDiagnostics,\n  diagnosticsLevel,\n  formatDiagnosticsSummary,\n} from \"./utils/diagnostics\";\nimport type { ServerMetricEntry } from \"./types/metrics\";\n\nlet client: LanguageClient | undefined;\nlet output: vscode.OutputChannel;\nlet statusItem: vscode.StatusBarItem;\n\nlet statusBaseIcon = \"$(rocket)\";\nconst STATUS_LABEL = \"Vitte\";\nlet statusLanguageSuffix = \"\";\nlet statusBaseTooltip = \"Vitte Language Server\";\nlet statusHealthIcon = \"\";\nlet statusHealthTooltip = \"\";\nlet statusOverrideText: string | undefined;\nlet statusOverrideTooltip: string | undefined;\nlet offlineReason: string | undefined;\nlet offlineBannerShown = false;\nconst recentStops: number[] = [];\nconst OFFLINE_STATUS_COLOR = new vscode.ThemeColor(\"statusBarItem.warningForeground\");\nconst OFFLINE_STATUS_BG = new vscode.ThemeColor(\"statusBarItem.warningBackground\");\nlet offlineRetryTimer: NodeJS.Timeout | undefined;\nlet offlineRetryMs = 60000;\nlet lastActivationContext: vscode.ExtensionContext | undefined;\nlet editorLintCollection: vscode.DiagnosticCollection | undefined;\nlet offlineSince: number | undefined;\nlet documentationViewsRegistered = false;\nlet documentationViewsRegistrationError: string | undefined;\n\ninterface ExtensionManifest {\n  version?: string;\n}\n\nfunction getExtensionVersion(ext: vscode.Extension<unknown> | undefined): string {\n  const manifest: unknown = ext?.packageJSON;\n  if (!manifest || typeof manifest !== \"object\") return \"unknown\";\n  const version = (manifest as ExtensionManifest).version;\n  return typeof version === \"string\" && version.length > 0 ? version : \"unknown\";\n}\n\nexport interface ExtensionApi {\n  getStatusText(): string;\n  getStatusTooltip(): string;\n  getClientState(): ClientState | undefined;\n  runAction(action: string): Promise<void>;\n  restart(): Promise<void>;\n  resolveServerModuleForTest(ctx: Pick<vscode.ExtensionContext, \"asAbsolutePath\">): string;\n}\n\nconst LANGUAGES = [\"vitte\", \"vit\"] as const;\nconst WATCH_PATTERNS = [\n  \"**/*.{vitte,vit}\",\n  \"**/vitte.toml\",\n  \"**/.vitteconfig\"\n] as const;\nconst LANGUAGE_SET = new Set<string>(LANGUAGES);\n\ninterface CommandMenuEntry {\n  label: string;\n  description?: string;\n  detail?: string;\n  command: string;\n}\n\ninterface CommandMenuItem extends vscode.QuickPickItem {\n  command: string;\n}\n\ninterface CommandShortcutConfig {\n  label: string;\n  command: string;\n  icon?: string;\n  tooltip?: string;\n  statusBar?: boolean;\n  startup?: boolean;\n}\n\ninterface CommandMessageItem extends vscode.MessageItem {\n  command?: string;\n}\n\nconst DEFAULT_COMMAND_SHORTCUTS: readonly CommandShortcutConfig[] = [\n  { label: \"Build\", command: \"vitte.build\", icon: \"$(tools)\", tooltip: \"Build the workspace (vitte.build)\", statusBar: true, startup: true },\n  { label: \"Run\", command: \"vitte.run\", icon: \"$(debug-start)\", tooltip: \"Build and run the entry point (vitte.run)\", statusBar: true, startup: true },\n  { label: \"Test\", command: \"vitte.test\", icon: \"$(beaker)\", tooltip: \"Execute the test suite (vitte.test)\", statusBar: true, startup: true },\n] as const;\n\nconst COMMAND_MENU_ENTRIES: readonly CommandMenuEntry[] = [\n  { label: \"Clean workspace\", description: \"Remove build outputs\", command: \"vitte.clean\" },\n  { label: \"Bench workspace\", description: \"Run vitte.bench\", command: \"vitte.bench\" },\n  { label: \"Open bench report\", description: \"Latest bench report\", command: \"vitte.benchReport\" },\n  { label: \"Diagnostics â–¸ Refresh\", description: \"Re-scan diagnostics\", command: \"vitte.diagnostics.refresh\" },\n  { label: \"Diagnostics â–¸ Next issue\", description: \"Jump to next diagnostic\", command: \"editor.action.marker.next\" },\n  { label: \"Documentation\", description: \"Open vitte.netlify.app\", command: \"vitte.openDocs\", detail: \"Online docs, auto-updated from website\" },\n  { label: \"Quick Actions\", description: \"Interactive menu\", command: \"vitte.quickActions\" },\n  { label: \"Server log\", description: \"Open log output\", command: \"vitte.showServerLog\" },\n  { label: \"Server metrics\", description: \"Show performance snapshot\", command: \"vitte.showServerMetrics\" },\n  { label: \"Detect toolchain\", description: \"Scan for Vitte runtimes\", command: \"vitte.detectToolchain\" },\n];\n\nlet fileWatchers: vscode.FileSystemWatcher[] = [];\nlet commandButtonItems: vscode.StatusBarItem[] = [];\nlet commandMenuButton: vscode.StatusBarItem | undefined;\nconst DIAGNOSTICS_REFRESH_KEY = \"vitte.quickActions.diagRefresh\";\n\nfunction logServerResolution(message: string): void {\n  const text = `[vitte] ${message}`;\n  output?.appendLine(text);\n}\n\nfunction readCommandShortcuts(): CommandShortcutConfig[] {\n  const cfg = vscode.workspace.getConfiguration(\"vitte\");\n  const raw = cfg.get<unknown>(\"commandShortcuts\");\n  if (!Array.isArray(raw)) {\n    return DEFAULT_COMMAND_SHORTCUTS.map((item) => ({ ...item }));\n  }\n  const sanitized: CommandShortcutConfig[] = [];\n  for (const entry of raw) {\n    if (!entry || typeof entry !== \"object\") continue;\n    const data = entry as Partial<CommandShortcutConfig>;\n    const label = typeof data.label === \"string\" && data.label.trim().length > 0 ? data.label.trim() : undefined;\n    const command = typeof data.command === \"string\" && data.command.trim().length > 0 ? data.command.trim() : undefined;\n    if (!label || !command) continue;\n    const shortcut: CommandShortcutConfig = { label, command };\n    const icon = typeof data.icon === \"string\" && data.icon.trim().length > 0 ? data.icon.trim() : undefined;\n    if (icon) shortcut.icon = icon;\n    const tooltip = typeof data.tooltip === \"string\" && data.tooltip.trim().length > 0 ? data.tooltip : undefined;\n    if (tooltip) shortcut.tooltip = tooltip;\n    if (typeof data.statusBar === \"boolean\") shortcut.statusBar = data.statusBar;\n    if (typeof data.startup === \"boolean\") shortcut.startup = data.startup;\n    sanitized.push(shortcut);\n  }\n  return sanitized.length > 0 ? sanitized : DEFAULT_COMMAND_SHORTCUTS.map((item) => ({ ...item }));\n}\n\nfunction getWorkspaceId(): string | undefined {\n  return vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\n}\n\nfunction readDiagnosticsRefreshState(context: vscode.ExtensionContext): { lastRefresh?: number; stale: boolean } {\n  const workspaceId = getWorkspaceId();\n  if (!workspaceId) return { stale: true };\n  const map = context.globalState.get<Record<string, number>>(DIAGNOSTICS_REFRESH_KEY, {});\n  const ts = map[workspaceId];\n  if (!ts) return { stale: true };\n  const stale = Date.now() - ts > 10 * 60 * 1000;\n  return { lastRefresh: ts, stale };\n}\n\nfunction labelForCommand(command: string): string {\n  switch (command) {\n    case \"vitte.build\": return \"Build\";\n    case \"vitte.run\": return \"Run\";\n    case \"vitte.test\": return \"Run Tests\";\n    case \"vitte.diagnostics.refresh\": return \"Refresh Diagnostics\";\n    default: return command.replace(/^vitte\\./, \"\");\n  }\n}\n\nfunction applyStatusBar(): void {\n  if (!statusItem) return;\n  let text: string;\n  let tooltipParts: string[];\n\n  if (statusOverrideText !== undefined) {\n    text = statusOverrideText;\n    tooltipParts = [statusOverrideTooltip ?? statusBaseTooltip];\n  } else {\n    const suffix = statusLanguageSuffix ? ` (${statusLanguageSuffix})` : \"\";\n    text = `${statusBaseIcon} ${STATUS_LABEL}${suffix}`;\n    tooltipParts = [statusBaseTooltip];\n    if (statusOverrideTooltip) {\n      tooltipParts.push(statusOverrideTooltip);\n    }\n  }\n\n  if (statusHealthIcon) {\n    text = `${text} ${statusHealthIcon}`;\n  }\n\n  if (statusHealthTooltip) {\n    tooltipParts.push(statusHealthTooltip);\n  }\n\n  statusItem.text = text;\n  statusItem.tooltip = tooltipParts.filter(Boolean).join(\"\\n\");\n  statusItem.accessibilityInformation = {\n    label: text.replace(/\\$\\([^)]+\\)/g, \"\").trim(),\n    role: \"status\"\n  };\n  if (offlineReason) {\n    statusItem.color = OFFLINE_STATUS_COLOR;\n    statusItem.backgroundColor = OFFLINE_STATUS_BG;\n  } else {\n    statusItem.color = undefined;\n    statusItem.backgroundColor = undefined;\n  }\n}\n\nfunction setStatusBase(icon: string, tooltip: string): void {\n  statusBaseIcon = icon;\n  statusBaseTooltip = tooltip;\n  statusOverrideText = undefined;\n  statusOverrideTooltip = undefined;\n  applyStatusBar();\n}\n\nfunction setStatusLanguageSuffix(lang?: string): void {\n  statusLanguageSuffix = lang ?? \"\";\n  applyStatusBar();\n}\n\nfunction setStatusOverride(text?: string, tooltip?: string): void {\n  statusOverrideText = text;\n  statusOverrideTooltip = tooltip;\n  applyStatusBar();\n}\n\nfunction isOfflineEnabled(): boolean {\n  return vscode.workspace.getConfiguration(\"vitte\").get<boolean>(\"server.offline\", false);\n}\n\nfunction isOfflinePermanent(): boolean {\n  return vscode.workspace.getConfiguration(\"vitte\").get<boolean>(\"server.offlinePermanent\", false);\n}\n\nfunction isOfflineEffective(): boolean {\n  return isOfflineEnabled() || isOfflinePermanent();\n}\n\nfunction setOfflineStatus(reason: string): void {\n  offlineReason = reason;\n  offlineSince = offlineSince ?? Date.now();\n  setStatusBase(\"$(circle-slash)\", \"Vitte LSP: offline\");\n  const forced = isOfflinePermanent() ? \"Offline permanent (user-forced)\" : \"Offline\";\n  const since = offlineSince ? ` since ${new Date(offlineSince).toLocaleTimeString()}` : \"\";\n  setStatusOverride(`$(circle-slash) Vitte ${forced.toUpperCase()}`, `${reason}${since}`);\n  void setServerOnlineContext(false);\n  logOfflineReason(reason);\n  void showOfflineBanner(reason);\n  scheduleOfflineRetry();\n  void vscode.commands.executeCommand(\"vitte.offline.refresh\");\n}\n\nasync function setServerOnlineContext(online: boolean): Promise<void> {\n  try { await vscode.commands.executeCommand(\"setContext\", \"vitte.serverOnline\", online); } catch { /* noop */ }\n  try { await vscode.commands.executeCommand(\"setContext\", \"vitte.serverOffline\", !online); } catch { /* noop */ }\n}\n\nfunction logOfflineReason(reason: string): void {\n  try { output.appendLine(`[offline] ${reason}`); } catch { /* noop */ }\n  void appendOfflineLog(reason);\n}\n\nasync function showOfflineBanner(reason: string): Promise<void> {\n  if (offlineBannerShown) return;\n  const mute = vscode.workspace.getConfiguration(\"vitte\").get<boolean>(\"server.offlineMuteBanner\", false);\n  if (mute) return;\n  offlineBannerShown = true;\n  const selection = await vscode.window.showWarningMessage(\n    `Vitte server offline: ${reason}`,\n    \"Explain Offline\",\n    \"Open Settings\"\n  );\n  if (selection === \"Explain Offline\") {\n    await vscode.commands.executeCommand(\"vitte.offline.explain\");\n  } else if (selection === \"Open Settings\") {\n    void vscode.commands.executeCommand(\"workbench.action.openSettings\", \"vitte.server\");\n  }\n}\n\nasync function setOfflineMode(enabled: boolean, reason?: string): Promise<void> {\n  const config = vscode.workspace.getConfiguration(\"vitte\");\n  const hasWorkspace = Boolean(vscode.workspace.workspaceFolders?.length);\n  const target = hasWorkspace ? vscode.ConfigurationTarget.Workspace : vscode.ConfigurationTarget.Global;\n  await config.update(\"server.offline\", enabled, target);\n  if (enabled) {\n    setOfflineStatus(reason ?? \"Offline mode enabled.\");\n  } else {\n    offlineReason = undefined;\n    offlineBannerShown = false;\n    offlineSince = undefined;\n    cancelOfflineRetry();\n    statusItem.color = undefined;\n    statusItem.backgroundColor = undefined;\n    setStatusBase(\"$(rocket)\", \"Vitte Language Server\");\n    await setServerOnlineContext(true);\n  }\n}\n\nfunction scheduleOfflineRetry(): void {\n  if (isOfflineEffective()) return;\n  const cfg = vscode.workspace.getConfiguration(\"vitte\");\n  const enabled = cfg.get<boolean>(\"server.autoRetry\", true);\n  if (!enabled) return;\n  const base = clampNumber(cfg.get<number>(\"server.autoRetryBaseMs\", 60000), 10000, 300000, 60000);\n  const max = clampNumber(cfg.get<number>(\"server.autoRetryMaxMs\", 300000), base, 900000, 300000);\n  if (!offlineRetryTimer) {\n    offlineRetryMs = Math.max(base, offlineRetryMs);\n    offlineRetryMs = Math.min(offlineRetryMs, max);\n    offlineRetryTimer = setTimeout(() => {\n      offlineRetryTimer = undefined;\n      void (async () => {\n        try {\n          const ok = await restartClient(lastActivationContext ?? undefined);\n          if (ok) {\n            offlineRetryMs = base;\n            cancelOfflineRetry();\n            return;\n          }\n          throw new Error(\"restart failed\");\n        } catch {\n          offlineRetryMs = Math.min(offlineRetryMs * 2, max);\n          scheduleOfflineRetry();\n        }\n      })();\n    }, offlineRetryMs);\n  }\n}\n\nfunction cancelOfflineRetry(): void {\n  if (offlineRetryTimer) clearTimeout(offlineRetryTimer);\n  offlineRetryTimer = undefined;\n  offlineRetryMs = 60000;\n}\n\nasync function appendOfflineLog(reason: string): Promise<void> {\n  try {\n    const folder = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\n    const base = folder ?? os.tmpdir();\n    const dir = path.join(base, \".vitte\");\n    await fs.promises.mkdir(dir, { recursive: true });\n    const file = path.join(dir, \"offline.log\");\n    const line = `${new Date().toISOString()} ${reason}\\n`;\n    await fs.promises.appendFile(file, line, \"utf8\");\n  } catch { /* noop */ }\n}\n\nfunction clampNumber(value: number, min: number, max: number, fallback: number): number {\n  if (!Number.isFinite(value)) return fallback;\n  return Math.min(max, Math.max(min, value));\n}\n\nfunction refreshDiagnosticsStatus(): void {\n  const summary = summarizeWorkspaceDiagnostics();\n  const level = diagnosticsLevel(summary);\n  switch (level) {\n    case \"error\":\n      statusHealthIcon = \"$(error)\";\n      break;\n    case \"warning\":\n      statusHealthIcon = \"$(warning)\";\n      break;\n    default:\n      statusHealthIcon = \"$(pass-filled)\";\n  }\n  statusHealthTooltip = formatDiagnosticsSummary(summary);\n  applyStatusBar();\n}\n\nfunction ensureFileWatchers(context: vscode.ExtensionContext): vscode.FileSystemWatcher[] {\n  if (fileWatchers.length === 0) {\n    fileWatchers = WATCH_PATTERNS.map((pattern) => {\n      const watcher = vscode.workspace.createFileSystemWatcher(pattern);\n      context.subscriptions.push(watcher);\n      return watcher;\n    });\n  }\n  return fileWatchers;\n}\n\nfunction updateCommandButtons(context: vscode.ExtensionContext): void {\n  for (const item of commandButtonItems) {\n    try { item.dispose(); } catch { /* noop */ }\n  }\n  commandButtonItems = [];\n  if (commandMenuButton) {\n    try { commandMenuButton.dispose(); } catch { /* noop */ }\n    commandMenuButton = undefined;\n  }\n  const shortcuts = readCommandShortcuts();\n  const visible = shortcuts.filter((entry) => entry.statusBar !== false);\n  let priority = 1000;\n  for (const shortcut of visible) {\n    const icon = shortcut.icon ?? \"$(rocket)\";\n    const item = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left, priority--);\n    item.text = `${icon} ${shortcut.label}`;\n    item.command = shortcut.command;\n    item.tooltip = shortcut.tooltip ?? shortcut.command;\n    item.name = `Vitte ${shortcut.label}`;\n    item.accessibilityInformation = { label: `${shortcut.label} button`, role: \"button\" };\n    item.show();\n    commandButtonItems.push(item);\n    context.subscriptions.push(item);\n  }\n  commandMenuButton = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left, priority--);\n  commandMenuButton.text = \"$(list-selection) Vitte\";\n  commandMenuButton.command = \"vitte.showCommandMenu\";\n  commandMenuButton.tooltip = \"Show additional Vitte commands\";\n  commandMenuButton.name = \"Vitte Command Menu\";\n  commandMenuButton.accessibilityInformation = { label: \"Vitte command menu\", role: \"button\" };\n  commandMenuButton.show();\n  context.subscriptions.push(commandMenuButton);\n}\n\nasync function showStartupCommandPrompt(context: vscode.ExtensionContext): Promise<void> {\n  if (process.env.VSCODE_TESTING === \"1\") return;\n  const shortcuts = readCommandShortcuts().filter((entry) => entry.startup !== false);\n  if (shortcuts.length === 0) return;\n  const diagSummary = summarizeWorkspaceDiagnostics();\n  const diagState = readDiagnosticsRefreshState(context);\n  const recommendedCommands = new Set<string>();\n  if (diagSummary.errors > 0) {\n    recommendedCommands.add(\"vitte.test\");\n  }\n  if (diagState.stale || diagSummary.warnings > 0) {\n    recommendedCommands.add(\"vitte.diagnostics.refresh\");\n  }\n  const items: CommandMessageItem[] = [];\n  const seen = new Set<string>();\n  const ordered = [...shortcuts].sort((a, b) => {\n    const aRec = recommendedCommands.has(a.command);\n    const bRec = recommendedCommands.has(b.command);\n    if (aRec && !bRec) return -1;\n    if (!aRec && bRec) return 1;\n    return a.label.localeCompare(b.label);\n  });\n  for (const shortcut of ordered) {\n    if (seen.has(shortcut.command)) continue;\n    const recommended = recommendedCommands.has(shortcut.command);\n    items.push({\n      title: recommended ? `â­ ${shortcut.label}` : shortcut.label,\n      command: shortcut.command,\n    });\n    seen.add(shortcut.command);\n  }\n  for (const command of recommendedCommands) {\n    if (seen.has(command)) continue;\n    items.unshift({\n      title: `â­ ${labelForCommand(command)}`,\n      command,\n    });\n    seen.add(command);\n  }\n  if (items.length === 0) return;\n\n  const moreItem: CommandMessageItem = { title: \"Moreâ€¦\" };\n  const dismissItem: CommandMessageItem = { title: \"Dismiss\", isCloseAffordance: true };\n  const selection = await vscode.window.showInformationMessage<CommandMessageItem>(\n    \"Vitte is ready â€” run a command:\",\n    ...items,\n    moreItem,\n    dismissItem\n  );\n  if (!selection || selection === dismissItem) return;\n  if (selection === moreItem) {\n    await vscode.commands.executeCommand(\"vitte.showCommandMenu\");\n    return;\n  }\n  if (selection.command) {\n    await vscode.commands.executeCommand(selection.command);\n  }\n}\nexport async function activate(context: vscode.ExtensionContext): Promise<ExtensionApi | undefined> {\n  lastActivationContext = context;\n  try {\n    output = vscode.window.createOutputChannel(\"Vitte Language Server\", { log: true });\n  } catch {\n    output = vscode.window.createOutputChannel(\"Vitte Language Server\");\n  }\n  output.appendLine(\"[activate] begin\");\n  output.appendLine(\"[activate] Vitte extension activated\");\n  try {\n    statusItem = vscode.window.createStatusBarItem(\"vitte.status\", vscode.StatusBarAlignment.Right, 100);\n  } catch {\n    statusItem = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Right, 100);\n  }\n  statusItem.name = \"Vitte LSP\";\n  statusItem.command = \"vitte.showServerLog\";\n  context.subscriptions.push(output, statusItem);\n  setStatusBase(\"$(rocket)\", \"Vitte Language Server\");\n  refreshDiagnosticsStatus();\n  statusItem.show();\n  updateCommandButtons(context);\n  void showStartupCommandPrompt(context);\n  void setServerOnlineContext(false);\n\n  // Register command shortcuts early so they're available even if later init fails.\n  context.subscriptions.push(\n    vscode.commands.registerCommand('vitte.openDocs', () => vscode.env.openExternal(vscode.Uri.parse(\"https://vitte.netlify.app\"))),\n    vscode.commands.registerCommand(\"vitte.docs.openChapter\", async (url?: string) => {\n      if (typeof url !== \"string\" || url.length === 0) return;\n      await vscode.env.openExternal(vscode.Uri.parse(url));\n    }),\n    vscode.commands.registerCommand('vitte.openPlayground', () => PlaygroundPanel.createOrShow(context)),\n    vscode.commands.registerCommand(\"vitte.debugActivationStatus\", async () => {\n      const ext =\n        vscode.extensions.getExtension(\"vittestudio.vitte-studio\")\n        ?? vscode.extensions.getExtension(\"VitteStudio.vitte-studio\");\n      const viewsRegistered = documentationViewsRegistered ? \"yes\" : \"no\";\n      const viewErr = documentationViewsRegistrationError ?? \"none\";\n      const clientState = client ? ClientState[client.state] : \"none\";\n      const details = [\n        `id=${ext?.id ?? \"unknown\"}`,\n        `version=${getExtensionVersion(ext)}`,\n        `isActive=${String(ext?.isActive ?? false)}`,\n        `clientState=${clientState}`,\n        `documentationViewsRegistered=${viewsRegistered}`,\n        `documentationViewsRegistrationError=${viewErr}`,\n      ].join(\"\\n\");\n      output.appendLine(`[activate-debug]\\n${details}`);\n      output.show(true);\n      await vscode.window.showInformationMessage(`Vitte activation status:\\n${details}`);\n    })\n  );\n  output.appendLine(\"[activate] command registered: vitte.openDocs\");\n\n  // Register documentation views early (do not depend on server start)\n  const viewRegistrationErrors: string[] = [];\n  try {\n    registerDocumentationView(context, \"vitteExplorer\", \"Vitte Documentation\");\n  } catch (err) {\n    const message = err instanceof Error ? err.message : String(err);\n    viewRegistrationErrors.push(`vitteExplorer: ${message}`);\n    output.appendLine(`[activate] view registration failed (vitteExplorer): ${message}`);\n  }\n  try {\n    registerDocsChaptersView(context, \"vitteSuggestions\");\n  } catch (err) {\n    const message = err instanceof Error ? err.message : String(err);\n    viewRegistrationErrors.push(`vitteSuggestions: ${message}`);\n    output.appendLine(`[activate] view registration failed (vitteSuggestions): ${message}`);\n  }\n  documentationViewsRegistered = viewRegistrationErrors.length === 0;\n  documentationViewsRegistrationError = viewRegistrationErrors.length > 0\n    ? viewRegistrationErrors.join(\" | \")\n    : undefined;\n\n  void startClient(context).catch((err) => {\n    const message = err instanceof Error ? err.message : String(err);\n    output.appendLine(`[activate] startClient failed: ${message}`);\n  });\n  if (isOfflineEffective()) {\n    void showOfflineBanner(offlineReason ?? (isOfflinePermanent()\n      ? \"Offline permanent (user-forced).\"\n      : \"Offline mode is enabled (vitte.server.offline).\"));\n  }\n\n  editorLintCollection = vscode.languages.createDiagnosticCollection(\"vitte-lint\");\n  context.subscriptions.push(editorLintCollection);\n  context.subscriptions.push(vscode.workspace.onDidOpenTextDocument((doc) => updateEditorLint(doc)));\n  context.subscriptions.push(vscode.workspace.onDidChangeTextDocument((e) => updateEditorLint(e.document)));\n  context.subscriptions.push(vscode.workspace.onDidCloseTextDocument((doc) => editorLintCollection?.delete(doc.uri)));\n  for (const doc of vscode.workspace.textDocuments) updateEditorLint(doc);\n\n  // Debug & runtime tooling\n  registerDebugConfigurationProvider(context);\n  registerDebugFactory(context);\n  registerRuntimeLocatorCommand(context);\n  registerBuildTasks(context);\n  registerBenchTasks(context);\n  registerQuickActions(context);\n  try {\n    await registerTelemetry(context);\n  } catch (err) {\n    const message = err instanceof Error ? err.message : String(err);\n    output.appendLine(`[activate] telemetry init failed: ${message}`);\n  }\n\n  // Commandes\n  context.subscriptions.push(\n    vscode.commands.registerCommand(\"vitte.showServerLog\", () => {\n      output.show(true);\n    }),\n    vscode.commands.registerCommand(\"vitte.showServerMetrics\", async () => {\n      if (isOfflineEffective()) return showOfflineNoop(\"metrics\");\n      if (!client) {\n        const reason = offlineReason ? ` (${offlineReason})` : \"\";\n        void vscode.window.showWarningMessage(`Vitte server is not running.${reason}`);\n        return;\n      }\n      try {\n        const stats = await client.sendRequest<ServerMetricEntry[]>(\"vitte/metrics\");\n        if (!stats || stats.length === 0) {\n          void vscode.window.showInformationMessage(\"Vitte: no metrics available yet.\");\n          return;\n        }\n        const timestamp = new Date().toLocaleTimeString();\n        output.appendLine(`[metrics] Snapshot ${timestamp}`);\n        for (const entry of stats) {\n          const avg = entry.averageMs.toFixed(2);\n          const last = entry.lastMs.toFixed(2);\n          const max = entry.maxMs.toFixed(2);\n          const p99 = typeof entry.p99Ms === \"number\" ? entry.p99Ms.toFixed(2) : null;\n          const when = entry.lastAt ? new Date(entry.lastAt).toLocaleTimeString() : \"n/a\";\n          const countInfo = typeof entry.lastCount === \"number\" ? ` n=${entry.lastCount}` : \"\";\n          const errInfo = entry.errorCount ? ` errors=${entry.errorCount}` : \"\";\n          const p99Info = p99 ? ` p99=${p99}ms` : \"\";\n          const lastErr = entry.lastError ? ` lastErr=\"${entry.lastError}\"` : \"\";\n          output.appendLine(\n            `  ${entry.name.padEnd(18)} avg=${avg}ms last=${last}ms max=${max}ms${p99Info} count=${entry.count}${countInfo}${errInfo} last=${when} uri=${entry.lastUri}${lastErr}`\n          );\n        }\n        output.show(true);\n      } catch (err) {\n        const message = err instanceof Error ? err.message : String(err);\n        void vscode.window.showErrorMessage(`Vitte: unable to fetch server metrics (${message})`);\n      }\n    }),\n    vscode.commands.registerCommand(\"vitte.metrics.reset\", async () => {\n      if (isOfflineEffective()) return showOfflineNoop(\"metrics reset\");\n      if (!client) {\n        void vscode.window.showWarningMessage(\"Vitte server is not running.\");\n        return;\n      }\n      try {\n        await client.sendRequest(\"vitte/metrics.reset\");\n        void vscode.window.showInformationMessage(\"Vitte: metrics reset.\");\n        void vscode.commands.executeCommand(\"vitte.metrics.refresh\");\n      } catch (err) {\n        const message = err instanceof Error ? err.message : String(err);\n        void vscode.window.showErrorMessage(`Vitte: unable to reset metrics (${message})`);\n      }\n    }),\n    vscode.commands.registerCommand(\"vitte.pingServer\", async () => {\n      if (isOfflineEffective()) return showOfflineNoop(\"ping\");\n      if (!client) {\n        void vscode.window.showWarningMessage(\"Vitte server is not running.\");\n        return;\n      }\n      try {\n        const res = await client.sendRequest<{ ok: boolean; ts: number }>(\"vitte/ping\");\n        void vscode.window.showInformationMessage(`Vitte: pong (${res.ok ? \"ok\" : \"fail\"}) at ${new Date(res.ts).toLocaleTimeString()}`);\n      } catch (err) {\n        const message = err instanceof Error ? err.message : String(err);\n        void vscode.window.showErrorMessage(`Vitte: ping failed (${message})`);\n      }\n    }),\n    vscode.commands.registerCommand(\"vitte.showCommandMenu\", async () => {\n      const pickItems: CommandMenuItem[] = COMMAND_MENU_ENTRIES.map((entry) => {\n        const item: CommandMenuItem = {\n          label: entry.label,\n          command: entry.command,\n          detail: entry.detail ?? entry.command,\n        };\n        if (entry.description) {\n          item.description = entry.description;\n        }\n        return item;\n      });\n      const pick = await vscode.window.showQuickPick<CommandMenuItem>(pickItems, {\n        title: \"Vitte commands\",\n        placeHolder: \"Select a command to run\",\n        matchOnDetail: true,\n      });\n      if (!pick) return;\n      await vscode.commands.executeCommand(pick.command);\n    }),\n    vscode.commands.registerCommand(\"vitte.restartServer\", async () => {\n      if (isOfflinePermanent()) {\n        return showOfflineNoop(\"restart\");\n      }\n      await vscode.window.withProgress(\n        {\n          location: vscode.ProgressLocation.Notification,\n          title: \"Vitte: restarting language serverâ€¦\",\n        },\n        async () => {\n          const ok = await restartClient(context);\n          if (!ok) {\n            showOfflineNoop(\"restart\");\n          }\n        }\n      );\n      vscode.window.setStatusBarMessage(\"Vitte server restart attempted.\", 3000);\n    }),\n    vscode.commands.registerCommand(\"vitte.runAction\", async () => {\n      const pick = await vscode.window.showQuickPick([\n        {\n          label: \"Format document\",\n          description: \"editor.action.formatDocument\",\n          detail: \"Apply the configured formatter to the active file.\",\n          action: \"format\",\n        },\n        {\n          label: \"Organize imports\",\n          description: \"editor.action.organizeImports\",\n          detail: \"Trie et nettoie les imports du document courant.\",\n          action: \"organizeImports\",\n        },\n        {\n          label: \"Fix all\",\n          description: \"source.fixAll\",\n          detail: \"Run available quick fixes.\",\n          action: \"fixAll\",\n        }\n      ], { title: \"Vitte: run a quick action\" });\n      if (!pick) return;\n      await runBuiltinAction(pick.action);\n    }),\n    vscode.commands.registerCommand(\"vitte.runActionWithArgs\", async () => {\n      const action = await vscode.window.showInputBox({ prompt: \"Action (format | organizeImports | fixAll)\", value: \"format\" });\n      if (!action) return;\n      await runBuiltinAction(action.trim());\n    }),\n    vscode.commands.registerCommand(\"vitte.formatDocument\", async () => runBuiltinAction(\"format\")),\n    vscode.commands.registerCommand(\"vitte.organizeImports\", async () => runBuiltinAction(\"organizeImports\")),\n    vscode.commands.registerCommand(\"vitte.fixAll\", async () => runBuiltinAction(\"fixAll\")),\n    vscode.commands.registerCommand(\"vitte.renameSymbol\", async () => {\n      if (!vscode.window.activeTextEditor) return;\n      await vscode.commands.executeCommand(\"editor.action.rename\");\n    }),\n    vscode.commands.registerCommand(\"vitte.applyEditSample\", async () => {\n      const editor = vscode.window.activeTextEditor; if (!editor) return;\n      const edit = new vscode.WorkspaceEdit();\n      edit.insert(editor.document.uri, new vscode.Position(0, 0), \"// Edited by Vitte sample\\n\");\n      await vscode.workspace.applyEdit(edit);\n    }),\n    vscode.commands.registerCommand(\"vitte.progressSample\", async () => {\n      await vscode.window.withProgress({ location: vscode.ProgressLocation.Window, title: \"Vitte: Running task\" }, async (p) => {\n        p.report({ message: \"Step 1/3\" }); await sleep(250);\n        p.report({ message: \"Step 2/3\" }); await sleep(250);\n        p.report({ message: \"Step 3/3\" }); await sleep(250);\n      });\n    }),\n    vscode.commands.registerCommand(\"vitte.showInfo\", async () => {\n      const cfg = vscode.workspace.getConfiguration(\"vitte\");\n      const trace = cfg.get<string>(\"trace.server\", \"off\");\n      const offline = cfg.get<boolean>(\"server.offline\", false);\n      const offlinePermanent = cfg.get<boolean>(\"server.offlinePermanent\", false);\n      const offlineMsg = offlinePermanent ? \" (offline permanent)\" : (offline ? \" (offline)\" : \"\");\n      await vscode.window.showInformationMessage(`Vitte LSP â€” trace: ${trace}${offlineMsg}`);\n    }),\n    vscode.commands.registerCommand(\"vitte.offline.explain\", async () => {\n      const uri = vscode.Uri.file(path.join(context.extensionPath, \"media\", \"offline.md\"));\n      await vscode.commands.executeCommand(\"vscode.open\", uri);\n      void vscode.commands.executeCommand(\"vitte.offline.openLog\");\n    }),\n    vscode.commands.registerCommand(\"vitte.offline.copyReport\", async () => {\n      const report = await readOfflineReport();\n      await vscode.env.clipboard.writeText(report);\n      void vscode.window.showInformationMessage(\"Vitte: offline report copied to clipboard.\");\n    }),\n    vscode.commands.registerCommand(\"vitte.goOffline\", async () => {\n      await setOfflineMode(true, \"Manual offline mode enabled.\");\n      if (client) {\n        try { await client.stop(); } catch { /* noop */ }\n        client = undefined;\n      }\n    }),\n    vscode.commands.registerCommand(\"vitte.debug.runFile\", async () => { await runDebugCurrentFile(); }),\n    vscode.commands.registerCommand(\"vitte.debug.attachServer\", async () => { await attachDebugServer(); }),\n  );\n\n  // Refresh status depending on the active editor\n  context.subscriptions.push(vscode.window.onDidChangeActiveTextEditor(updateStatusText));\n  updateStatusText(vscode.window.activeTextEditor ?? undefined);\n\n  // Relance si config Vitte change\n  context.subscriptions.push(vscode.workspace.onDidChangeConfiguration(async (e) => {\n    if (e.affectsConfiguration(\"vitte.commandShortcuts\")) {\n      updateCommandButtons(context);\n    }\n    if (e.affectsConfiguration(\"vitte\")) {\n      await restartClient(context);\n    }\n    if (e.affectsConfiguration(\"vitte.server.offlinePermanent\")) {\n      if (isOfflinePermanent()) {\n        setOfflineStatus(\"Offline permanent (user-forced).\");\n      }\n    }\n    if (e.affectsConfiguration(\"vitte.lint\") || e.affectsConfiguration(\"vitte.features.lint\") || e.affectsConfiguration(\"vitte.server.offline\") || e.affectsConfiguration(\"vitte.server.offlinePermanent\")) {\n      for (const doc of vscode.workspace.textDocuments) updateEditorLint(doc);\n    }\n  }));\n\n  // Diagnostics view for both beginners and power users\n  registerDiagnosticsView(context);\n  registerModuleExplorerView(context);\n  registerMetricsView(context, () => client);\n  registerOfflineView(\n    context,\n    () => offlineReason,\n    () => output,\n    () => formatOfflineSince(),\n    () => {\n      const summary = summarizeWorkspaceDiagnostics();\n      const total = summary.errors + summary.warnings + summary.info + summary.hints;\n      if (total === 0) return \"No local diagnostics\";\n      return `${summary.errors} errors, ${summary.warnings} warnings`;\n    }\n  );\n  context.subscriptions.push(vscode.languages.onDidChangeDiagnostics(() => refreshDiagnosticsStatus()));\n\n  if (isOfflineEnabled()) {\n    setOfflineStatus(\"Offline mode is enabled (vitte.server.offline).\");\n  }\n  if (isOfflinePermanent()) {\n    setOfflineStatus(\"Offline permanent (user-forced).\");\n  }\n\n  if (process.env.VSCODE_TESTING === \"1\") {\n    const api: ExtensionApi = {\n      getStatusText: () => statusItem?.text ?? \"\",\n      getStatusTooltip: () => {\n        const tip = statusItem?.tooltip;\n        if (typeof tip === \"string\") return tip;\n        if (tip instanceof vscode.MarkdownString) {\n          return tip.value ?? \"\";\n        }\n        return \"\";\n      },\n      getClientState: () => client?.state,\n      runAction: async (action: string) => {\n        await runBuiltinAction(action);\n      },\n      restart: async () => {\n        await restartClient(context);\n      },\n      resolveServerModuleForTest: (ctx) => resolveServerModule(ctx as vscode.ExtensionContext),\n    };\n    return api;\n  }\n\n  return undefined;\n}\n\nexport async function deactivate(): Promise<void> {\n  try { await client?.stop(); } catch { /* noop */ }\n  client = undefined;\n  recentStops.length = 0;\n  offlineBannerShown = false;\n  for (const watcher of fileWatchers) {\n    try { watcher.dispose(); } catch { /* noop */ }\n  }\n  fileWatchers = [];\n}\n\n/* --------------------------------- LSP ----------------------------------- */\n\nfunction resolveServerModule(context: vscode.ExtensionContext): string {\n  // Permet dâ€™overrider via settings: vitte.serverPath\n  const cfgPath = vscode.workspace.getConfiguration(\"vitte\").get<string>(\"serverPath\");\n  if (cfgPath) {\n    if (fs.existsSync(cfgPath)) {\n      logServerResolution(`Using custom server: ${cfgPath}`);\n      return cfgPath;\n    }\n    logServerResolution(`Custom server path not found: ${cfgPath}`);\n  }\n  const nested = context.asAbsolutePath(path.join(\"server\", \"out\", \"src\", \"server.js\"));\n  if (fs.existsSync(nested)) {\n    logServerResolution(`Using packaged server (server/out/src): ${nested}`);\n    return nested;\n  }\n  const legacyNested = context.asAbsolutePath(path.join(\"server\", \"out\", \"server.js\"));\n  if (fs.existsSync(legacyNested)) {\n    logServerResolution(`Using legacy server (server/out): ${legacyNested}`);\n    return legacyNested;\n  }\n  const bundled = context.asAbsolutePath(path.join(\"out\", \"server.js\"));\n  if (fs.existsSync(bundled)) {\n    logServerResolution(`Using embedded server: ${bundled}`);\n    return bundled;\n  }\n  const message = \"Module serveur Vitte introuvable (out/server.js ou server/out/server.js)\";\n  logServerResolution(message);\n  throw new Error(message);\n}\n\nasync function startClient(context: vscode.ExtensionContext | undefined): Promise<boolean> {\n  if (client) return true; // already running\n  if (!context) return false;\n\n  if (isOfflineEffective()) {\n    const reason = isOfflinePermanent()\n      ? \"Offline permanent (user-forced).\"\n      : \"Offline mode is enabled (vitte.server.offline).\";\n    setOfflineStatus(reason);\n    return false;\n  }\n\n  let serverModule: string;\n  try {\n    serverModule = resolveServerModule(context);\n  } catch (err) {\n    const msg = err instanceof Error ? err.message : String(err);\n    setOfflineStatus(msg);\n    void vscode.window.showWarningMessage(`Vitte: server offline â€” ${msg}`);\n    return false;\n  }\n  const debugOptions = { execArgv: [\"--nolazy\", \"--inspect=6009\"] };\n  const serverOptions: ServerOptions = {\n    run:   { module: serverModule, transport: TransportKind.ipc },\n    debug: { module: serverModule, transport: TransportKind.ipc, options: debugOptions },\n  };\n\n  const documentSelector: DocumentSelector = LANGUAGES.flatMap((id) => ([\n    { scheme: \"file\", language: id },\n    { scheme: \"untitled\", language: id },\n    { scheme: \"vscode-notebook-cell\", language: id }\n  ]));\n  const watchers = ensureFileWatchers(context);\n\n  const clientOptions: LanguageClientOptions = {\n    documentSelector,\n    outputChannel: output,\n    revealOutputChannelOn: RevealOutputChannelOn.Never,\n    synchronize: {\n      configurationSection: \"vitte\",\n      fileEvents: watchers\n    },\n    middleware: {\n      provideDocumentFormattingEdits: async (\n        doc: vscode.TextDocument,\n        options: vscode.FormattingOptions,\n        token: vscode.CancellationToken,\n        next: ProvideDocumentFormattingEditsSignature\n      ) => {\n        try { return await next(doc, options, token); } catch {\n          await vscode.commands.executeCommand(\"editor.action.formatDocument\");\n          return [];\n        }\n      },\n    },\n    initializationOptions: {\n      // Extension â†’ Serveur: options dâ€™init (libre)\n    },\n  };\n\n  client = new LanguageClient(\"vitte-lsp\", \"Vitte Language Server\", serverOptions, clientOptions);\n\n  client.onTelemetry((e: unknown) => {\n    output.appendLine(`[telemetry] ${JSON.stringify(e)}`);\n  });\n\n  wireClientState(client);\n\n  await client.start();\n  return true;\n}\n\nasync function restartClient(context: vscode.ExtensionContext | undefined): Promise<boolean> {\n  if (client) {\n    setStatusBase(\"$(sync)\", \"Vitte LSP: restartingâ€¦\");\n    try { await client.stop(); } catch { /* noop */ }\n    client = undefined;\n  }\n  if (isOfflineEffective()) {\n    const reason = isOfflinePermanent()\n      ? \"Offline permanent (user-forced).\"\n      : \"Offline mode is enabled (vitte.server.offline).\";\n    setOfflineStatus(reason);\n    return false;\n  }\n  return startClient(context);\n}\n\nfunction wireClientState(c: LanguageClient): void {\n  c.onDidChangeState((e: { oldState: ClientState; newState: ClientState }) => {\n    if (e.newState === ClientState.Starting) {\n      setStatusBase(\"$(gear)\", \"Vitte LSP: starting\");\n      void setServerOnlineContext(false);\n    } else if (e.newState === ClientState.Running) {\n      offlineReason = undefined;\n      setStatusBase(\"$(check)\", \"Vitte LSP: running\");\n      void setServerOnlineContext(true);\n    } else if (e.newState === ClientState.Stopped) {\n      setStatusBase(\"$(debug-stop)\", \"Vitte LSP: stopped\");\n      void setServerOnlineContext(false);\n      const now = Date.now();\n      recentStops.push(now);\n      while (recentStops.length) {\n        const first = recentStops[0];\n        if (first === undefined) break;\n        if ((now - first) <= 120000) break;\n        recentStops.shift();\n      }\n      if (!isOfflineEnabled() && recentStops.length >= 3) {\n        setOfflineStatus(\"Server stopped repeatedly (3x in 2 minutes).\");\n      }\n    }\n  });\n\n  c.onNotification(\"vitte/status\", (msg: { text?: string; tooltip?: string }) => {\n    const text = typeof msg?.text === \"string\" ? msg.text : undefined;\n    const tooltip = typeof msg?.tooltip === \"string\" ? msg.tooltip : undefined;\n    if (text !== undefined || tooltip !== undefined) {\n      setStatusOverride(text, tooltip);\n    }\n  });\n\n  c.onNotification(\"vitte/log\", (msg: unknown) => {\n    output.appendLine(typeof msg === \"string\" ? msg : JSON.stringify(msg));\n  });\n}\n\n/* ----------------------------- Actions utilitaires ------------------------ */\n\nasync function runBuiltinAction(action: string): Promise<void> {\n  const editor = vscode.window.activeTextEditor;\n  if (!editor) {\n    void vscode.window.showWarningMessage(\"Open a Vitte/Vit document before running this action.\");\n    return;\n  }\n  const languageId = editor.document.languageId;\n  if (!LANGUAGE_SET.has(languageId)) {\n    void vscode.window.showWarningMessage(\"Les actions Vitte ne sont disponibles que pour les fichiers Vitte/Vit.\");\n    return;\n  }\n  switch (action) {\n    case \"format\":\n      await vscode.commands.executeCommand(\"editor.action.formatDocument\");\n      return;\n    case \"organizeImports\":\n      await vscode.commands.executeCommand(\"editor.action.organizeImports\");\n      return;\n    case \"fixAll\":\n      await vscode.commands.executeCommand(\"editor.action.codeAction\", {\n        kind: vscode.CodeActionKind.SourceFixAll.value,\n        apply: \"first\"\n      });\n      return;\n    default:\n      void vscode.window.showWarningMessage(`Action inconnue: ${action}`);\n      return;\n  }\n}\n\nfunction showOfflineNoop(action: string): void {\n  const reason = offlineReason ?? (isOfflinePermanent()\n    ? \"Offline permanent (user-forced).\"\n    : \"Offline mode is enabled (vitte.server.offline).\");\n  void vscode.window.showWarningMessage(`Vitte: ${action} unavailable while offline â€” ${reason}`);\n}\n\nfunction formatOfflineSince(): string {\n  if (!offlineSince) return \"unknown\";\n  const seconds = Math.floor((Date.now() - offlineSince) / 1000);\n  if (seconds < 60) return `${seconds}s`;\n  const minutes = Math.floor(seconds / 60);\n  if (minutes < 60) return `${minutes}m`;\n  const hours = Math.floor(minutes / 60);\n  if (hours < 24) return `${hours}h`;\n  const days = Math.floor(hours / 24);\n  return `${days}d`;\n}\n\nasync function readOfflineReport(): Promise<string> {\n  const cfg = vscode.workspace.getConfiguration(\"vitte\");\n  const report: string[] = [];\n  report.push(`# Vitte Offline Report`);\n  report.push(`- offline: ${isOfflineEffective()}`);\n  report.push(`- offlinePermanent: ${isOfflinePermanent()}`);\n  report.push(`- offlineSince: ${offlineSince ? new Date(offlineSince).toISOString() : \"unknown\"}`);\n  report.push(`- offlineReason: ${offlineReason ?? \"unknown\"}`);\n  report.push(`- autoRetry: ${cfg.get<boolean>(\"server.autoRetry\", true)}`);\n  report.push(`- autoRetryBaseMs: ${cfg.get<number>(\"server.autoRetryBaseMs\", 60000)}`);\n  report.push(`- autoRetryMaxMs: ${cfg.get<number>(\"server.autoRetryMaxMs\", 300000)}`);\n  report.push(`- workspaceFolders: ${(vscode.workspace.workspaceFolders ?? []).length}`);\n  report.push(`- openDocs: ${vscode.workspace.textDocuments.length}`);\n  report.push(`- diagnostics (local): ${summarizeWorkspaceDiagnostics().errors} errors, ${summarizeWorkspaceDiagnostics().warnings} warnings`);\n  report.push(`- offlineLog: ${getOfflineLogPathSafe()}`);\n  const tail = await readOfflineLogTail(30);\n  if (tail) {\n    report.push(`\\n## offline.log (last 30 lines)\\n${tail}`);\n  }\n  return report.join(\"\\n\");\n}\n\nfunction getOfflineLogPathSafe(): string {\n  try {\n    const folder = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\n    const base = folder ?? os.tmpdir();\n    return path.join(base, \".vitte\", \"offline.log\");\n  } catch {\n    return \"unknown\";\n  }\n}\n\nasync function readOfflineLogTail(lines: number): Promise<string> {\n  try {\n    const filePath = getOfflineLogPathSafe();\n    const content = await fs.promises.readFile(filePath, \"utf8\");\n    const rows = content.trim().split(/\\r?\\n/);\n    return rows.slice(-lines).join(\"\\n\");\n  } catch {\n    return \"\";\n  }\n}\n\nfunction isVitteDocument(doc: vscode.TextDocument): boolean {\n  return LANGUAGE_SET.has(doc.languageId as typeof LANGUAGES[number]);\n}\n\nfunction updateEditorLint(doc: vscode.TextDocument): void {\n  if (!editorLintCollection) return;\n  const cfg = vscode.workspace.getConfiguration(\"vitte\");\n  if (!cfg.get<boolean>(\"features.lint\", true)) {\n    editorLintCollection.delete(doc.uri);\n    return;\n  }\n  if (!isVitteDocument(doc)) {\n    editorLintCollection.delete(doc.uri);\n    return;\n  }\n  const lintCfg = cfg.get<{ maxLineLength?: number; allowTabs?: boolean; allowTrailingWhitespace?: boolean }>(\"lint\") ?? {};\n  const maxLineLength = typeof lintCfg.maxLineLength === \"number\" ? lintCfg.maxLineLength : 120;\n  const allowTabs = lintCfg.allowTabs === true;\n  const allowTrailing = lintCfg.allowTrailingWhitespace === true;\n\n  const diagnostics: vscode.Diagnostic[] = [];\n  const lines = doc.getText().split(/\\r?\\n/);\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n    if (line === undefined) continue;\n    if (!allowTabs && line.includes(\"\\t\")) {\n      const idx = line.indexOf(\"\\t\");\n      diagnostics.push(new vscode.Diagnostic(\n        new vscode.Range(i, idx, i, idx + 1),\n        \"Tabulation dÃ©tectÃ©e. Utiliser des espaces.\",\n        vscode.DiagnosticSeverity.Warning\n      ));\n    }\n    if (!allowTrailing) {\n      const m = /[ \\t]+$/.exec(line);\n      if (m) {\n        const start = m.index ?? Math.max(0, line.length - m[0].length);\n        const trailing = new vscode.Diagnostic(\n          new vscode.Range(i, start, i, line.length),\n          \"Espaces en fin de ligne.\",\n          vscode.DiagnosticSeverity.Hint\n        );\n        trailing.tags = [vscode.DiagnosticTag.Unnecessary];\n        diagnostics.push(trailing);\n      }\n    }\n    if (maxLineLength > 0 && line.length > maxLineLength) {\n      diagnostics.push(new vscode.Diagnostic(\n        new vscode.Range(i, maxLineLength, i, line.length),\n        `Ligne trop longue (${line.length} > ${maxLineLength}).`,\n        vscode.DiagnosticSeverity.Hint\n      ));\n    }\n  }\n  diagnostics.push(...buildBracketDiagnostics(lines));\n  editorLintCollection.set(doc.uri, diagnostics);\n}\n\nfunction buildBracketDiagnostics(lines: string[]): vscode.Diagnostic[] {\n  const diagnostics: vscode.Diagnostic[] = [];\n  const stack: Array<{ char: \"(\" | \"[\" | \"{\"; line: number; col: number }> = [];\n  const pairs: Record<string, \"(\" | \"[\" | \"{\"> = { \")\": \"(\", \"]\": \"[\", \"}\": \"{\" };\n  const openers = new Set([\"(\", \"[\", \"{\"]);\n  const closers = new Set([\")\", \"]\", \"}\"]);\n\n  for (let lineIndex = 0; lineIndex < lines.length; lineIndex++) {\n    const rawLine = lines[lineIndex] ?? \"\";\n    const codeLine = normalizeForBracketScan(rawLine);\n    for (let col = 0; col < codeLine.length; col++) {\n      const char = codeLine[col];\n      if (!char) continue;\n      if (openers.has(char)) {\n        stack.push({ char: char as \"(\" | \"[\" | \"{\", line: lineIndex, col });\n        continue;\n      }\n      if (!closers.has(char)) continue;\n      const expected = pairs[char];\n      const top = stack[stack.length - 1];\n      if (!top || top.char !== expected) {\n        diagnostics.push(new vscode.Diagnostic(\n          new vscode.Range(lineIndex, col, lineIndex, col + 1),\n          `ParenthÃ¨se/accolade fermante inattendue \"${char}\".`,\n          vscode.DiagnosticSeverity.Error\n        ));\n        continue;\n      }\n      stack.pop();\n    }\n  }\n\n  for (const entry of stack) {\n    const expected = entry.char === \"(\" ? \")\" : entry.char === \"[\" ? \"]\" : \"}\";\n    diagnostics.push(new vscode.Diagnostic(\n      new vscode.Range(entry.line, entry.col, entry.line, entry.col + 1),\n      `ParenthÃ¨se/accolade ouvrante \"${entry.char}\" non fermÃ©e (attendu: \"${expected}\").`,\n      vscode.DiagnosticSeverity.Error\n    ));\n  }\n  return diagnostics;\n}\n\nfunction normalizeForBracketScan(line: string): string {\n  let result = \"\";\n  let inSingle = false;\n  let inDouble = false;\n  let inTemplate = false;\n  let escaped = false;\n\n  for (let i = 0; i < line.length; i++) {\n    const ch = line[i] ?? \"\";\n    const next = i + 1 < line.length ? (line[i + 1] ?? \"\") : \"\";\n\n    if (!inSingle && !inDouble && !inTemplate && ch === \"/\" && next === \"/\") {\n      break;\n    }\n    if (escaped) {\n      escaped = false;\n      result += \" \";\n      continue;\n    }\n    if (ch === \"\\\\\") {\n      escaped = true;\n      result += \" \";\n      continue;\n    }\n    if (!inDouble && !inTemplate && ch === \"'\") {\n      inSingle = !inSingle;\n      result += \" \";\n      continue;\n    }\n    if (!inSingle && !inTemplate && ch === \"\\\"\") {\n      inDouble = !inDouble;\n      result += \" \";\n      continue;\n    }\n    if (!inSingle && !inDouble && ch === \"`\") {\n      inTemplate = !inTemplate;\n      result += \" \";\n      continue;\n    }\n    result += inSingle || inDouble || inTemplate ? \" \" : ch;\n  }\n\n  return result;\n}\n\nfunction sleep(ms: number): Promise<void> { return new Promise(res => setTimeout(res, ms)); }\n\nfunction updateStatusText(editor?: vscode.TextEditor): void {\n  const lang = editor?.document?.languageId;\n  if (lang && LANGUAGE_SET.has(lang)) {\n    setStatusLanguageSuffix(lang);\n    return;\n  }\n  setStatusLanguageSuffix(\"\");\n}\n\n/* -------------------------------- Debug demo ------------------------------ */\n\nasync function runDebugCurrentFile(): Promise<void> {\n  const editor = vscode.window.activeTextEditor; if (!editor) return;\n  const folder = vscode.workspace.workspaceFolders?.[0];\n  const cfg: vscode.DebugConfiguration = {\n    type: \"vitte\",\n    name: \"Vitte: Launch current file\",\n    request: \"launch\",\n    program: editor.document.fileName,\n    cwd: folder?.uri.fsPath ?? path.dirname(editor.document.fileName),\n    stopOnEntry: true,\n    args: []\n  };\n  await vscode.debug.startDebugging(folder, cfg);\n}\n\nasync function attachDebugServer(): Promise<void> {\n  const portStr = await vscode.window.showInputBox({ prompt: \"Port du serveur Vitte\", value: \"9333\" });\n  if (!portStr) return;\n  const folder = vscode.workspace.workspaceFolders?.[0];\n  const cfg: vscode.DebugConfiguration = {\n    type: \"vitte\",\n    name: \"Vitte: Attach\",\n    request: \"attach\",\n    port: Number.parseInt(portStr, 10),\n  };\n  if (!Number.isInteger(cfg.port) || (cfg.port as number) <= 0) {\n    void vscode.window.showErrorMessage(\"Port Vitte invalide.\");\n    return;\n  }\n  await vscode.debug.startDebugging(folder, cfg);\n}\n"]}