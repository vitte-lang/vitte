{"version":3,"file":"extension.js","sourceRoot":"","sources":["../src/extension.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * extension.ts — VS Code client for Vitte/Vit\n * - Full LSP client (start/stop/restart, traces, status, watchers)\n * - Commands: logs, restart, actions (format/organize/fix), rename, debug demos\n * - Progress UI, output channel, status bar, config-sync, file watcher\n * - Hardened: no-op when no editor, consistent error handling, strict types\n */\n\nimport * as path from \"node:path\";\nimport * as fs from \"node:fs\";\nimport * as vscode from \"vscode\";\nimport { registerDiagnosticsView } from \"./diagnosticsView\";\nimport { registerModuleExplorerView } from \"./moduleExplorerView\";\nimport { VitteProjectTreeProvider } from \"./providers/tree/projectTree\";\nimport { PlaygroundPanel } from \"./providers/playgroundPanel\";\nimport { registerBuildTasks } from \"./tasks/buildTasks\";\nimport { registerBenchTasks } from \"./tasks/benchTasks\";\nimport { registerRuntimeLocatorCommand } from \"./debug/runtimeLocator\";\nimport { registerDebugFactory } from \"./debug/adapterFactory\";\nimport { registerDebugConfigurationProvider } from \"./debug/configurationProvider\";\nimport { registerTelemetry } from \"./utils/telemetry\";\nimport { registerQuickActions } from \"./commands/quickActions\";\nimport { registerMetricsView } from \"./providers/metricsView\";\nimport {\n  LanguageClient,\n  TransportKind,\n  RevealOutputChannelOn,\n  State as ClientState,\n} from \"vscode-languageclient/node\";\nimport type {\n  LanguageClientOptions,\n  ServerOptions,\n  DocumentSelector,\n  ProvideDocumentFormattingEditsSignature,\n} from \"vscode-languageclient/node\";\nimport {\n  summarizeWorkspaceDiagnostics,\n  diagnosticsLevel,\n  formatDiagnosticsSummary,\n} from \"./utils/diagnostics\";\nimport type { ServerMetricEntry } from \"./types/metrics\";\n\nlet client: LanguageClient | undefined;\nlet output: vscode.OutputChannel;\nlet statusItem: vscode.StatusBarItem;\n\nlet statusBaseIcon = \"$(rocket)\";\nconst STATUS_LABEL = \"Vitte\";\nlet statusLanguageSuffix = \"\";\nlet statusBaseTooltip = \"Vitte Language Server\";\nlet statusHealthIcon = \"\";\nlet statusHealthTooltip = \"\";\nlet statusOverrideText: string | undefined;\nlet statusOverrideTooltip: string | undefined;\n\nexport interface ExtensionApi {\n  getStatusText(): string;\n  getStatusTooltip(): string;\n  getClientState(): ClientState | undefined;\n  runAction(action: string): Promise<void>;\n  restart(): Promise<void>;\n  resolveServerModuleForTest(ctx: Pick<vscode.ExtensionContext, \"asAbsolutePath\">): string;\n}\n\nconst LANGUAGES = [\"vitte\", \"vit\"] as const;\nconst WATCH_PATTERNS = [\n  \"**/*.{vitte,vit}\",\n  \"**/vitte.toml\",\n  \"**/.vitteconfig\"\n] as const;\nconst LANGUAGE_SET = new Set<string>(LANGUAGES);\n\ninterface CommandMenuEntry {\n  label: string;\n  description?: string;\n  detail?: string;\n  command: string;\n}\n\ninterface CommandMenuItem extends vscode.QuickPickItem {\n  command: string;\n}\n\ninterface CommandShortcutConfig {\n  label: string;\n  command: string;\n  icon?: string;\n  tooltip?: string;\n  statusBar?: boolean;\n  startup?: boolean;\n}\n\ninterface CommandMessageItem extends vscode.MessageItem {\n  command?: string;\n}\n\nconst DEFAULT_COMMAND_SHORTCUTS: readonly CommandShortcutConfig[] = [\n  { label: \"Build\", command: \"vitte.build\", icon: \"$(tools)\", tooltip: \"Build the workspace (vitte.build)\", statusBar: true, startup: true },\n  { label: \"Run\", command: \"vitte.run\", icon: \"$(debug-start)\", tooltip: \"Build and run the entry point (vitte.run)\", statusBar: true, startup: true },\n  { label: \"Test\", command: \"vitte.test\", icon: \"$(beaker)\", tooltip: \"Execute the test suite (vitte.test)\", statusBar: true, startup: true },\n] as const;\n\nconst COMMAND_MENU_ENTRIES: readonly CommandMenuEntry[] = [\n  { label: \"Clean workspace\", description: \"Remove build outputs\", command: \"vitte.clean\" },\n  { label: \"Bench workspace\", description: \"Run vitte.bench\", command: \"vitte.bench\" },\n  { label: \"Open bench report\", description: \"Latest bench report\", command: \"vitte.benchReport\" },\n  { label: \"Diagnostics ▸ Refresh\", description: \"Re-scan diagnostics\", command: \"vitte.diagnostics.refresh\" },\n  { label: \"Diagnostics ▸ Next issue\", description: \"Jump to next diagnostic\", command: \"editor.action.marker.next\" },\n  { label: \"Docs & Playground\", description: \"Open docs or playground\", command: \"vitte.openDocs\", detail: \"vitte.openDocs → playground\" },\n  { label: \"Quick Actions\", description: \"Interactive menu\", command: \"vitte.quickActions\" },\n  { label: \"Server log\", description: \"Open log output\", command: \"vitte.showServerLog\" },\n  { label: \"Server metrics\", description: \"Show performance snapshot\", command: \"vitte.showServerMetrics\" },\n  { label: \"Detect toolchain\", description: \"Scan for Vitte runtimes\", command: \"vitte.detectToolchain\" },\n];\n\nlet fileWatchers: vscode.FileSystemWatcher[] = [];\nlet commandButtonItems: vscode.StatusBarItem[] = [];\nlet commandMenuButton: vscode.StatusBarItem | undefined;\nconst DIAGNOSTICS_REFRESH_KEY = \"vitte.quickActions.diagRefresh\";\n\nfunction logServerResolution(message: string): void {\n  const text = `[vitte] ${message}`;\n  output?.appendLine(text);\n}\n\nfunction readCommandShortcuts(): CommandShortcutConfig[] {\n  const cfg = vscode.workspace.getConfiguration(\"vitte\");\n  const raw = cfg.get<unknown>(\"commandShortcuts\");\n  if (!Array.isArray(raw)) {\n    return DEFAULT_COMMAND_SHORTCUTS.map((item) => ({ ...item }));\n  }\n  const sanitized: CommandShortcutConfig[] = [];\n  for (const entry of raw) {\n    if (!entry || typeof entry !== \"object\") continue;\n    const data = entry as Partial<CommandShortcutConfig>;\n    const label = typeof data.label === \"string\" && data.label.trim().length > 0 ? data.label.trim() : undefined;\n    const command = typeof data.command === \"string\" && data.command.trim().length > 0 ? data.command.trim() : undefined;\n    if (!label || !command) continue;\n    const shortcut: CommandShortcutConfig = { label, command };\n    const icon = typeof data.icon === \"string\" && data.icon.trim().length > 0 ? data.icon.trim() : undefined;\n    if (icon) shortcut.icon = icon;\n    const tooltip = typeof data.tooltip === \"string\" && data.tooltip.trim().length > 0 ? data.tooltip : undefined;\n    if (tooltip) shortcut.tooltip = tooltip;\n    if (typeof data.statusBar === \"boolean\") shortcut.statusBar = data.statusBar;\n    if (typeof data.startup === \"boolean\") shortcut.startup = data.startup;\n    sanitized.push(shortcut);\n  }\n  return sanitized.length > 0 ? sanitized : DEFAULT_COMMAND_SHORTCUTS.map((item) => ({ ...item }));\n}\n\nfunction getWorkspaceId(): string | undefined {\n  return vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\n}\n\nfunction readDiagnosticsRefreshState(context: vscode.ExtensionContext): { lastRefresh?: number; stale: boolean } {\n  const workspaceId = getWorkspaceId();\n  if (!workspaceId) return { stale: true };\n  const map = context.globalState.get<Record<string, number>>(DIAGNOSTICS_REFRESH_KEY, {});\n  const ts = map[workspaceId];\n  if (!ts) return { stale: true };\n  const stale = Date.now() - ts > 10 * 60 * 1000;\n  return { lastRefresh: ts, stale };\n}\n\nfunction labelForCommand(command: string): string {\n  switch (command) {\n    case \"vitte.build\": return \"Build\";\n    case \"vitte.run\": return \"Run\";\n    case \"vitte.test\": return \"Run Tests\";\n    case \"vitte.diagnostics.refresh\": return \"Refresh Diagnostics\";\n    default: return command.replace(/^vitte\\./, \"\");\n  }\n}\n\nfunction applyStatusBar(): void {\n  if (!statusItem) return;\n  let text: string;\n  let tooltipParts: string[];\n\n  if (statusOverrideText !== undefined) {\n    text = statusOverrideText;\n    tooltipParts = [statusOverrideTooltip ?? statusBaseTooltip];\n  } else {\n    const suffix = statusLanguageSuffix ? ` (${statusLanguageSuffix})` : \"\";\n    text = `${statusBaseIcon} ${STATUS_LABEL}${suffix}`;\n    tooltipParts = [statusBaseTooltip];\n    if (statusOverrideTooltip) {\n      tooltipParts.push(statusOverrideTooltip);\n    }\n  }\n\n  if (statusHealthIcon) {\n    text = `${text} ${statusHealthIcon}`;\n  }\n\n  if (statusHealthTooltip) {\n    tooltipParts.push(statusHealthTooltip);\n  }\n\n  statusItem.text = text;\n  statusItem.tooltip = tooltipParts.filter(Boolean).join(\"\\n\");\n  statusItem.accessibilityInformation = {\n    label: text.replace(/\\$\\([^)]+\\)/g, \"\").trim(),\n    role: \"status\"\n  };\n}\n\nfunction setStatusBase(icon: string, tooltip: string): void {\n  statusBaseIcon = icon;\n  statusBaseTooltip = tooltip;\n  statusOverrideText = undefined;\n  statusOverrideTooltip = undefined;\n  applyStatusBar();\n}\n\nfunction setStatusLanguageSuffix(lang?: string): void {\n  statusLanguageSuffix = lang ?? \"\";\n  applyStatusBar();\n}\n\nfunction setStatusOverride(text?: string, tooltip?: string): void {\n  statusOverrideText = text;\n  statusOverrideTooltip = tooltip;\n  applyStatusBar();\n}\n\nfunction refreshDiagnosticsStatus(): void {\n  const summary = summarizeWorkspaceDiagnostics();\n  const level = diagnosticsLevel(summary);\n  switch (level) {\n    case \"error\":\n      statusHealthIcon = \"$(error)\";\n      break;\n    case \"warning\":\n      statusHealthIcon = \"$(warning)\";\n      break;\n    default:\n      statusHealthIcon = \"$(pass-filled)\";\n  }\n  statusHealthTooltip = formatDiagnosticsSummary(summary);\n  applyStatusBar();\n}\n\nfunction ensureFileWatchers(context: vscode.ExtensionContext): vscode.FileSystemWatcher[] {\n  if (fileWatchers.length === 0) {\n    fileWatchers = WATCH_PATTERNS.map((pattern) => {\n      const watcher = vscode.workspace.createFileSystemWatcher(pattern);\n      context.subscriptions.push(watcher);\n      return watcher;\n    });\n  }\n  return fileWatchers;\n}\n\nfunction updateCommandButtons(context: vscode.ExtensionContext): void {\n  for (const item of commandButtonItems) {\n    try { item.dispose(); } catch { /* noop */ }\n  }\n  commandButtonItems = [];\n  if (commandMenuButton) {\n    try { commandMenuButton.dispose(); } catch { /* noop */ }\n    commandMenuButton = undefined;\n  }\n  const shortcuts = readCommandShortcuts();\n  const visible = shortcuts.filter((entry) => entry.statusBar !== false);\n  let priority = 1000;\n  for (const shortcut of visible) {\n    const icon = shortcut.icon ?? \"$(rocket)\";\n    const item = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left, priority--);\n    item.text = `${icon} ${shortcut.label}`;\n    item.command = shortcut.command;\n    item.tooltip = shortcut.tooltip ?? shortcut.command;\n    item.name = `Vitte ${shortcut.label}`;\n    item.accessibilityInformation = { label: `${shortcut.label} button`, role: \"button\" };\n    item.show();\n    commandButtonItems.push(item);\n    context.subscriptions.push(item);\n  }\n  commandMenuButton = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left, priority--);\n  commandMenuButton.text = \"$(list-selection) Vitte\";\n  commandMenuButton.command = \"vitte.showCommandMenu\";\n  commandMenuButton.tooltip = \"Show additional Vitte commands\";\n  commandMenuButton.name = \"Vitte Command Menu\";\n  commandMenuButton.accessibilityInformation = { label: \"Vitte command menu\", role: \"button\" };\n  commandMenuButton.show();\n  context.subscriptions.push(commandMenuButton);\n}\n\nasync function showStartupCommandPrompt(context: vscode.ExtensionContext): Promise<void> {\n  if (process.env.VSCODE_TESTING === \"1\") return;\n  const shortcuts = readCommandShortcuts().filter((entry) => entry.startup !== false);\n  if (shortcuts.length === 0) return;\n  const diagSummary = summarizeWorkspaceDiagnostics();\n  const diagState = readDiagnosticsRefreshState(context);\n  const recommendedCommands = new Set<string>();\n  if (diagSummary.errors > 0) {\n    recommendedCommands.add(\"vitte.test\");\n  }\n  if (diagState.stale || diagSummary.warnings > 0) {\n    recommendedCommands.add(\"vitte.diagnostics.refresh\");\n  }\n  const items: CommandMessageItem[] = [];\n  const seen = new Set<string>();\n  const ordered = [...shortcuts].sort((a, b) => {\n    const aRec = recommendedCommands.has(a.command);\n    const bRec = recommendedCommands.has(b.command);\n    if (aRec && !bRec) return -1;\n    if (!aRec && bRec) return 1;\n    return a.label.localeCompare(b.label);\n  });\n  for (const shortcut of ordered) {\n    if (seen.has(shortcut.command)) continue;\n    const recommended = recommendedCommands.has(shortcut.command);\n    items.push({\n      title: recommended ? `⭐ ${shortcut.label}` : shortcut.label,\n      command: shortcut.command,\n    });\n    seen.add(shortcut.command);\n  }\n  for (const command of recommendedCommands) {\n    if (seen.has(command)) continue;\n    items.unshift({\n      title: `⭐ ${labelForCommand(command)}`,\n      command,\n    });\n    seen.add(command);\n  }\n  if (items.length === 0) return;\n\n  const moreItem: CommandMessageItem = { title: \"More…\" };\n  const dismissItem: CommandMessageItem = { title: \"Dismiss\", isCloseAffordance: true };\n  const selection = await vscode.window.showInformationMessage<CommandMessageItem>(\n    \"Vitte is ready — run a command:\",\n    ...items,\n    moreItem,\n    dismissItem\n  );\n  if (!selection || selection === dismissItem) return;\n  if (selection === moreItem) {\n    await vscode.commands.executeCommand(\"vitte.showCommandMenu\");\n    return;\n  }\n  if (selection.command) {\n    await vscode.commands.executeCommand(selection.command);\n  }\n}\nexport async function activate(context: vscode.ExtensionContext): Promise<ExtensionApi | undefined> {\n  output = vscode.window.createOutputChannel(\"Vitte Language Server\", { log: true });\n  statusItem = vscode.window.createStatusBarItem(\"vitte.status\", vscode.StatusBarAlignment.Right, 100);\n  statusItem.name = \"Vitte LSP\";\n  statusItem.command = \"vitte.showServerLog\";\n  context.subscriptions.push(output, statusItem);\n  setStatusBase(\"$(rocket)\", \"Vitte Language Server\");\n  refreshDiagnosticsStatus();\n  statusItem.show();\n  updateCommandButtons(context);\n  void showStartupCommandPrompt(context);\n\n  await startClient(context);\n\n  // Debug & runtime tooling\n  registerDebugConfigurationProvider(context);\n  registerDebugFactory(context);\n  registerRuntimeLocatorCommand(context);\n  registerBuildTasks(context);\n  registerBenchTasks(context);\n  registerQuickActions(context);\n  await registerTelemetry(context);\n\n  // Sidebar: Explorateur Vitte (activity bar)\n  const vitteTree = new VitteProjectTreeProvider(context);\n  context.subscriptions.push(\n    vscode.window.registerTreeDataProvider('vitteExplorer', vitteTree)\n  );\n\n  // Toolbar + palette commands for the view\n  context.subscriptions.push(\n    vscode.commands.registerCommand('vitte.refreshExplorer', () => vitteTree.refresh()),\n    vscode.commands.registerCommand('vitte.openDocs', () => {\n      const uri = vscode.Uri.file(path.join(context.extensionPath, 'media', 'docs.html'));\n      return vscode.commands.executeCommand('vscode.open', uri);\n    }),\n    vscode.commands.registerCommand('vitte.openPlayground', () => PlaygroundPanel.createOrShow(context))\n  );\n\n  // Commandes\n  context.subscriptions.push(\n    vscode.commands.registerCommand(\"vitte.showServerLog\", () => {\n      output.show(true);\n    }),\n    vscode.commands.registerCommand(\"vitte.showServerMetrics\", async () => {\n      if (!client) {\n        void vscode.window.showWarningMessage(\"Vitte server is not running.\");\n        return;\n      }\n      try {\n        const stats = await client.sendRequest<ServerMetricEntry[]>(\"vitte/metrics\");\n        if (!stats || stats.length === 0) {\n          void vscode.window.showInformationMessage(\"Vitte: no metrics available yet.\");\n          return;\n        }\n        const timestamp = new Date().toLocaleTimeString();\n        output.appendLine(`[metrics] Snapshot ${timestamp}`);\n        for (const entry of stats) {\n          const avg = entry.averageMs.toFixed(2);\n          const last = entry.lastMs.toFixed(2);\n          const max = entry.maxMs.toFixed(2);\n          const when = entry.lastAt ? new Date(entry.lastAt).toLocaleTimeString() : \"n/a\";\n          const countInfo = typeof entry.lastCount === \"number\" ? ` n=${entry.lastCount}` : \"\";\n          output.appendLine(\n            `  ${entry.name.padEnd(18)} avg=${avg}ms last=${last}ms max=${max}ms count=${entry.count}${countInfo} last=${when} uri=${entry.lastUri}`\n          );\n        }\n        output.show(true);\n      } catch (err) {\n        const message = err instanceof Error ? err.message : String(err);\n        void vscode.window.showErrorMessage(`Vitte: unable to fetch server metrics (${message})`);\n      }\n    }),\n    vscode.commands.registerCommand(\"vitte.showCommandMenu\", async () => {\n      const pickItems: CommandMenuItem[] = COMMAND_MENU_ENTRIES.map((entry) => {\n        const item: CommandMenuItem = {\n          label: entry.label,\n          command: entry.command,\n          detail: entry.detail ?? entry.command,\n        };\n        if (entry.description) {\n          item.description = entry.description;\n        }\n        return item;\n      });\n      const pick = await vscode.window.showQuickPick<CommandMenuItem>(pickItems, {\n        title: \"Vitte commands\",\n        placeHolder: \"Select a command to run\",\n        matchOnDetail: true,\n      });\n      if (!pick) return;\n      await vscode.commands.executeCommand(pick.command);\n    }),\n    vscode.commands.registerCommand(\"vitte.restartServer\", async () => {\n      await vscode.window.withProgress(\n        {\n          location: vscode.ProgressLocation.Notification,\n          title: \"Vitte: restarting language server…\",\n        },\n        async () => {\n          await restartClient(context);\n        }\n      );\n      vscode.window.setStatusBarMessage(\"Vitte server restarted successfully.\", 3000);\n    }),\n    vscode.commands.registerCommand(\"vitte.runAction\", async () => {\n      const pick = await vscode.window.showQuickPick([\n        {\n          label: \"Format document\",\n          description: \"editor.action.formatDocument\",\n          detail: \"Apply the configured formatter to the active file.\",\n          action: \"format\",\n        },\n        {\n          label: \"Organize imports\",\n          description: \"editor.action.organizeImports\",\n          detail: \"Trie et nettoie les imports du document courant.\",\n          action: \"organizeImports\",\n        },\n        {\n          label: \"Fix all\",\n          description: \"source.fixAll\",\n          detail: \"Run available quick fixes.\",\n          action: \"fixAll\",\n        }\n      ], { title: \"Vitte: run a quick action\" });\n      if (!pick) return;\n      await runBuiltinAction(pick.action);\n    }),\n    vscode.commands.registerCommand(\"vitte.runActionWithArgs\", async () => {\n      const action = await vscode.window.showInputBox({ prompt: \"Action (format | organizeImports | fixAll)\", value: \"format\" });\n      if (!action) return;\n      await runBuiltinAction(action.trim());\n    }),\n    vscode.commands.registerCommand(\"vitte.formatDocument\", async () => runBuiltinAction(\"format\")),\n    vscode.commands.registerCommand(\"vitte.organizeImports\", async () => runBuiltinAction(\"organizeImports\")),\n    vscode.commands.registerCommand(\"vitte.fixAll\", async () => runBuiltinAction(\"fixAll\")),\n    vscode.commands.registerCommand(\"vitte.renameSymbol\", async () => {\n      if (!vscode.window.activeTextEditor) return;\n      await vscode.commands.executeCommand(\"editor.action.rename\");\n    }),\n    vscode.commands.registerCommand(\"vitte.applyEditSample\", async () => {\n      const editor = vscode.window.activeTextEditor; if (!editor) return;\n      const edit = new vscode.WorkspaceEdit();\n      edit.insert(editor.document.uri, new vscode.Position(0, 0), \"// Edited by Vitte sample\\n\");\n      await vscode.workspace.applyEdit(edit);\n    }),\n    vscode.commands.registerCommand(\"vitte.progressSample\", async () => {\n      await vscode.window.withProgress({ location: vscode.ProgressLocation.Window, title: \"Vitte: Running task\" }, async (p) => {\n        p.report({ message: \"Step 1/3\" }); await sleep(250);\n        p.report({ message: \"Step 2/3\" }); await sleep(250);\n        p.report({ message: \"Step 3/3\" }); await sleep(250);\n      });\n    }),\n    vscode.commands.registerCommand(\"vitte.showInfo\", async () => {\n      const cfg = vscode.workspace.getConfiguration(\"vitte\");\n      const trace = cfg.get<string>(\"trace.server\", \"off\");\n      await vscode.window.showInformationMessage(`Vitte LSP — trace: ${trace}`);\n    }),\n    vscode.commands.registerCommand(\"vitte.debug.runFile\", async () => { await runDebugCurrentFile(); }),\n    vscode.commands.registerCommand(\"vitte.debug.attachServer\", async () => { await attachDebugServer(); }),\n  );\n\n  // Refresh status depending on the active editor\n  context.subscriptions.push(vscode.window.onDidChangeActiveTextEditor(updateStatusText));\n  updateStatusText(vscode.window.activeTextEditor ?? undefined);\n\n  // Relance si config Vitte change\n  context.subscriptions.push(vscode.workspace.onDidChangeConfiguration(async (e) => {\n    if (e.affectsConfiguration(\"vitte.commandShortcuts\")) {\n      updateCommandButtons(context);\n    }\n    if (e.affectsConfiguration(\"vitte\")) {\n      await restartClient(context);\n    }\n  }));\n\n  // Diagnostics view for both beginners and power users\n  registerDiagnosticsView(context);\n  registerModuleExplorerView(context);\n  registerMetricsView(context, () => client);\n  context.subscriptions.push(vscode.languages.onDidChangeDiagnostics(() => refreshDiagnosticsStatus()));\n\n  if (process.env.VSCODE_TESTING === \"1\") {\n    const api: ExtensionApi = {\n      getStatusText: () => statusItem?.text ?? \"\",\n      getStatusTooltip: () => {\n        const tip = statusItem?.tooltip;\n        if (typeof tip === \"string\") return tip;\n        if (tip instanceof vscode.MarkdownString) {\n          return tip.value ?? \"\";\n        }\n        return \"\";\n      },\n      getClientState: () => client?.state,\n      runAction: async (action: string) => {\n        await runBuiltinAction(action);\n      },\n      restart: async () => {\n        await restartClient(context);\n      },\n      resolveServerModuleForTest: (ctx) => resolveServerModule(ctx as vscode.ExtensionContext),\n    };\n    return api;\n  }\n\n  return undefined;\n}\n\nexport async function deactivate(): Promise<void> {\n  try { await client?.stop(); } catch { /* noop */ }\n  client = undefined;\n  for (const watcher of fileWatchers) {\n    try { watcher.dispose(); } catch { /* noop */ }\n  }\n  fileWatchers = [];\n}\n\n/* --------------------------------- LSP ----------------------------------- */\n\nfunction resolveServerModule(context: vscode.ExtensionContext): string {\n  // Permet d’overrider via settings: vitte.serverPath\n  const cfgPath = vscode.workspace.getConfiguration(\"vitte\").get<string>(\"serverPath\");\n  if (cfgPath) {\n    if (fs.existsSync(cfgPath)) {\n      logServerResolution(`Using custom server: ${cfgPath}`);\n      return cfgPath;\n    }\n    logServerResolution(`Custom server path not found: ${cfgPath}`);\n  }\n  const nested = context.asAbsolutePath(path.join(\"server\", \"out\", \"server.js\"));\n  if (fs.existsSync(nested)) {\n    logServerResolution(`Using packaged server (server/out): ${nested}`);\n    return nested;\n  }\n  const bundled = context.asAbsolutePath(path.join(\"out\", \"server.js\"));\n  if (fs.existsSync(bundled)) {\n    logServerResolution(`Using embedded server: ${bundled}`);\n    return bundled;\n  }\n  const message = \"Module serveur Vitte introuvable (out/server.js ou server/out/server.js)\";\n  logServerResolution(message);\n  throw new Error(message);\n}\n\nasync function startClient(context: vscode.ExtensionContext): Promise<void> {\n  if (client) return; // already running\n\n  const serverModule = resolveServerModule(context);\n  const debugOptions = { execArgv: [\"--nolazy\", \"--inspect=6009\"] };\n  const serverOptions: ServerOptions = {\n    run:   { module: serverModule, transport: TransportKind.ipc },\n    debug: { module: serverModule, transport: TransportKind.ipc, options: debugOptions },\n  };\n\n  const documentSelector: DocumentSelector = LANGUAGES.flatMap((id) => ([\n    { scheme: \"file\", language: id },\n    { scheme: \"untitled\", language: id },\n    { scheme: \"vscode-notebook-cell\", language: id }\n  ]));\n  const watchers = ensureFileWatchers(context);\n\n  const clientOptions: LanguageClientOptions = {\n    documentSelector,\n    outputChannel: output,\n    revealOutputChannelOn: RevealOutputChannelOn.Never,\n    synchronize: {\n      configurationSection: \"vitte\",\n      fileEvents: watchers\n    },\n    middleware: {\n      provideDocumentFormattingEdits: async (\n        doc: vscode.TextDocument,\n        options: vscode.FormattingOptions,\n        token: vscode.CancellationToken,\n        next: ProvideDocumentFormattingEditsSignature\n      ) => {\n        try { return await next(doc, options, token); } catch {\n          await vscode.commands.executeCommand(\"editor.action.formatDocument\");\n          return [];\n        }\n      },\n    },\n    initializationOptions: {\n      // Extension → Serveur: options d’init (libre)\n    },\n  };\n\n  client = new LanguageClient(\"vitte-lsp\", \"Vitte Language Server\", serverOptions, clientOptions);\n\n  client.onTelemetry((e: unknown) => {\n    output.appendLine(`[telemetry] ${JSON.stringify(e)}`);\n  });\n\n  wireClientState(client);\n\n  await client.start();\n}\n\nasync function restartClient(context: vscode.ExtensionContext): Promise<void> {\n  if (client) {\n    setStatusBase(\"$(sync)\", \"Vitte LSP: restarting…\");\n    try { await client.stop(); } catch { /* noop */ }\n    client = undefined;\n  }\n  await startClient(context);\n}\n\nfunction wireClientState(c: LanguageClient): void {\n  c.onDidChangeState((e: { oldState: ClientState; newState: ClientState }) => {\n    if (e.newState === ClientState.Starting) {\n      setStatusBase(\"$(gear)\", \"Vitte LSP: starting\");\n    } else if (e.newState === ClientState.Running) {\n      setStatusBase(\"$(check)\", \"Vitte LSP: running\");\n    } else if (e.newState === ClientState.Stopped) {\n      setStatusBase(\"$(debug-stop)\", \"Vitte LSP: stopped\");\n    }\n  });\n\n  c.onNotification(\"vitte/status\", (msg: { text?: string; tooltip?: string }) => {\n    const text = typeof msg?.text === \"string\" ? msg.text : undefined;\n    const tooltip = typeof msg?.tooltip === \"string\" ? msg.tooltip : undefined;\n    if (text !== undefined || tooltip !== undefined) {\n      setStatusOverride(text, tooltip);\n    }\n  });\n\n  c.onNotification(\"vitte/log\", (msg: unknown) => {\n    output.appendLine(typeof msg === \"string\" ? msg : JSON.stringify(msg));\n  });\n}\n\n/* ----------------------------- Actions utilitaires ------------------------ */\n\nasync function runBuiltinAction(action: string): Promise<void> {\n  const editor = vscode.window.activeTextEditor;\n  if (!editor) {\n    void vscode.window.showWarningMessage(\"Open a Vitte/Vit document before running this action.\");\n    return;\n  }\n  const languageId = editor.document.languageId;\n  if (!LANGUAGE_SET.has(languageId)) {\n    void vscode.window.showWarningMessage(\"Les actions Vitte ne sont disponibles que pour les fichiers Vitte/Vit.\");\n    return;\n  }\n  switch (action) {\n    case \"format\":\n      await vscode.commands.executeCommand(\"editor.action.formatDocument\");\n      return;\n    case \"organizeImports\":\n      await vscode.commands.executeCommand(\"editor.action.organizeImports\");\n      return;\n    case \"fixAll\":\n      await vscode.commands.executeCommand(\"editor.action.codeAction\", {\n        kind: vscode.CodeActionKind.SourceFixAll.value,\n        apply: \"first\"\n      });\n      return;\n    default:\n      void vscode.window.showWarningMessage(`Action inconnue: ${action}`);\n      return;\n  }\n}\n\nfunction sleep(ms: number): Promise<void> { return new Promise(res => setTimeout(res, ms)); }\n\nfunction updateStatusText(editor?: vscode.TextEditor): void {\n  const lang = editor?.document?.languageId;\n  if (lang && LANGUAGE_SET.has(lang)) {\n    setStatusLanguageSuffix(lang);\n    return;\n  }\n  setStatusLanguageSuffix(\"\");\n}\n\n/* -------------------------------- Debug demo ------------------------------ */\n\nasync function runDebugCurrentFile(): Promise<void> {\n  const editor = vscode.window.activeTextEditor; if (!editor) return;\n  const folder = vscode.workspace.workspaceFolders?.[0];\n  const cfg: vscode.DebugConfiguration = {\n    type: \"vitte\",\n    name: \"Vitte: Launch current file\",\n    request: \"launch\",\n    program: editor.document.fileName,\n    cwd: folder?.uri.fsPath ?? path.dirname(editor.document.fileName),\n    stopOnEntry: true,\n    args: []\n  };\n  await vscode.debug.startDebugging(folder, cfg);\n}\n\nasync function attachDebugServer(): Promise<void> {\n  const portStr = await vscode.window.showInputBox({ prompt: \"Port du serveur Vitte\", value: \"9333\" });\n  if (!portStr) return;\n  const folder = vscode.workspace.workspaceFolders?.[0];\n  const cfg: vscode.DebugConfiguration = {\n    type: \"vitte\",\n    name: \"Vitte: Attach\",\n    request: \"attach\",\n    port: Number.parseInt(portStr, 10),\n  };\n  if (!Number.isInteger(cfg.port) || (cfg.port as number) <= 0) {\n    void vscode.window.showErrorMessage(\"Port Vitte invalide.\");\n    return;\n  }\n  await vscode.debug.startDebugging(folder, cfg);\n}\n"]}