{"version":3,"file":"commands.js","sourceRoot":"","sources":["../../src/commands.ts"],"names":[],"mappings":"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","sourcesContent":["/* --------------------------------------------------------------------------\r\n * commands.ts ‚Äî gestion centralis√©e des commandes LSP (serveur)\r\n * Inspir√© de C/C++, rust-analyzer, TypeScript\r\n * -------------------------------------------------------------------------- */\r\n\r\nimport { TextEdit, Range, Position } from \"vscode-languageserver/node\";\nimport type {\n  Connection,\n  ExecuteCommandParams,\n  WorkspaceEdit,\n  InitializeParams,\n  ClientCapabilities\n} from \"vscode-languageserver/node\";\n\r\n/* =========================================\r\n * D√©clarations officielles des commandes\r\n * ========================================= */\r\n\r\nexport const VITTE_COMMANDS = {\r\n  SHOW_SERVER_LOG: \"vitte.showServerLog\",\r\n  RESTART_SERVER: \"vitte.restartServer\",\r\n  RUN_ACTION: \"vitte.runAction\",\r\n  RUN_ACTION_ARGS: \"vitte.runActionWithArgs\",\r\n  DEBUG_RUN_FILE: \"vitte.debug.runFile\",\r\n  DEBUG_ATTACH: \"vitte.debug.attachServer\",\r\n  FORMAT_DOC: \"vitte.formatDocument\",\r\n  ORGANIZE_IMPORTS: \"vitte.organizeImports\",\r\n  FIX_ALL: \"vitte.fixAll\",\r\n  RENAME_SYMBOL: \"vitte.renameSymbol\",\r\n  APPLY_EDIT_SAMPLE: \"vitte.applyEditSample\",\r\n  PROGRESS_SAMPLE: \"vitte.progressSample\",\r\n  SHOW_INFO: \"vitte.showInfo\"\r\n} as const;\r\n\r\nexport type CommandId = typeof VITTE_COMMANDS[keyof typeof VITTE_COMMANDS];\r\n\r\n/* =========================================\r\n * Charges utiles typ√©es\r\n * ========================================= */\r\n\r\ninterface DebugAttachArgs {\r\n  host?: string;     // default 127.0.0.1\r\n  port?: number;     // default 6009\r\n  timeoutMs?: number; // default 10000\r\n}\r\n\r\ninterface RenameArgs {\r\n  uri: string;\r\n  newName: string;\r\n}\r\n\r\ninterface PosLike { line: number; character: number; }\r\ninterface RangeLike { start: PosLike; end: PosLike; }\r\n\r\ntype FormatArgs =\r\n  | string\r\n  | { uri: string; range?: RangeLike };\r\n\r\ninterface ApplyEditSampleArgs {\r\n  uri: string;\r\n  headerText?: string; // default \"// edited by Vitte LSP\\n\"\r\n}\r\n\r\n/* =========================================\r\n * API d‚Äôenregistrement + capabilities\r\n * ========================================= */\r\n\r\ninterface CommandResult {\n  ok: boolean;\n}\n\nexport function registerCommands(connection: Connection): CommandId[] {\n  connection.onExecuteCommand(async (params: ExecuteCommandParams) => {\n    try {\n      return await handleCommand(connection, params);\n    } catch (err: unknown) {\n      const message = formatError(err);\n      connection.console.error(`Erreur commande ${params.command}: ${message}`);\n      connection.window.showErrorMessage(`Commande \"${params.command}\": ${message}`);\n      return null;\n    }\n  });\n  return Object.values(VITTE_COMMANDS);\n}\n\r\n/** √Ä utiliser dans la r√©ponse d'initialize: executeCommandProvider */\r\nexport function buildExecuteCommandProvider() {\r\n  return { commands: Object.values(VITTE_COMMANDS) as string[] };\r\n}\r\n\r\n/** Optionnel: log des capabilities client */\r\nexport function logClientCaps(params: InitializeParams, connection: Connection) {\r\n  const caps: ClientCapabilities | undefined = params.capabilities;\r\n  connection.console.info(`Client: ${params.clientInfo?.name ?? \"unknown\"} v${params.clientInfo?.version ?? \"?\"}`);\r\n  connection.console.info(`Workspace edits supported: ${!!caps?.workspace}`);\r\n}\r\n\r\n/* =========================================\r\n * Dispatcher central\r\n * ========================================= */\r\n\r\nasync function handleCommand(connection: Connection, params: ExecuteCommandParams): Promise<CommandResult | null> {\n  const { command, arguments: rawArgs } = params;\n  const args = Array.isArray(rawArgs) ? (rawArgs as unknown[]) : undefined;\n\r\n  switch (command) {\r\n    case VITTE_COMMANDS.SHOW_SERVER_LOG:\r\n      connection.console.info(\"üìú Vitte: ouverture du journal LSP (stub).\");\r\n      return ok();\r\n\r\n    case VITTE_COMMANDS.RESTART_SERVER:\r\n      connection.console.warn(\"üîÑ Vitte: demande de red√©marrage du serveur (stub).\");\r\n      return ok();\r\n\r\n    case VITTE_COMMANDS.RUN_ACTION:\r\n      connection.console.log(\"‚ö° Vitte: ex√©cution d‚Äôune action rapide g√©n√©rique.\");\r\n      return ok();\r\n\r\n    case VITTE_COMMANDS.RUN_ACTION_ARGS:\r\n      connection.console.log(`‚ö° Vitte: action avec args: ${safeJson(args)}`);\r\n      return ok();\r\n\r\n    case VITTE_COMMANDS.DEBUG_RUN_FILE: {\r\n      const uri = readStringArg(args, 0);\r\n      return debugRunFile(connection, uri);\r\n    }\r\n\r\n    case VITTE_COMMANDS.DEBUG_ATTACH: {\r\n      const a = readObjectArg<DebugAttachArgs>(args, 0) ?? {};\r\n      return debugAttach(connection, a);\r\n    }\r\n\r\n    case VITTE_COMMANDS.FORMAT_DOC: {\r\n      const a = readFormatArgs(args, 0);\r\n      return formatDocument(connection, a);\r\n    }\r\n\r\n    case VITTE_COMMANDS.ORGANIZE_IMPORTS: {\r\n      const uri = readUri(args, 0);\r\n      return organizeImports(connection, uri);\r\n    }\r\n\r\n    case VITTE_COMMANDS.FIX_ALL: {\r\n      const uri = readUri(args, 0);\r\n      return fixAllProblems(connection, uri);\r\n    }\r\n\r\n    case VITTE_COMMANDS.RENAME_SYMBOL: {\r\n      const a = readObjectArg<RenameArgs>(args, 0);\r\n      if (!a?.uri || !a?.newName) {\r\n        throw new Error(\"renameSymbol: args invalides. Attendu { uri, newName }.\");\r\n      }\r\n      return renameSymbol(connection, a.uri, a.newName);\r\n    }\r\n\r\n    case VITTE_COMMANDS.APPLY_EDIT_SAMPLE: {\r\n      const a = readObjectArg<ApplyEditSampleArgs>(args, 0);\r\n      if (!a?.uri) throw new Error(\"applyEditSample: uri manquant.\");\r\n      return applyEditSample(connection, a.uri, a.headerText);\r\n    }\r\n\r\n    case VITTE_COMMANDS.PROGRESS_SAMPLE:\r\n      return progressSample(connection);\r\n\r\n    case VITTE_COMMANDS.SHOW_INFO: {\n      const msg = readStringArg(args, 0) ?? \"Vitte: message d'information.\";\n      connection.window.showInformationMessage(msg);\n      return ok();\n    }\n\r\n    default:\r\n      connection.console.warn(`Commande non reconnue: ${command}`);\r\n      return null;\r\n  }\r\n}\r\n\r\n/* =========================================\r\n * Impl√©mentations (stubs r√©alistes)\r\n * ========================================= */\r\n\r\nfunction debugRunFile(connection: Connection, uri?: string): CommandResult {\n  if (!uri) {\n    connection.console.error(\"üêû debug.runFile: aucun fichier fourni.\");\n    return fail();\n  }\n  connection.console.log(`üêû Lancement debug sur fichier: ${uri}`);\r\n  return ok();\r\n}\r\n\r\nfunction debugAttach(connection: Connection, a: DebugAttachArgs): CommandResult {\n  const host = a.host ?? \"127.0.0.1\";\n  const port = a.port ?? 6009;\r\n  const timeout = a.timeoutMs ?? 10_000;\r\n  connection.console.log(`üêû Attach au serveur debug ${host}:${port} (timeout ${timeout}ms).`);\r\n  return ok();\r\n}\r\n\r\n/** Formatage: exemple d‚Äô√©dition ‚Äî ins√®re un header au d√©but du fichier ou de la plage */\r\nasync function formatDocument(connection: Connection, arg?: FormatArgs): Promise<CommandResult> {\n  if (!arg) return ok();\r\n  const { uri, range } = normalizeFormatArgs(arg);\r\n  const where = range ? range.start : Position.create(0, 0);\r\n\r\n  const edit: WorkspaceEdit = {\r\n    changes: {\r\n      [uri]: [TextEdit.insert(where, \"// formatted by Vitte LSP\\n\")]\r\n    }\r\n  };\r\n  await connection.workspace.applyEdit(edit);\r\n  return ok();\r\n}\r\n\r\n/** Organize imports: squelette ‚Äî √† remplacer par analyse r√©elle */\r\nasync function organizeImports(connection: Connection, uri?: string): Promise<CommandResult> {\n  if (!uri) return ok();\r\n  connection.console.log(`üì¶ Organize imports sur ${uri}`);\r\n\r\n  const edit: WorkspaceEdit = {\r\n    changes: {\r\n      [uri]: [\r\n        TextEdit.replace(\r\n          Range.create(Position.create(0, 0), Position.create(0, Number.MAX_SAFE_INTEGER)),\r\n          \"import std.modules.core\\n\"\r\n        )\r\n      ]\r\n    }\r\n  };\r\n  await connection.workspace.applyEdit(edit);\r\n  return ok();\r\n}\r\n\r\n/** Fix all: correctif g√©n√©rique d‚Äôexemple */\r\nasync function fixAllProblems(connection: Connection, uri?: string): Promise<CommandResult> {\n  if (!uri) return ok();\r\n  connection.console.log(`üõ† Fix all sur ${uri}`);\r\n\r\n  const edit: WorkspaceEdit = {\r\n    changes: { [uri]: [TextEdit.insert(Position.create(0, 0), \"// fix-all applied\\n\")] }\r\n  };\r\n  await connection.workspace.applyEdit(edit);\r\n  return ok();\r\n}\r\n\r\n/** Rename: d√©mo ‚Äî remplacer par une indexation et documentChanges r√©els */\r\nasync function renameSymbol(connection: Connection, uri: string, newName: string): Promise<CommandResult> {\n  connection.console.log(`‚úèÔ∏è Rename dans ${uri} ‚Üí ${newName}`);\r\n\r\n  const edit: WorkspaceEdit = {\r\n    changes: { [uri]: [TextEdit.insert(Position.create(0, 0), `// rename to: ${newName}\\n`)] }\r\n  };\r\n  await connection.workspace.applyEdit(edit);\r\n  return ok();\r\n}\r\n\r\n/** Exemple d‚Äô√©dition param√©trable via settings (headerText) */\r\nasync function applyEditSample(connection: Connection, uri: string, headerText?: string): Promise<CommandResult> {\n  const text = headerText ?? \"// edited by Vitte LSP\\n\";\r\n  const edit: WorkspaceEdit = {\r\n    changes: { [uri]: [TextEdit.insert(Position.create(0, 0), text)] }\r\n  };\r\n  await connection.workspace.applyEdit(edit);\r\n  return ok();\r\n}\r\n\r\n/** D√©mo de progression serveur ‚Üí client */\r\nasync function progressSample(connection: Connection): Promise<CommandResult> {\n  const progress = await connection.window.createWorkDoneProgress();\n  progress.begin(\"Vitte: pr√©paration\", 0, \"initialisation‚Ä¶\", true);\r\n  await delay(300);\r\n  progress.report(25, \"analyse‚Ä¶\");\r\n  await delay(300);\r\n  progress.report(60, \"application des changements‚Ä¶\");\r\n  await delay(300);\r\n  progress.report(90, \"presque termin√©‚Ä¶\");\r\n  await delay(200);\r\n  progress.done();\n  connection.window.showInformationMessage(\"Vitte: t√¢che termin√©e.\");\n  return ok();\r\n}\r\n\r\n/* =========================================\r\n * Utilitaires g√©n√©riques\r\n * ========================================= */\r\n\r\nfunction readStringArg(args: unknown[] | undefined, index: number): string | undefined {\n  const v = args?.[index];\n  return typeof v === \"string\" ? v : undefined;\n}\n\nfunction readObjectArg<T>(args: unknown[] | undefined, index: number): T | undefined {\n  const v = args?.[index];\n  return isRecord(v) ? (v as T) : undefined;\n}\n\nfunction readUri(args: unknown[] | undefined, index: number): string | undefined {\n  const uri = readStringArg(args, index);\n  if (!uri) return undefined;\n  if (uri.startsWith(\"file://\") || uri.includes(\"://\")) return uri;\n  return \"file://\" + uri;\n}\n\nfunction readFormatArgs(args: unknown[] | undefined, index: number): FormatArgs | undefined {\n  const v = args?.[index];\n  if (typeof v === \"string\") return v;\n  if (isRecord(v) && typeof v.uri === \"string\") {\n    const candidateRange = (v as { range?: unknown }).range;\n    const range = isRangeLike(candidateRange) ? candidateRange : undefined;\n    return { uri: v.uri, range };\n  }\n  return undefined;\n}\n\nfunction normalizeFormatArgs(arg: FormatArgs): { uri: string; range?: Range } {\n  if (typeof arg === \"string\") return { uri: arg };\n  const uri = arg.uri;\n  const r = arg.range\n    ? Range.create(\n        Position.create(arg.range.start.line, arg.range.start.character),\n        Position.create(arg.range.end.line, arg.range.end.character)\n      )\n    : undefined;\n  return { uri, range: r };\r\n}\r\n\r\nfunction safeJson(v: unknown): string {\n  try {\n    return JSON.stringify(v);\n  } catch {\n    return String(v);\n  }\n}\n\nfunction formatError(err: unknown): string {\n  if (err instanceof Error && typeof err.message === \"string\") {\n    return err.message;\n  }\n  return String(err);\n}\n\nfunction delay(ms: number): Promise<void> {\n  return new Promise<void>(r => setTimeout(r, ms));\n}\n\nfunction ok(): CommandResult {\n  return { ok: true };\n}\n\nfunction fail(): CommandResult {\n  return { ok: false };\n}\n\nfunction isRecord(value: unknown): value is Record<string, unknown> {\n  return typeof value === \"object\" && value !== null;\n}\n\nfunction isPosLike(value: unknown): value is PosLike {\n  return (\n    isRecord(value) &&\n    typeof value.line === \"number\" &&\n    typeof value.character === \"number\"\n  );\n}\n\nfunction isRangeLike(value: unknown): value is RangeLike {\n  return (\n    isRecord(value) &&\n    isPosLike(value.start) &&\n    isPosLike(value.end)\n  );\n}\n"]}