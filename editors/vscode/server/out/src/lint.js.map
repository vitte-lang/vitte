{"version":3,"file":"lint.js","sourceRoot":"","sources":["../../src/lint.ts"],"names":[],"mappings":"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","sourcesContent":["// lint.ts — Linter minimal pour Vitte/Vit (LSP), robuste, configurable, directives inline\n\r\nimport {\n  DiagnosticSeverity,\n  Range,\n  Position,\n} from \"vscode-languageserver/node\";\nimport type { Diagnostic } from \"vscode-languageserver/node\";\nimport { RESERVED_WORDS } from \"./languageFacts.js\";\n\r\n/* ============================== Config ==================================== */\r\n\r\nexport interface LintOptions {\n  maxLineLength?: number;                // 120 par défaut\n  allowTabs?: boolean;                   // false par défaut\n  allowTrailingWhitespace?: boolean;     // false par défaut\n}\n\r\nconst DEFAULTS: Required<LintOptions> = {\r\n  maxLineLength: 120,\r\n  allowTabs: false,\r\n  allowTrailingWhitespace: false,\r\n};\r\n\r\n/* =============================== Regex ==================================== */\r\n\r\nconst rxTrailingWS = /[ \\t]+$/;\r\nconst rxTab = /\\t/;\r\nconst rxTodo = /(^|\\s)(TODO|FIXME|XXX)(:|\\b)/;\r\nconst rxLineEndSemicolon = /;\\s*$/;\r\n\r\nconst rxIdent = /[A-Za-z_][A-Za-z0-9_]*/g;\r\nconst rxNumber =\r\n  /(?:0x[0-9A-Fa-f](?:[0-9A-Fa-f_])*)|(?:0b[01](?:[01_])*)|(?:\\d(?:[\\d_])*(?:\\.(?:\\d(?:[\\d_])*))?(?:[eE][+-]?\\d(?:[\\d_])*)?)/g;\r\n\r\nconst rxString = /\"(?:\\\\.|[^\"\\\\])*\"/g;\r\nconst rxChar = /'(?:\\\\.|[^'\\\\])'/g;\r\n\r\nconst rxCommentLine = /\\/\\/[^\\n]*/g;\r\nconst rxCommentDoc = /\\/\\/![^\\n]*/g;\r\nconst rxCommentBlock = /\\/\\*[\\s\\S]*?\\*\\//g;\r\n\r\n/* ============================ Directives ================================== */\r\n/**\r\n * Directives supportées:\r\n *  - Ligne:  // vitte-lint:disable-next-line rule1,rule2\r\n *  - Bloc:   /* vitte-lint:disable rule1,rule2 *\\/ ... /* vitte-lint:enable *\\/\r\n *  - Pragma: // vitte-lint maxLineLength=100 allowTabs=true allowTrailingWhitespace=true\r\n */\r\n\r\nconst RULES = {\r\n  Tabs: \"format.tabs\",\r\n  TrailingWhitespace: \"format.trailingWhitespace\",\r\n  LineLength: \"format.lineLength\",\r\n  Todo: \"note.todo\",\r\n  Brackets: \"syntax.brackets\",\r\n  Number: \"lex.number\",\r\n  IdentKeywordShadow: \"style.ident.keywordShadow\",\r\n  Semicolon: \"style.semicolon\",\r\n} as const;\r\n\r\ntype RuleId = typeof RULES[keyof typeof RULES];\r\n\r\n/** Fix TS2345: disposer d’un garde de type pour convertir un `string` en `RuleId`. */\r\nconst ALL_RULES: readonly RuleId[] = Object.values(RULES) as readonly RuleId[];\r\nfunction isRuleId(x: string): x is RuleId {\r\n  // cast en readonly string[] uniquement pour l’opération includes, tout en conservant RuleId côté retour\r\n  return (ALL_RULES as readonly string[]).includes(x);\r\n}\r\n\r\ntype DisableMap = Map<number, Set<RuleId>>;\ninterface DisableRanges { byRule: Map<RuleId, { start: number; end: number }[]>; }\n\r\ninterface Pragmas {\r\n  overrides: Partial<LintOptions>;\r\n}\r\n\r\n/* =============================== Core ===================================== */\r\n\r\nexport function lintText(\r\n  text: string,\r\n  uri = \"file://unknown\",\r\n  opts: LintOptions = {}\r\n): Diagnostic[] {\r\n  const pragmas = parsePragmas(text);\r\n  const cfg: Required<LintOptions> = { ...DEFAULTS, ...pragmas.overrides, ...opts };\r\n\r\n  const { lineDisables, blockDisables } = collectDisables(text);\r\n  const diags: Diagnostic[] = [];\r\n\r\n  const lines = text.split(/\\r?\\n/);\r\n\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const line = lines[i];\r\n\r\n    if (!isDisabled(i, RULES.Tabs, lineDisables, blockDisables)) {\r\n      const m = rxTab.exec(line);\r\n      if (!cfg.allowTabs && m) {\r\n        diags.push(diag(i, m.index, i, m.index + 1,\r\n          \"Tabulation détectée. Utiliser des espaces.\",\r\n          DiagnosticSeverity.Warning, uri, RULES.Tabs));\r\n      }\r\n    }\r\n\r\n    if (!isDisabled(i, RULES.TrailingWhitespace, lineDisables, blockDisables)) {\n      const trailing = rxTrailingWS.exec(line);\n      if (!cfg.allowTrailingWhitespace && trailing) {\n        const start = trailing.index ?? (line.length - trailing[0].length);\n        diags.push(diag(i, start, i, line.length,\n          \"Espaces en fin de ligne.\",\n          DiagnosticSeverity.Hint, uri, RULES.TrailingWhitespace));\n      }\n    }\n\r\n    if (!isDisabled(i, RULES.LineLength, lineDisables, blockDisables)) {\r\n      if (line.length > cfg.maxLineLength) {\r\n        diags.push(diag(i, cfg.maxLineLength, i, line.length,\r\n          `Ligne trop longue (${line.length} > ${cfg.maxLineLength}).`,\r\n          DiagnosticSeverity.Information, uri, RULES.LineLength));\r\n      }\r\n    }\r\n\r\n    if (!isDisabled(i, RULES.Todo, lineDisables, blockDisables)) {\n      const todo = rxTodo.exec(line);\n      if (todo) {\n        const idx = todo.index ?? 0;\n        diags.push(diag(i, idx, i, idx + todo[0].length,\n          \"Marqueur de tâche détecté.\",\n          DiagnosticSeverity.Hint, uri, RULES.Todo));\n      }\r\n    }\r\n  }\r\n\r\n  const stripped = stripNonCode(text);\r\n\r\n  diags.push(...checkBrackets(stripped, uri, lineDisables, blockDisables));\r\n  diags.push(...checkIdentifiersAndKeywords(stripped, uri, lineDisables, blockDisables));\r\n  diags.push(...checkSemicolonHeuristics(stripped, uri, lineDisables, blockDisables));\r\n\r\n  return diags;\r\n}\r\n\r\n/* ============================= Helpers ==================================== */\r\n\r\nfunction diag(\r\n  line: number, chStart: number, lineEnd: number, chEnd: number,\r\n  message: string, severity: DiagnosticSeverity, uri: string, code: RuleId\r\n): Diagnostic {\r\n  return {\r\n    range: Range.create(Position.create(line, chStart), Position.create(lineEnd, chEnd)),\r\n    message,\r\n    severity,\r\n    source: \"vitte-lint\",\r\n    code,\r\n  };\r\n}\r\n\r\nfunction stripNonCode(src: string): string {\r\n  return src\r\n    .replace(rxCommentBlock, (m) => \" \".repeat(m.length))\r\n    .replace(rxCommentDoc, (m) => \" \".repeat(m.length))\r\n    .replace(rxCommentLine, (m) => \" \".repeat(m.length))\r\n    .replace(rxString, (m) => \" \".repeat(m.length))\r\n    .replace(rxChar, (m) => \" \".repeat(m.length));\r\n}\r\n\r\n/* ============================ Brackets ==================================== */\r\n\r\nfunction checkBrackets(\r\n  text: string,\r\n  uri: string,\r\n  lineDisables: DisableMap,\r\n  blockDisables: DisableRanges\r\n): Diagnostic[] {\r\n  const diags: Diagnostic[] = [];\r\n  const pairs: Record<string, string> = { \")\": \"(\", \"]\": \"[\", \"}\": \"{\" };\r\n  const openers = new Set([\"(\", \"[\", \"{\"]);\r\n  const stack: { ch: string; line: number; col: number }[] = [];\r\n\r\n  const lines = text.split(/\\r?\\n/);\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const L = lines[i];\r\n    for (let j = 0; j < L.length; j++) {\r\n      const c = L[j];\r\n      if (openers.has(c)) stack.push({ ch: c, line: i, col: j });\r\n      else if (c in pairs) {\r\n        if (stack.length === 0) {\r\n          if (!isDisabled(i, RULES.Brackets, lineDisables, blockDisables)) {\r\n            diags.push(diag(i, j, i, j + 1,\r\n              `Fermeture inattendue '${c}'.`,\r\n              DiagnosticSeverity.Error, uri, RULES.Brackets));\r\n          }\r\n        } else {\r\n          const top = stack.pop()!;\r\n          if (pairs[c] !== top.ch) {\r\n            if (!isDisabled(i, RULES.Brackets, lineDisables, blockDisables)) {\r\n              diags.push(diag(i, j, i, j + 1,\r\n                `Attendu '${matchingCloser(top.ch)}' avant '${c}'.`,\r\n                DiagnosticSeverity.Error, uri, RULES.Brackets));\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  for (const unclosed of stack) {\r\n    if (!isDisabled(unclosed.line, RULES.Brackets, lineDisables, blockDisables)) {\r\n      diags.push(diag(unclosed.line, unclosed.col, unclosed.line, unclosed.col + 1,\r\n        `Délimiteur non fermé '${unclosed.ch}'.`,\r\n        DiagnosticSeverity.Error, uri, RULES.Brackets));\r\n    }\r\n  }\r\n  return diags;\r\n}\r\n\r\nfunction matchingCloser(open: string): string {\r\n  if (open === \"(\") return \")\";\r\n  if (open === \"[\") return \"]\";\r\n  return \"}\";\r\n}\r\n\r\n/* ===================== Idents, nombres, mots-clés ========================= */\r\n\r\nfunction checkIdentifiersAndKeywords(\r\n  text: string,\r\n  uri: string,\r\n  lineDisables: DisableMap,\r\n  blockDisables: DisableRanges\r\n): Diagnostic[] {\r\n  const diags: Diagnostic[] = [];\r\n  const lines = text.split(/\\r?\\n/);\r\n\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const L = lines[i];\r\n\r\n    if (!isDisabled(i, RULES.Number, lineDisables, blockDisables)) {\r\n      for (const m of L.matchAll(rxNumber)) {\r\n        const tok = m[0];\r\n        if (tok.includes(\"__\") || tok.startsWith(\"_\") || tok.endsWith(\"_\")) {\n          const s = m.index ?? 0;\n          diags.push(diag(i, s, i, s + tok.length,\n            \"Littéral numérique invalide (underscore mal placé).\",\n            DiagnosticSeverity.Warning, uri, RULES.Number));\n        }\n      }\r\n    }\r\n\r\n    if (!isDisabled(i, RULES.IdentKeywordShadow, lineDisables, blockDisables)) {\r\n      for (const m of L.matchAll(rxIdent)) {\r\n        const tok = m[0];\r\n        const idx = m.index ?? 0;\r\n        if (RESERVED_WORDS.has(tok)) continue;\n\n        for (const kw of RESERVED_WORDS) {\n          if (tok === kw) continue;\r\n          if (tok.startsWith(kw) && tok.length > kw.length && /[A-Za-z0-9_]/.test(tok[kw.length])) continue;\r\n          if (tok.endsWith(kw) && tok.length > kw.length) {\r\n            diags.push(diag(i, idx, i, idx + tok.length,\r\n              `Éviter d'incorporer le mot-clé '${kw}' dans un identifiant.`,\r\n              DiagnosticSeverity.Hint, uri, RULES.IdentKeywordShadow));\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return diags;\r\n}\r\n\r\n/* ======================== Heuristique point-virgule ======================= */\r\n\r\nfunction checkSemicolonHeuristics(\r\n  text: string,\r\n  uri: string,\r\n  lineDisables: DisableMap,\r\n  blockDisables: DisableRanges\r\n): Diagnostic[] {\r\n  const diags: Diagnostic[] = [];\r\n  const lines = text.split(/\\r?\\n/);\r\n\r\n  const starters = /^(?:\\s*)(?:let|const|return|break|continue|type)\\b/;\r\n  const blockEnders = /^(?:\\s*)[}\\])]\\s*$/;\r\n\r\n  for (let i = 0; i < lines.length; i++) {\r\n    if (isDisabled(i, RULES.Semicolon, lineDisables, blockDisables)) continue;\r\n\r\n    const L = lines[i];\r\n    if (blockEnders.test(L)) continue;\r\n    if (/{\\s*$/.test(L)) continue;\r\n    if (/\\b(if|while|for|match)\\b/.test(L)) continue;\r\n\r\n    if (starters.test(L)) {\r\n      if (!rxLineEndSemicolon.test(L)) {\r\n        const col = Math.max(0, L.length - 1);\r\n        diags.push(diag(i, col, i, L.length,\r\n          \"Point-virgule probablement attendu ici.\",\r\n          DiagnosticSeverity.Hint, uri, RULES.Semicolon));\r\n      }\r\n    }\r\n  }\r\n  return diags;\r\n}\r\n\r\n/* ============================ Directives utils ============================ */\r\n\r\nfunction parsePragmas(text: string): Pragmas {\r\n  const lines = text.split(/\\r?\\n/);\r\n  const overrides: Partial<LintOptions> = {};\r\n  for (let i = 0; i < Math.min(20, lines.length); i++) {\r\n    const L = lines[i].trim();\r\n    if (!L.startsWith(\"//\")) continue;\r\n    const m = /\\/\\/\\s*vitte-lint\\s+(.*)$/i.exec(L);\r\n    if (!m) continue;\r\n    const kvs = m[1].split(/\\s+/);\r\n    for (const kv of kvs) {\r\n      const [k, v] = kv.split(\"=\");\r\n      if (!k || v === undefined) continue;\r\n      if (k === \"maxLineLength\") {\r\n        const n = Number(v);\r\n        if (Number.isFinite(n) && n > 0) overrides.maxLineLength = n;\r\n      } else if (k === \"allowTabs\") {\r\n        overrides.allowTabs = v === \"true\";\r\n      } else if (k === \"allowTrailingWhitespace\") {\r\n        overrides.allowTrailingWhitespace = v === \"true\";\r\n      }\r\n    }\r\n  }\r\n  return { overrides };\r\n}\r\n\r\nfunction collectDisables(text: string): { lineDisables: DisableMap; blockDisables: DisableRanges } {\r\n  const lines = text.split(/\\r?\\n/);\r\n  const lineDisables: DisableMap = new Map();\r\n  const block: DisableRanges = { byRule: new Map() };\r\n\r\n  // Ligne: // vitte-lint:disable-next-line ruleA,ruleB\r\n  for (let i = 0; i < lines.length; i++) {\r\n    const m = /\\/\\/\\s*vitte-lint:disable-next-line\\s+([A-Za-z0-9_.,-\\s]+)/i.exec(lines[i]);\r\n    if (!m) continue;\r\n    const rules = splitRules(m[1]);\r\n    const target = i + 1;\r\n    if (!lineDisables.has(target)) lineDisables.set(target, new Set<RuleId>());\r\n    const set = lineDisables.get(target)!;\r\n    for (const r of rules) set.add(mapRuleAlias(r));\r\n  }\r\n\r\n  // Bloc: /* vitte-lint:disable rule */ ... /* vitte-lint:enable */\r\n  const blockRx = /\\/\\*\\s*vitte-lint:(disable|enable)\\s*([^*]*)\\*\\//gi;\r\n  const events: { line: number; kind: \"disable\" | \"enable\"; rules: string[] }[] = [];\n\r\n  for (let i = 0; i < lines.length; i++) {\r\n    let m: RegExpExecArray | null;\r\n    const L = lines[i];\r\n    blockRx.lastIndex = 0;\r\n    while ((m = blockRx.exec(L))) {\r\n      const kind = m[1].toLowerCase() as \"disable\" | \"enable\";\r\n      const rules = splitRules(m[2] ?? \"\");\r\n      events.push({ line: i, kind, rules });\r\n    }\r\n  }\r\n\r\n  const openByRule = new Map<RuleId, number>();\r\n  for (const ev of events) {\r\n    for (const r of ev.rules) {\r\n      const rule = mapRuleAlias(r);\r\n      if (ev.kind === \"disable\") {\r\n        openByRule.set(rule, ev.line);\r\n      } else {\r\n        const start = openByRule.get(rule);\r\n        if (start !== undefined) {\r\n          addRange(block, rule, start, ev.line);\r\n          openByRule.delete(rule);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  for (const [rule, start] of openByRule) addRange(block, rule, start, lines.length - 1);\r\n\r\n  return { lineDisables, blockDisables: block };\r\n}\r\n\r\nfunction splitRules(s: string): string[] {\r\n  return s\r\n    .split(/[,\\s]+/)\r\n    .map(x => x.trim())\r\n    .filter(Boolean);\r\n}\r\n\r\nfunction mapRuleAlias(name: string): RuleId {\r\n  switch (name) {\r\n    case \"tabs\": return RULES.Tabs;\r\n    case \"trailing-ws\":\r\n    case \"trailingWhitespace\": return RULES.TrailingWhitespace;\r\n    case \"line-length\":\r\n    case \"lineLength\": return RULES.LineLength;\r\n    case \"todo\": return RULES.Todo;\r\n    case \"brackets\": return RULES.Brackets;\r\n    case \"number\": return RULES.Number;\r\n    case \"ident-shadow\":\r\n    case \"keyword-shadow\": return RULES.IdentKeywordShadow;\r\n    case \"semicolon\": return RULES.Semicolon;\r\n    default:\r\n      return isRuleId(name) ? name : RULES.LineLength;\r\n  }\r\n}\r\n\r\nfunction addRange(store: DisableRanges, rule: RuleId, start: number, end: number) {\r\n  if (!store.byRule.has(rule)) store.byRule.set(rule, []);\r\n  store.byRule.get(rule)!.push({ start, end });\r\n}\r\n\r\nfunction isDisabled(\r\n  line: number,\r\n  rule: RuleId,\r\n  lineDisables: DisableMap,\r\n  blockDisables: DisableRanges\r\n): boolean {\r\n  if (lineDisables.get(line)?.has(rule)) return true;\r\n  const ranges = blockDisables.byRule.get(rule);\r\n  if (!ranges) return false;\r\n  for (const r of ranges) if (line >= r.start && line <= r.end) return true;\r\n  return false;\r\n}\r\n\r\n/* ============================= LSP Bridge ================================= */\r\n\r\nexport function lintToPublishable(text: string, uri: string, options?: LintOptions): Diagnostic[] {\r\n  return lintText(text, uri, options);\r\n}\r\n"]}