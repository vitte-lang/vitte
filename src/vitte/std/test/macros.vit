<<<
macros.vit
std test helper macros
>>>

space std/test/macros


<<<
imports
>>>

use std/core/types.bool
use std/core/types.string

use std/core/panic
use std/test/assert
use std/test/expect


<<<
assert macros
>>>

macro assert(expr) {
    if not (expr) {
        panic.panic("assert! failed: " + stringify(expr))
    }
}

macro assert_eq(a, b) {
    if not (a == b) {
        panic.panic(
            "assert_eq! failed: left=" + stringify(a) +
            ", right=" + stringify(b)
        )
    }
}

macro assert_ne(a, b) {
    if a == b {
        panic.panic(
            "assert_ne! failed: both=" + stringify(a)
        )
    }
}


<<<
expect macros
>>>

macro expect_ok(expr) {
    give expect.expect_ok(expr)
}

macro expect_err(expr) {
    give expect.expect_err(expr)
}

macro expect_some(expr) {
    give expect.expect_some(expr)
}

macro expect_none(expr) {
    expect.expect_none(expr)
}


<<<
boolean macros
>>>

macro expect_true(expr) {
    assert.assert_true(expr)
}

macro expect_false(expr) {
    assert.assert_false(expr)
}