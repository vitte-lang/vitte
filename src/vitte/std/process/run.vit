<<<
run.vit
std process run helpers
>>>

space std/process/run


<<<
imports
>>>

use std/core/types.string
use std/core/types.u32
use std/core/types.bool
use std/core/types.Unit
use std/core/result.Result
use std/process/types.Output
use std/process/types.EnvVar
use std/process/types.Child
use std/process/types.ExitStatus


<<<
externs
>>>

#[extern]
proc process_run(cmd: string) -> Result[Output, string]

#[extern]
proc process_run_args(cmd: string, args: [string]) -> Result[Output, string]

#[extern]
proc process_run_shell(cmdline: string) -> Result[Output, string]

#[extern]
proc process_spawn(cmd: string, args: [string]) -> Result[Child, string]

#[extern]
proc process_wait(child: *Child) -> Result[ExitStatus, string]

#[extern]
proc process_kill(child: *Child) -> Result[Unit, string]

#[extern]
proc process_stdout(child: *Child) -> Result[string, string]

#[extern]
proc process_stderr(child: *Child) -> Result[string, string]


<<<
helpers
>>>

#[inline]
proc run(cmd: string) -> Result[Output, string] {
    give process_run(cmd)
}

#[inline]
proc run_args(cmd: string, args: [string]) -> Result[Output, string] {
    give process_run_args(cmd, args)
}

#[inline]
proc run_shell(cmdline: string) -> Result[Output, string] {
    give process_run_shell(cmdline)
}

#[inline]
proc spawn(cmd: string, args: [string]) -> Result[Child, string] {
    give process_spawn(cmd, args)
}

#[inline]
proc wait(child: *Child) -> Result[ExitStatus, string] {
    give process_wait(child)
}

#[inline]
proc kill(child: *Child) -> Result[Unit, string] {
    give process_kill(child)
}

#[inline]
proc stdout(child: *Child) -> Result[string, string] {
    give process_stdout(child)
}

#[inline]
proc stderr(child: *Child) -> Result[string, string] {
    give process_stderr(child)
}
