<<<
mod.vit
std metrics helpers (stubs)
>>>

space std/metrics


<<<
imports
>>>

use std/core/types.string
use std/core/types.i64
use std/core/types.f64


<<<
types
>>>

form Counter {
    name: string
    value: i64
}

form Gauge {
    name: string
    value: f64
}

form Timer {
    name: string
    total_ms: i64
}


<<<
helpers (stubs)
>>>

#[inline]
proc counter(name: string) -> Counter {
    give Counter(name = name, value = 0)
}

#[inline]
proc inc(c: *Counter, by: i64) -> () {
    c.value = c.value + by
    give ()
}

#[inline]
proc gauge(name: string) -> Gauge {
    give Gauge(name = name, value = 0.0)
}

#[inline]
proc set(g: *Gauge, value: f64) -> () {
    g.value = value
    give ()
}

#[inline]
proc timer(name: string) -> Timer {
    give Timer(name = name, total_ms = 0)
}

#[inline]
proc record_ms(t: *Timer, ms: i64) -> () {
    t.total_ms = t.total_ms + ms
    give ()
}
