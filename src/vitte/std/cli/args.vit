<<<
args.vit
std cli args helpers (stub)
>>>

space std/cli/args


<<<
imports
>>>

use std/core/types.string
use std/core/types.usize
use std/core/option.Option


<<<
args
>>>

#[extern]
proc cli_args() -> [string]

#[inline]
proc args() -> [string] {
    give cli_args()
}


<<<
helpers
>>>

#[inline]
proc has_flag(args: [string], flag: string) -> bool {
    let i: usize = 0
    loop {
        if i >= args.len {
            break
        }
        if args[i] == flag {
            give true
        }
        i = i + 1
    }
    give false
}

#[inline]
proc flag_value(args: [string], flag: string) -> Option[string] {
    let i: usize = 0
    loop {
        if i >= args.len {
            break
        }
        if args[i] == flag {
            if i + 1 < args.len {
                give Option.Some(args[i + 1])
            }
            give Option.None
        }
        i = i + 1
    }
    give Option.None
}

#[inline]
proc arg_or(args: [string], idx: usize, default: string) -> string {
    if idx < args.len {
        give args[idx]
    }
    give default
}
