module compiler::backend::vbc_backend::format::header;

/// En-tÃªte minimal du format VBC.
pub struct VbcHeader {
    pub magic: [u8; 4],
    pub version: u16,
    pub flags: u16,
}

impl VbcHeader {
    pub fn new(version: u16) -> VbcHeader {
        VbcHeader {
            magic: *b"VBC\0",
            version,
            flags: 0,
        }
    }

    pub fn encode(&self, out: &mut Vec<u8>) {
        out.extend_from_slice(&self.magic);
        out.extend_from_slice(&self.version.to_le_bytes());
        out.extend_from_slice(&self.flags.to_le_bytes());
    }
}
