module sema.core.sema_context;

use sema.core.sema_session::{ SemaSession, SemaProfile };
use sema.core.sema_result::SemaResult;
use sema.core.sema_error::SemaError;
use sema.integration.sema_providers::SemaProviders;

/// Central entry point for semantic analysis.
///
/// `P` is a handle exposing compiler services (middle, incremental, lspâ€¦).
pub struct SemaContext<P: SemaProviders> {
    session: SemaSession,
    providers: P,
}

impl<P: SemaProviders> SemaContext<P> {
    pub fn new(session: SemaSession, providers: P) -> SemaContext<P> {
        SemaContext { session, providers }
    }

    pub fn session(&self) -> &SemaSession {
        &self.session
    }

    pub fn providers(&self) -> &P {
        &self.providers
    }

    pub fn profile(&self) -> &SemaProfile {
        &self.session.profile
    }

    /// Placeholder entry point for running the default pipeline on a whole project.
    pub fn run_on_project(&mut self) -> SemaResult<()> {
        // The real implementation will live in pipeline::SemaPipeline.
        Ok(())
    }
}
