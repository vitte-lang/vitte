space vitte/runtime/std/alloc/alloctests/tests

# ============================================================
# Basic allocator correctness tests
# - Uses test utils (assert + patterns)
# - Validates fundamental allocator behavior
# ============================================================

pull vitte/runtime/std/alloc/alloctests/tests/utils

# ------------------------------------------------------------
# Basic allocation tests
# ------------------------------------------------------------

proc test_alloc_free_basic give bool
    utils::pattern_alloc_free(100, 32)
    give true
.end

proc test_batch_alloc give bool
    let blocks = utils::pattern_batch_alloc(16, 64)
    utils::assert_len(blocks, 16, "batch alloc count mismatch")
    give true
.end

# ------------------------------------------------------------
# Churn / fragmentation sanity
# ------------------------------------------------------------

proc test_churn_sanity give bool
    utils::pattern_churn(32, 8, 128)
    give true
.end

# ------------------------------------------------------------
# Realloc-like behavior
# ------------------------------------------------------------

proc test_grow_shrink give bool
    utils::pattern_grow_shrink(16, 256)
    give true
.end

# ------------------------------------------------------------
# Entry (collected by test harness)
# ------------------------------------------------------------

proc alloc_basic_tests give bool
    test_alloc_free_basic()
    test_batch_alloc()
    test_churn_sanity()
    test_grow_shrink()
    give true
.end
