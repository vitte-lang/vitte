; fuzz/config/target.ini
; Target / platform / toolchain matrix hints for Vitte fuzz + CI.
; Consumers can map these to:
; - toolchain wrapper selection
; - CMake toolchain files
; - compiler target triple + sysroot + SDK discovery (clang)
;
; All paths are repo-relative unless absolute.

[defaults]
; Active target profile name (must match a section below)
profile = host_linux

; If 1, auto-detect host profile when possible
auto_detect = 1

; Prefer clang for fuzzing builds
compiler = clang

; Build system generator
cmake_generator = Ninja

; Default build types per workflow kind
build_type_fuzz = Debug
build_type_tests = Debug
build_type_release = Release

; Standard level for C sources (Vitte codebase is C17)
c_std = c17

; Common includes (repo-relative)
include_dirs =
  include
  compiler/include
  runtime/include
  fuzz/include

; Common defines (space-separated)
defines =

; Common libs (informational)
libs =

; Additional args for CMake configure (space-separated)
cmake_args =

; Where the toolchain config headers live (your current layout)
toolchain_include_dir = toolchain/config/include

; Where response file templates live (clang/lld)
response_files_dir = toolchain/assets/reponse_files

; Where toolchain stubs live (empty.c etc.)
toolchain_stubs_dir = toolchain/assets/stubs

[host_linux]
os = linux
arch = x86_64
triple = x86_64-unknown-linux-gnu

; Toolchain
cc = clang
cxx = clang++
ar = llvm-ar
ranlib = llvm-ranlib
ld = lld

; Optional sysroot (empty = default)
sysroot =

; Additional flags
cflags = -O1 -g -fno-omit-frame-pointer
ldflags =

; Sanitizer defaults for this target (preset name from sanitizers.ini)
sanitizer_preset = asan_ubsan

[host_macos_arm64]
os = macos
arch = arm64
triple = arm64-apple-darwin

cc = clang
cxx = clang++
ar = llvm-ar
ranlib = llvm-ranlib
ld = ld64.lld

; macOS SDK discovery may be needed (xcrun)
sdk = macosx
sdk_path =
sysroot =

cflags = -O1 -g -fno-omit-frame-pointer
ldflags =
sanitizer_preset = asan_ubsan

[host_windows_x64_msvc]
os = windows
arch = x86_64
triple = x86_64-pc-windows-msvc

; If you use clang-cl + lld-link:
cc = clang-cl
cxx = clang-cl
ar = llvm-lib
ranlib =
ld = lld-link

; MSVC/Windows SDK discovery handled by developer prompt / vswhere (scripts)
sdk =
sdk_path =
sysroot =

; Flags are MSVC-style here
cflags = /Od /Z7
ldflags =
sanitizer_preset = asan_only

[host_windows_x64_mingw]
os = windows
arch = x86_64
triple = x86_64-w64-mingw32

cc = clang
cxx = clang++
ar = llvm-ar
ranlib = llvm-ranlib
ld = lld

sysroot =
cflags = -O1 -g -fno-omit-frame-pointer
ldflags =
sanitizer_preset = asan_ubsan

[linux_aarch64_cross]
os = linux
arch = aarch64
triple = aarch64-unknown-linux-gnu

; Cross toolchain (adjust paths)
cc = clang
cxx = clang++
ar = llvm-ar
ranlib = llvm-ranlib
ld = lld

; Cross sysroot path (required)
sysroot = /opt/sysroots/aarch64-linux-gnu

cflags = --target=aarch64-unknown-linux-gnu --sysroot=/opt/sysroots/aarch64-linux-gnu -O1 -g -fno-omit-frame-pointer
ldflags = --target=aarch64-unknown-linux-gnu --sysroot=/opt/sysroots/aarch64-linux-gnu
sanitizer_preset = ubsan_only

[notes]
; Mapping suggestion for your toolchain headers:
; - clang_target.h / clang_sdk.h / clang_paths.h can be derived from:
;   os, arch, triple, sysroot/sdk_path, and tool locations (cc/ld/ar).
;
; If your scripts already compute these, keep this file as authoritative config.
