# toolchain/config/targets/darwin_x86_64.toml
#
# Vitte toolchain target preset: Apple macOS (Darwin) on x86_64 (Intel).
#
# Declarative preset; SDK/sysroot discovery is handled by clang_sdk.c (xcrun).

[target]
name   = "darwin_x86_64"
triple = "x86_64-apple-darwin"

[os]
family = "darwin"
name   = "macos"

[arch]
name  = "x86_64"
cpu   = "intel"     # informational hint
march = ""          # keep empty unless forcing -march=...

[abi]
name = "default"

[sdk]
kind        = "macos"
use_xcrun   = true
sysroot     = ""          # resolved dynamically
min_version = "10.13"     # adjust to your minimum support target

[toolchain]
clang       = ""
clangxx     = ""
lld         = ""          # optional; -fuse-ld=lld if available
llvm_ar     = ""
llvm_ranlib = ""

[compile]
lang_std_c   = "c17"
lang_std_cxx = "c++20"

opt   = "O2"
debug = "g0"
pic   = true
lto   = false

warnings = "default"
color_diagnostics = true

defines = [
  "VITTE_TARGET_DARWIN=1",
  "VITTE_TARGET_X86_64=1",
]

include_dirs = [
]

[link]
use_lld = true
pie     = true
shared  = false

args = [
  # "-Wl,-dead_strip",
]

[libraries]
lib_dirs = [
]

libs = [
]

[output]
obj_ext  = ".o"
exe_ext  = ""
dll_ext  = ".dylib"
lib_ext  = ".a"
