module app.main
import app.types
import app.math

# ============================================================================
# Mini projet – point d'entrée Vitte MVP.
# Met en scène :
#   - des types nominaux (struct, enum, alias),
#   - des constructions de valeurs (`Type { ... }`, `Type::Variant(...)`),
#   - du contrôle (`if`, `while`, `match`),
#   - un retour de fonction annoté.
# ============================================================================

fn make_point(x: f64, y: f64) -> app.types.Point
    return app.types.Point { x = x, y = y }
.end

fn main() -> i32
    let origin = make_point(0.0, 0.0)
    let shifted = app.math.translate_x(origin, 2.5)
    let _distance_squared = app.math.length_squared(shifted)
    let _direction_name = app.math.heading(app.types.Direction::East)

    # Exercices de contrôle et d'itération.
    let mut countdown: i32 = 3
    while countdown > 0
        countdown = countdown - 1
    .end

    let total = app.math.sum_to(4)
    let outcome = app.math.safe_div(total, 2)

    match outcome
        app.types.Result::Ok(value) =>
            return value
        app.types.Result::Error(code) =>
            return code
    .end
.end
