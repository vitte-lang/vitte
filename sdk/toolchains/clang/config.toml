# Clang/LLVM Toolchain Configuration

[clang]
name = "clang"
version_min = "10"
version_preferred = "15"

# Compiler flags
[clang.flags]
base = ["-fPIC", "-fstack-protector-strong"]
optimize_debug = ["-Og", "-g3"]
optimize_release = ["-O3", "-DNDEBUG"]
optimize_lto = ["-O3", "-flto=full"]
warnings = ["-Wall", "-Wextra", "-Wpedantic", "-Wmost"]
extra = []

# Linker configuration
[clang.linker]
name = "lld"
flavor = "lld"
rpath = true
soname = true

# Runtime library (libunwind, libc++)
[clang.runtime]
unwind = "libunwind"
cxx_abi = "libcxxabi"
cxx_lib = "libc++"

# Supported targets
[clang.targets]
x86_64-linux-gnu = { linker = "clang-15" }
aarch64-linux-gnu = { linker = "clang-15" }
x86_64-apple-darwin = { linker = "clang-15" }
aarch64-apple-darwin = { linker = "clang-15" }
armv7-linux-gnueabihf = { linker = "clang-15" }
riscv64-linux-gnu = { linker = "clang-15" }
wasm32-unknown-unknown = { linker = "wasm-ld" }

# Feature support
[clang.features]
lto = true
pgo = true
sanitizers = true
coverage = true
thinlto = true
