# Vitte Toolchain Management Configuration

[toolchains]
# Default toolchain selection per platform
default_linux = "gcc"
default_macos = "clang"
default_windows = "msvc"
default_wasm = "clang"

# Fallback chain (try in order)
fallback_order = ["preferred", "default", "any"]

[toolchain_paths]
# Environment variables that can override toolchain locations
gcc_path = "GCC_PATH"
clang_path = "CLANG_PATH"
msvc_path = "MSVC_PATH"

[detection]
# Auto-detect toolchains from system
auto_detect = true
scan_paths = [
  "/usr/bin",
  "/usr/local/bin",
  "/opt/homebrew/bin",
  "C:\\Program Files\\LLVM\\bin",
  "C:\\Program Files (x86)\\Microsoft Visual Studio\\*\\*\\VC\\bin"
]

[compiler_cache]
# Cache compiler detection results
enabled = true
cache_file = ".vitte/toolchain_cache.json"
ttl_hours = 24

[cross_compilation]
# Cross-compilation settings
cc_sysroot = "SYSROOT"
cc_target = "VITTE_TARGET"
cc_cflags = "VITTE_CFLAGS"
cc_ldflags = "VITTE_LDFLAGS"

[optimization_profiles]
# Predefined optimization levels
[optimization_profiles.debug]
cflags = ["-g3", "-Og"]
ldflags = ["-g"]
strip = false

[optimization_profiles.release]
cflags = ["-O3", "-DNDEBUG"]
ldflags = ["-s"]
strip = true

[optimization_profiles.lto]
cflags = ["-O3", "-flto=full", "-DNDEBUG"]
ldflags = ["-flto=full"]
strip = true

[optimization_profiles.minimal]
cflags = ["-Os"]
ldflags = ["-Wl,--gc-sections"]
strip = true

[sanitizers]
# Sanitizer configurations
[sanitizers.address]
flags = "-fsanitize=address -fsanitize-recover=address"
libs = ["asan"]

[sanitizers.thread]
flags = "-fsanitize=thread"
libs = ["tsan"]

[sanitizers.memory]
flags = "-fsanitize=memory"
libs = ["msan"]

[sanitizers.undefined]
flags = "-fsanitize=undefined"
libs = ["ubsan"]
