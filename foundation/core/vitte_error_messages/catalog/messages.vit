# ============================================================
# vitte_error_messages :: catalog :: messages
# ------------------------------------------------------------
# Catalogue statique des messages d’erreur associés aux codes.
# Les messages sont volontairement neutres et sans contexte
# (le contexte est fourni par vitte_error_codes/context).
# ============================================================

space vitte_error_messages/catalog/messages

# ------------------------------------------------------------
# Types
# ------------------------------------------------------------

form ErrorMessage
  code    : string
  text    : string
.end

# ------------------------------------------------------------
# Messages — Lexing
# ------------------------------------------------------------

const LEX_UNEXPECTED_CHAR : ErrorMessage =
  ErrorMessage
    code = "LEX_0001"
    text = "unexpected character"
  end

const LEX_INVALID_NUMBER : ErrorMessage =
  ErrorMessage
    code = "LEX_0002"
    text = "invalid numeric literal"
  end

# ------------------------------------------------------------
# Messages — Parsing
# ------------------------------------------------------------

const PARSE_UNEXPECTED_TOKEN : ErrorMessage =
  ErrorMessage
    code = "PARSE_0001"
    text = "unexpected token"
  end

const PARSE_MISSING_TOKEN : ErrorMessage =
  ErrorMessage
    code = "PARSE_0002"
    text = "expected token is missing"
  end

# ------------------------------------------------------------
# Messages — Typing
# ------------------------------------------------------------

const TYPE_MISMATCH : ErrorMessage =
  ErrorMessage
    code = "TYPE_0001"
    text = "type mismatch"
  end

const TYPE_UNKNOWN_SYMBOL : ErrorMessage =
  ErrorMessage
    code = "TYPE_0002"
    text = "unknown symbol"
  end

# ------------------------------------------------------------
# Messages — Lowering / MIR
# ------------------------------------------------------------

const LOWER_INVALID_EXPR : ErrorMessage =
  ErrorMessage
    code = "LOWER_0001"
    text = "invalid expression during lowering"
  end

# ------------------------------------------------------------
# Messages — Codegen
# ------------------------------------------------------------

const CODEGEN_FAILURE : ErrorMessage =
  ErrorMessage
    code = "CODEGEN_0001"
    text = "code generation failed"
  end

# ------------------------------------------------------------
# Messages — Driver / Tooling
# ------------------------------------------------------------

const DRIVER_IO_ERROR : ErrorMessage =
  ErrorMessage
    code = "DRIVER_0001"
    text = "i/o error"
  end

const DRIVER_INVALID_ARG : ErrorMessage =
  ErrorMessage
    code = "DRIVER_0002"
    text = "invalid command-line argument"
  end

# ------------------------------------------------------------
# Helpers
# ------------------------------------------------------------

proc all_messages() gives List<ErrorMessage>
  let mut out = List<ErrorMessage>.new()

  # Lex
  out.push(LEX_UNEXPECTED_CHAR)
  out.push(LEX_INVALID_NUMBER)

  # Parse
  out.push(PARSE_UNEXPECTED_TOKEN)
  out.push(PARSE_MISSING_TOKEN)

  # Type
  out.push(TYPE_MISMATCH)
  out.push(TYPE_UNKNOWN_SYMBOL)

  # Lower
  out.push(LOWER_INVALID_EXPR)

  # Codegen
  out.push(CODEGEN_FAILURE)

  # Driver
  out.push(DRIVER_IO_ERROR)
  out.push(DRIVER_INVALID_ARG)

  give out
.end
