# ============================================================
# vitte_error_messages :: locales :: en
# ------------------------------------------------------------
# Locale anglaise (référence) des messages d’erreur.
# Aucun formatage, aucune logique.
# ============================================================

space vitte_error_messages/locales/en

# ------------------------------------------------------------
# Types
# ------------------------------------------------------------

form LocalizedMessage
  code : string
  text : string
.end

# ------------------------------------------------------------
# Lexing
# ------------------------------------------------------------

const LEX_0001 : LocalizedMessage =
  LocalizedMessage
    code = "LEX_0001"
    text = "unexpected character"
  end

const LEX_0002 : LocalizedMessage =
  LocalizedMessage
    code = "LEX_0002"
    text = "invalid numeric literal"
  end

# ------------------------------------------------------------
# Parsing
# ------------------------------------------------------------

const PARSE_0001 : LocalizedMessage =
  LocalizedMessage
    code = "PARSE_0001"
    text = "unexpected token"
  end

const PARSE_0002 : LocalizedMessage =
  LocalizedMessage
    code = "PARSE_0002"
    text = "expected token is missing"
  end

# ------------------------------------------------------------
# Typing
# ------------------------------------------------------------

const TYPE_0001 : LocalizedMessage =
  LocalizedMessage
    code = "TYPE_0001"
    text = "type mismatch"
  end

const TYPE_0002 : LocalizedMessage =
  LocalizedMessage
    code = "TYPE_0002"
    text = "unknown symbol"
  end

# ------------------------------------------------------------
# Lowering / MIR
# ------------------------------------------------------------

const LOWER_0001 : LocalizedMessage =
  LocalizedMessage
    code = "LOWER_0001"
    text = "invalid expression during lowering"
  end

# ------------------------------------------------------------
# Codegen
# ------------------------------------------------------------

const CODEGEN_0001 : LocalizedMessage =
  LocalizedMessage
    code = "CODEGEN_0001"
    text = "code generation failed"
  end

# ------------------------------------------------------------
# Driver / Tooling
# ------------------------------------------------------------

const DRIVER_0001 : LocalizedMessage =
  LocalizedMessage
    code = "DRIVER_0001"
    text = "I/O error"
  end

const DRIVER_0002 : LocalizedMessage =
  LocalizedMessage
    code = "DRIVER_0002"
    text = "invalid command-line argument"
  end

# ------------------------------------------------------------
# Helpers
# ------------------------------------------------------------

proc all_messages() gives List<LocalizedMessage>
  let mut out = List<LocalizedMessage>.new()

  # Lex
  out.push(LEX_0001)
  out.push(LEX_0002)

  # Parse
  out.push(PARSE_0001)
  out.push(PARSE_0002)

  # Type
  out.push(TYPE_0001)
  out.push(TYPE_0002)

  # Lower
  out.push(LOWER_0001)

  # Codegen
  out.push(CODEGEN_0001)

  # Driver
  out.push(DRIVER_0001)
  out.push(DRIVER_0002)

  give out
.end

proc find(code : string) gives LocalizedMessage?
  for msg in all_messages()
    if msg.code == code
      give some msg
    end
  end
  give none
.end
