// Tests for memory and runtime

#[test]
fn test_memory_pool_creation() {
    let pool = MemoryPool::new(1024);
    assert_eq!(pool.capacity, 1024);
    assert_eq!(pool.allocated, 0);
}

#[test]
fn test_memory_allocation() {
    let mut pool = MemoryPool::new(1024);
    assert!(pool.allocate(512));
    assert_eq!(pool.allocated, 512);
}

#[test]
fn test_memory_deallocation() {
    let mut pool = MemoryPool::new(1024);
    pool.allocate(512);
    pool.deallocate(200);
    assert_eq!(pool.allocated, 312);
}

#[test]
fn test_memory_overflow() {
    let mut pool = MemoryPool::new(512);
    assert!(pool.allocate(256));
    assert!(!pool.allocate(512));
}

#[test]
fn test_runtime_attribute() {
    let attr = RuntimeAttribute::new("type".to_string(), "i32".to_string());
    assert_eq!(attr.get_value(), "i32");
}

#[test]
fn test_lifetime_creation() {
    let lifetime = Lifetime::new(100, 200);
    assert_eq!(lifetime.duration(), 100);
}

#[test]
fn test_lifetime_active() {
    let lifetime = Lifetime::new(100, 200);
    assert!(lifetime.is_active(150));
    assert!(!lifetime.is_active(50));
}

#[test]
fn test_memory_allocator() {
    let mut alloc = MemoryAllocator::new(MemoryStrategy::Heap, 2048);
    assert!(alloc.allocate(512));
}
