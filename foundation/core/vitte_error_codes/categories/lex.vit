# ============================================================
# vitte_error_codes :: categories :: lex
# Lexical analysis error codes
# ============================================================

space vitte/error_codes/categories

# ------------------------------------------------------------
# Category metadata
# ------------------------------------------------------------

const LEX_CATEGORY: String = "lex"
const LEX_PREFIX: String  = "LX"

# ------------------------------------------------------------
# LexErrorCode
# ------------------------------------------------------------

pick LexErrorCode

    # --------------------------------------------------------
    # Input / encoding
    # --------------------------------------------------------

    InvalidUtf8                # LX001
    InvalidEncoding            # LX002
    UnexpectedBOM              # LX003

    # --------------------------------------------------------
    # Characters / tokens
    # --------------------------------------------------------

    UnexpectedCharacter        # LX010
    InvalidCharacter           # LX011
    UnsupportedCharacter       # LX012

    # --------------------------------------------------------
    # Identifiers
    # --------------------------------------------------------

    InvalidIdentifierStart     # LX020
    InvalidIdentifierChar      # LX021
    IdentifierTooLong          # LX022

    # --------------------------------------------------------
    # Literals — numbers
    # --------------------------------------------------------

    InvalidNumberLiteral       # LX030
    InvalidIntegerBase         # LX031
    InvalidNumericSuffix       # LX032
    NumberOverflow             # LX033

    # --------------------------------------------------------
    # Literals — strings / chars
    # --------------------------------------------------------

    UnterminatedString         # LX040
    UnterminatedChar           # LX041
    InvalidEscapeSequence      # LX042
    InvalidUnicodeEscape       # LX043

    # --------------------------------------------------------
    # Comments
    # --------------------------------------------------------

    UnterminatedLineComment    # LX050
    UnterminatedBlockComment   # LX051
    InvalidCommentDelimiter    # LX052

    # --------------------------------------------------------
    # Layout / whitespace
    # --------------------------------------------------------

    InvalidIndentation         # LX060
    TabCharacterNotAllowed     # LX061
    MixedIndentation           # LX062

    # --------------------------------------------------------
    # Limits / resources
    # --------------------------------------------------------

    TokenTooLarge              # LX070
    TooManyTokens              # LX071

    # --------------------------------------------------------
    # Internal / unexpected
    # --------------------------------------------------------

    InternalError              # LX900
    Unimplemented              # LX901

.end

# ------------------------------------------------------------
# Helpers
# ------------------------------------------------------------

proc lex_error_code(err: LexErrorCode)
    gives String

    match err
        InvalidUtf8                => "LX001"
        InvalidEncoding            => "LX002"
        UnexpectedBOM              => "LX003"

        UnexpectedCharacter        => "LX010"
        InvalidCharacter           => "LX011"
        UnsupportedCharacter       => "LX012"

        InvalidIdentifierStart     => "LX020"
        InvalidIdentifierChar      => "LX021"
        IdentifierTooLong          => "LX022"

        InvalidNumberLiteral       => "LX030"
        InvalidIntegerBase         => "LX031"
        InvalidNumericSuffix       => "LX032"
        NumberOverflow             => "LX033"

        UnterminatedString         => "LX040"
        UnterminatedChar           => "LX041"
        InvalidEscapeSequence      => "LX042"
        InvalidUnicodeEscape       => "LX043"

        UnterminatedLineComment    => "LX050"
        UnterminatedBlockComment   => "LX051"
        InvalidCommentDelimiter    => "LX052"

        InvalidIndentation         => "LX060"
        TabCharacterNotAllowed     => "LX061"
        MixedIndentation           => "LX062"

        TokenTooLarge              => "LX070"
        TooManyTokens              => "LX071"

        InternalError              => "LX900"
        Unimplemented              => "LX901"
    .end
.end

proc lex_error_category()
    gives String
    give LEX_CATEGORY
.end

# ------------------------------------------------------------
# Notes
# ------------------------------------------------------------
#
# - This file defines ONLY lexer error codes.
# - No formatting or diagnostics text here.
#
# - Naming:
#     LXxxx = LeX
#
# - Ranges:
#     001–009 : input / encoding
#     010–019 : characters
#     020–029 : identifiers
#     030–039 : numeric literals
#     040–049 : string / char literals
#     050–059 : comments
#     060–069 : layout / whitespace
#     070–079 : limits
#     900+    : internal / unexpected
#
# - Codes must remain stable once published.
#
