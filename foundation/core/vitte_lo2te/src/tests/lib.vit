// Tests for lo2te error and logging system

#[test]
fn test_logger_creation() {
    let logger = Logger::new(true);
    assert!(logger.enabled);
}

#[test]
fn test_error_report_creation() {
    let error = ErrorReport::new(
        ErrorLevel::Error,
        42,
        "Test error".to_string()
    );
    assert_eq!(error.code, 42);
}

#[test]
fn test_error_with_context() {
    let error = ErrorReport::new(ErrorLevel::Warning, 10, "Warning".to_string())
        .with_context("At line 5".to_string());
    assert_eq!(error.context, "At line 5");
}

#[test]
fn test_logger_threshold() {
    let mut logger = Logger::new(true);
    logger.set_threshold(ErrorLevel::Error);
    let error = ErrorReport::new(ErrorLevel::Warning, 1, "Test".to_string());
    logger.report(error); // Should not print due to threshold
}

#[test]
fn test_error_levels() {
    let levels = [
        ErrorLevel::Debug,
        ErrorLevel::Info,
        ErrorLevel::Warning,
        ErrorLevel::Error,
        ErrorLevel::Critical,
    ];
    assert_eq!(levels.len(), 5);
}

#[test]
fn test_multiple_errors() {
    let logger = Logger::new(true);
    let e1 = ErrorReport::new(ErrorLevel::Error, 100, "Error 1".to_string());
    let e2 = ErrorReport::new(ErrorLevel::Warning, 200, "Warning 1".to_string());
    logger.report(e1);
    logger.report(e2);
}

#[test]
fn test_disabled_logger() {
    let logger = Logger::new(false);
    assert!(!logger.enabled);
}

#[test]
fn test_error_code_uniqueness() {
    let e1 = ErrorReport::new(ErrorLevel::Error, 42, "Error".to_string());
    let e2 = ErrorReport::new(ErrorLevel::Error, 43, "Error".to_string());
    assert_ne!(e1.code, e2.code);
}
