space tests

<<<
tests.vit
vitteos root deterministic checks
>>>

use api

proc test_bootstrap_accepts_dev() -> bool {
  let cfg = api__ApiConfig("dev", false, false)
  let out = api__api_bootstrap(cfg)
  if out.status != api__ApiStatus.Ok { give false }
  give out.message == "ready"
}

proc test_bootstrap_rejects_unknown_profile() -> bool {
  let cfg = api__ApiConfig("unknown", false, false)
  let out = api__api_bootstrap(cfg)
  if out.status != api__ApiStatus.Failed { give false }
  give out.message == "invalid-config:profile"
}

proc test_health_strict_trace() -> bool {
  let cfg = api__ApiConfig("ci", true, true)
  let out = api__api_health(cfg)
  if out.status != api__ApiStatus.Ok { give false }
  give out.message == "health:strict+trace"
}

proc test_suite_root() -> bool {
  if !test_bootstrap_accepts_dev() { give false }
  if !test_bootstrap_rejects_unknown_profile() { give false }
  if !test_health_strict_trace() { give false }
  give true
}
