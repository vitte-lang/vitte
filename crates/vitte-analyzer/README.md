# vitte-analyzer

**Statique et s√©mantique pour le langage Vitte.**  
Crate interne du compilateur `vitte` d√©di√©e √† l‚Äôanalyse syntaxique, s√©mantique et symbolique des unit√©s de compilation.  
Fait partie du projet [Vitte Language](https://github.com/vitte-lang/vitte).

---

## üì¶ Pr√©sentation

`vitte-analyzer` assure la phase d‚Äôanalyse du compilateur :

- Validation syntaxique post-AST (structure coh√©rente)
- R√©solution des symboles (`use`, `mod`, `fn`, `type`, etc.)
- Gestion des port√©es et du typage
- Inf√©rence et v√©rification de types
- Analyse des d√©pendances inter-modules
- D√©tection d‚Äôerreurs et avertissements d√©taill√©s
- Interface publique vers `vitte-lsp` pour l‚ÄôIDE et l‚Äôautocompl√©tion

---

## üß† Architecture

| Module | R√¥le principal |
|--------|----------------|
| `scope` | Gestion hi√©rarchique des port√©es (lexicales et globales) |
| `symbol` | Table des symboles et r√©solution des identifiants |
| `typeck` | Inf√©rence et v√©rification de types |
| `diagnostics` | Emission d‚Äôerreurs, avertissements et notes |
| `visitor` | Parcours structur√© des n≈ìuds AST |
| `semantic` | Validation compl√®te et transformation vers IR |
| `tests` | Cas unitaires et validation int√©gr√©e |

---

## ‚öôÔ∏è D√©pendances internes

```toml
[dependencies]
vitte-ast = { path = "../vitte-ast" }
vitte-core = { path = "../vitte-core" }
vitte-diagnostics = { path = "../vitte-diagnostics" }
vitte-utils = { path = "../vitte-utils" }
# vitte-analyzer

Moteur **d‚Äôanalyse statique et s√©mantique** pour le langage Vitte.

`vitte-analyzer` constitue la couche d‚Äôintelligence du compilateur Vitte.  
Il effectue la validation syntaxique avanc√©e, la r√©solution des symboles, la v√©rification des types et l‚Äôanalyse des d√©pendances inter-modules.  
Ce crate est utilis√© √† la fois par le compilateur (`vitte-compiler`), le langage serveur (`vitte-lsp`) et les outils de documentation (`vitte-docgen`).

---

## Objectifs

- Analyse statique compl√®te et rapide.
- R√©solution symbolique (`use`, `mod`, `fn`, `type`, `const`, `trait`).
- Inf√©rence et validation de types g√©n√©riques.
- Analyse des d√©pendances entre unit√©s de compilation.
- G√©n√©ration de diagnostics pr√©cis (erreurs, avertissements, notes).
- API unifi√©e pour les IDE et outils externes.

---

## Architecture

| Module        | R√¥le |
|----------------|------|
| `scope`        | Gestion hi√©rarchique des port√©es (lexicales et globales) |
| `symbol`       | Table des symboles et r√©solution des identifiants |
| `typeck`       | V√©rification et inf√©rence de types |
| `diagnostics`  | Emission d‚Äôerreurs, avertissements et conseils |
| `visitor`      | Parcours structur√© de l‚ÄôAST |
| `semantic`     | Analyse s√©mantique compl√®te et validation IR |
| `graph`        | D√©pendances inter-modulaires et cycles |
| `tests`        | Tests unitaires, snapshots et validation de flux |

---

## Exemple d‚Äôutilisation

```rust
use vitte_analyzer::Analyzer;
use vitte_ast::parse;

fn main() -> anyhow::Result<()> {
    let src = "fn add(a: Int, b: Int) -> Int { a + b }";
    let ast = parse(src)?;
    let mut analyzer = Analyzer::new();
    analyzer.analyze(&ast)?;
    println!("Analyse r√©ussie !");
    Ok(())
}
```

---

## Int√©gration

- `vitte-lsp` : fournit les diagnostics et la compl√©tion IDE.
- `vitte-compiler` : utilise les symboles et types valid√©s.
- `vitte-docgen` : extrait les m√©tadonn√©es de symboles pour la documentation.
- `vitte-analyzer-cli` : version autonome pour scripts et CI.

---

## D√©pendances

```toml
[dependencies]
vitte-core = { path = "../vitte-core", version = "0.1.0" }
vitte-ast = { path = "../vitte-ast", version = "0.1.0" }
vitte-diagnostics = { path = "../vitte-diagnostics", version = "0.1.0" }
vitte-utils = { path = "../vitte-utils", version = "0.1.0" }

anyhow = "1"
serde = { version = "1.0", features = ["derive"] }
colored = "2"
indexmap = "2.5"
```

---

## Tests

```bash
cargo test -p vitte-analyzer
```

- Tests d‚Äôanalyse s√©mantique.
- V√©rification d‚Äôinf√©rence de types.
- D√©tection de symboles non r√©solus.
- Snapshots de diagnostics complets.

---

## Roadmap

- [ ] Support des macros et d√©rivations personnalis√©es.
- [ ] R√©solution avanc√©e des traits et impl blocs.
- [ ] Analyse incr√©mentale pour IDE.
- [ ] Visualisation du graphe des d√©pendances.

---

## Licence

SPDX-License-Identifier: MIT  
Copyright (c) 2025 Vincent Rousseau